# 123/udp - Pentesting NTP

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Pridružite se [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) serveru kako biste komunicirali sa iskusnim hakerima i lovcima na bagove!

**Hakerski uvidi**\
Uključite se u sadržaj koji istražuje uzbuđenje i izazove hakovanja

**Hakerske vesti u realnom vremenu**\
Budite u toku sa brzim svetom hakovanja kroz vesti i uvide u realnom vremenu

**Najnovije objave**\
Budite informisani o najnovijim pokretanjima nagrada za pronalaženje bagova i važnim ažuriranjima platforme

**Pridružite nam se na** [**Discord-u**](https://discord.com/invite/N3FrSbmwdy) i počnite da sarađujete sa vrhunskim hakerima danas!

## Osnovne informacije

**Network Time Protocol (NTP)** obezbeđuje sinhronizaciju tačnih vremena računara i mrežnih uređaja preko mreža sa promenljivom latencijom. To je od vitalnog značaja za održavanje preciznog vremena u IT operacijama, bezbednosti i beleženju događaja. Tačnost NTP-a je ključna, ali istovremeno predstavlja i sigurnosne rizike ako se ne upravlja pravilno.

### Rezime i saveti za bezbednost:

* **Svrha**: Sinhronizacija vremena uređaja preko mreža.
* **Važnost**: Kritično za bezbednost, beleženje događaja i operacije.
* **Mere bezbednosti**:
* Koristite pouzdane izvore NTP-a sa autentifikacijom.
* Ograničite pristup mreži NTP servera.
* Pratite sinhronizaciju radi otkrivanja znakova manipulacije.

**Podrazumevani port:** 123/udp

```
PORT    STATE SERVICE REASON
123/udp open  ntp     udp-response
```

## Enumeracija

### NTP (Network Time Protocol)

NTP (Network Time Protocol) je protokol koji se koristi za sinhronizaciju vremena na računarskim mrežama. Kao pentester, možete iskoristiti NTP za prikupljanje informacija o ciljnom sistemu.

#### Nmap skeniranje

Nmap može skenirati NTP servis koristeći sledeću komandu:

```plaintext
nmap -p 123 --script ntp-info <cilj>
```

Ova komanda će vam pružiti informacije o NTP servisu na ciljnom sistemu, kao što su verzija NTP servera i dostupne opcije.

#### NTP monlist napad

NTP monlist napad je poznati DDoS napad koji iskorišćava NTP servere koji podržavaju MONLIST komandu. MONLIST komanda omogućava napadaču da dobije listu poslednjih 600 IP adresa koje su se povezivale sa NTP serverom.

Da biste izvršili NTP monlist napad, možete koristiti alat poput `ntpdc` ili `ntp-monlist`:

```plaintext
ntpdc -n -c monlist <cilj>
```

```plaintext
ntp-monlist <cilj>
```

Ovi alati će vam pružiti listu IP adresa koje su se povezivale sa NTP serverom, što može biti korisno za dalje istraživanje i napade.

#### NTP amplifikacioni napad

NTP amplifikacioni napad je vrsta DDoS napada koji koristi NTP servere za generisanje velike količine saobraćaja prema ciljnom sistemu. Napadač šalje malu zahtevnu poruku na NTP server, a server odgovara sa velikom količinom podataka prema cilju.

Da biste izvršili NTP amplifikacioni napad, možete koristiti alat poput `ntp-amplification`:

```plaintext
ntp-amplification <cilj>
```

Ovaj alat će generisati veliku količinu saobraćaja prema ciljnom sistemu, što može dovesti do preopterećenja i ometanja normalnog rada.

```bash
ntpq -c readlist <IP_ADDRESS>
ntpq -c readvar <IP_ADDRESS>
ntpq -c peers <IP_ADDRESS>
ntpq -c associations <IP_ADDRESS>
ntpdc -c monlist <IP_ADDRESS>
ntpdc -c listpeers <IP_ADDRESS>
ntpdc -c sysinfo <IP_ADDRESS>
```

```bash
nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 <IP>
```

## Pregledajte konfiguracione fajlove

* ntp.conf

## Napad NTP Amplifikacijom

[**Kako funkcioniše NTP DDoS napad**](https://resources.infosecinstitute.com/network-time-protocol-ntp-threats-countermeasures/#gref)

**NTP protokol**, koristeći UDP, omogućava rad bez potrebe za postupcima rukovanja, za razliku od TCP-a. Ova karakteristika se iskorišćava u **NTP DDoS napadima amplifikacijom**. Ovde, napadači kreiraju pakete sa lažnom izvornom IP adresom, čime se čini da zahtevi za napad dolaze od žrtve. Ovi paketi, koji su prvobitno mali, podstiču NTP server da odgovori sa mnogo većim obimom podataka, čime se pojačava napad.

Komanda _**MONLIST**_, uprkos retkoj upotrebi, može prijaviti poslednjih 600 klijenata koji su se povezali na NTP servis. Iako je sama komanda jednostavna, njen zloupotreba u ovakvim napadima ističe kritične bezbednosne ranjivosti.

```bash
ntpdc -n -c monlist <IP>
```

## Shodan

* `ntp`

## HackTricks Automatske Komande

```
Protocol_Name: NTP    #Protocol Abbreviation if there is one.
Port_Number:  123     #Comma separated if there is more than one.
Protocol_Description: Network Time Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for NTP
Note: |
The Network Time Protocol (NTP) ensures computers and network devices across variable-latency networks sync their clocks accurately. It's vital for maintaining precise timekeeping in IT operations, security, and logging. NTP's accuracy is essential, but it also poses security risks if not properly managed.

https://book.hacktricks.xyz/pentesting/pentesting-ntp

Entry_2:
Name: Nmap
Description: Enumerate NTP
Command: nmap -sU -sV --script "ntp* and (discovery or vuln) and not (dos or brute)" -p 123 {IP}
```

​

<figure><img src="../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>

Pridružite se [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) serveru kako biste komunicirali sa iskusnim hakerima i lovcima na bagove!

**Hakerski uvidi**\
Uključite se u sadržaj koji istražuje uzbuđenje i izazove hakovanja

**Vesti o hakovanju u realnom vremenu**\
Budite u toku sa brzim svetom hakovanja kroz vesti i uvide u realnom vremenu

**Najnovije objave**\
Budite informisani o najnovijim pokretanjima nagrada za pronalaženje bagova i važnim ažuriranjima platforme

**Pridružite nam se na** [**Discord-u**](https://discord.com/invite/N3FrSbmwdy) i počnite da sarađujete sa vrhunskim hakerima danas!

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju oglašenu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje trikove hakovanja slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
