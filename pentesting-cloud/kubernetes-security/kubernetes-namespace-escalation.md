# Kubernetes Namespace Escalation

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ trikami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}

W Kubernetes doÅ›Ä‡ powszechne jest, Å¼e w jakiÅ› sposÃ³b **udaje ci siÄ™ dostaÄ‡ do namespace** (poprzez kradzieÅ¼ danych logowania uÅ¼ytkownika lub kompromitacjÄ™ poda). Jednak zazwyczaj bÄ™dziesz zainteresowany **eskalacjÄ… do innego namespace, poniewaÅ¼ moÅ¼na tam znaleÅºÄ‡ bardziej interesujÄ…ce rzeczy**.

Oto kilka technik, ktÃ³re moÅ¼esz sprÃ³bowaÄ‡, aby uciec do innego namespace:

### Wykorzystanie uprawnieÅ„ K8s

OczywiÅ›cie, jeÅ›li konto, ktÃ³re ukradÅ‚eÅ›, ma wraÅ¼liwe uprawnienia w namespace, do ktÃ³rego chcesz siÄ™ eskalowaÄ‡, moÅ¼esz naduÅ¼yÄ‡ dziaÅ‚aÅ„ takich jak **tworzenie podÃ³w** z kontami serwisowymi w NS, **wykonywanie** powÅ‚oki w juÅ¼ istniejÄ…cym podzie wewnÄ…trz ns, lub odczytanie **sekretnych** tokenÃ³w SA.

Aby uzyskaÄ‡ wiÄ™cej informacji na temat tego, ktÃ³re uprawnienia moÅ¼esz naduÅ¼yÄ‡, przeczytaj:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Ucieczka do wÄ™zÅ‚a

JeÅ›li moÅ¼esz uciec do wÄ™zÅ‚a, poniewaÅ¼ skompromitowaÅ‚eÅ› poda i moÅ¼esz uciec lub poniewaÅ¼ moÅ¼esz stworzyÄ‡ uprzywilejowanego poda i uciec, moÅ¼esz zrobiÄ‡ kilka rzeczy, aby ukraÅ›Ä‡ inne tokeny SA:

* SprawdÅº **tokeny SA zamontowane w innych kontenerach dockerowych** dziaÅ‚ajÄ…cych na wÄ™Åºle
* SprawdÅº nowe **pliki kubeconfig na wÄ™Åºle z dodatkowymi uprawnieniami** nadanymi wÄ™zÅ‚owi
* JeÅ›li wÅ‚Ä…czone (lub wÅ‚Ä…cz to samodzielnie), sprÃ³buj **tworzyÄ‡ lustrzane pody z innych namespace**, poniewaÅ¼ moÅ¼esz uzyskaÄ‡ dostÄ™p do domyÅ›lnych kont tokenÃ³w tych namespace (jeszcze tego nie testowaÅ‚em)

Wszystkie te techniki sÄ… wyjaÅ›nione w:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ trikami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}
