# GCP - Bezbednost

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

Google Cloud Platform (GCP) Security obuhvata **kompletnu kolekciju alata** i praksi dizajniranih da osiguraju **bezbednost** resursa i podataka unutar Google Cloud okruženja, podeljenih u četiri glavne sekcije: **Security Command Center, Detections and Controls, Data Protection i Zero Trust.**

## **Security Command Center**

Google Cloud Platform (GCP) Security Command Center (SCC) je **alat za upravljanje bezbednošću i rizicima za GCP** resurse koji omogućava organizacijama da steknu uvid i kontrolu nad svojim cloud resursima. Pomaže u **otkrivanju i reagovanju na pretnje** pružajući sveobuhvatnu bezbednosnu analitiku, **identifikujući loše konfiguracije**, osiguravajući **usaglašenost** sa bezbednosnim standardima i **integraciju** sa drugim bezbednosnim alatima za automatizovano otkrivanje i reagovanje na pretnje.

* **Pregled**: Panel za **vizualizaciju pregleda** svih rezultata Security Command Center-a.
* Pretnje: \[Potreban Premium] Panel za vizualizaciju svih **detektovanih pretnji. Pročitajte više o Pretnjama ispod**
* **Ranjivosti**: Panel za **vizualizaciju pronađenih loših konfiguracija u GCP nalogu**.
* **Usaglašenost**: \[Potreban Premium] Ova sekcija omogućava da **testirate svoje GCP okruženje protiv različitih provera usaglašenosti** (kao što su PCI-DSS, NIST 800-53, CIS benchmarkovi...) unutar organizacije.
* **Resursi**: Ova sekcija **prikazuje sve korišćene resurse**, veoma korisno za sistem administratore (i možda napadače) da vide šta se izvršava na jednoj stranici.
* **Nalazi**: Ovo **agregira** u **tabelu nalaze** različitih sekcija GCP Security (ne samo Command Center) kako bi se lako vizualizovali bitni nalazi.
* **Izvori**: Prikazuje **rezime nalaza** svih različitih sekcija GCP bezbednosti **po sekcijama**.
* **Pozicija**: \[Potreban Premium] Bezbednosna Pozicija omogućava da se **definiše, proceni i prati bezbednost GCP okruženja**. Radi kreiranjem politike koja definiše ograničenja ili restrikcije koje kontrolišu/prate resurse u GCP. Postoje nekoliko unapred definisanih šablona pozicije koji se mogu pronaći na [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Pretnje**

Sa perspektive napadača, ovo je verovatno **najinteresantnija funkcija jer može otkriti napadača**. Međutim, imajte na umu da ova funkcija zahteva **Premium** (što znači da će kompanija morati da plati više), pa **možda čak nije ni omogućena**.&#x20;

Postoje 3 vrste mehanizama za otkrivanje pretnji:

* **Pretnje događaja**: Nalazi proizvedeni podudaranjem događaja iz **Cloud Logging-a** na osnovu **pravila kreiranih** interno od strane Google-a. Takođe može skenirati **Google Workspace logove**.
* Moguće je pronaći opis svih [**pravila otkrivanja u dokumentaciji**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **Pretnje kontejnera**: Nalazi proizvedeni nakon analize niskog nivoa ponašanja jezgra kontejnera.
* **Prilagođene pretnje**: Pravila kreirana od strane kompanije.

Moguće je pronaći preporučene odgovore na detektovane pretnje oba tipa na [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)

### Nabrojavanje

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
## Detekcije i Kontrole

* **Chronicle SecOps**: Napredni skup operacija za bezbednost dizajniran da pomogne timovima da povećaju brzinu i uticaj operacija za bezbednost, uključujući detekciju pretnji, istragu i odgovor.
* **reCAPTCHA Enterprise**: Servis koji štiti veb sajtove od prevara poput skrejpinga, napada sa ukradenim podacima i automatizovanih napada razlikujući između ljudskih korisnika i botova.
* **Web Security Scanner**: Automatizovani alat za skeniranje bezbednosti koji otkriva ranjivosti i uobičajene bezbednosne probleme u veb aplikacijama koje se hostuju na Google Cloud-u ili drugom veb servisu.
* **Risk Manager**: Alat za upravljanje rizicima, usaglašenošću i upravljanje (GRC) koji pomaže organizacijama da procene, dokumentuju i razumeju svoj rizični položaj na Google Cloud-u.
* **Binary Authorization**: Kontrola bezbednosti za kontejnere koja osigurava da se samo pouzdane slike kontejnera implementiraju na Kubernetes Engine klasterima prema politikama postavljenim od strane preduzeća.
* **Obaveštenja o savetima**: Servis koji pruža upozorenja i savete o potencijalnim bezbednosnim problemima, ranjivostima i preporučenim akcijama kako bi se resursi održali bezbednim.
* **Odobrenje pristupa**: Funkcija koja omogućava organizacijama da zahtevaju eksplicitno odobrenje pre nego što zaposleni u Google-u mogu pristupiti njihovim podacima ili konfiguracijama, pružajući dodatni sloj kontrole i revizije.
* **Upravljani Microsoft AD**: Servis koji nudi upravljani Microsoft Active Directory (AD) koji korisnicima omogućava korišćenje njihovih postojećih aplikacija i radnih opterećenja zavisnih od Microsoft AD-a na Google Cloud-u.

## Zaštita Podataka

* **Zaštita osetljivih podataka**: Alati i prakse usmereni na zaštitu osetljivih podataka, poput ličnih informacija ili intelektualne svojine, od neovlašćenog pristupa ili izlaganja.
* **Prevencija gubitka podataka (DLP)**: Skup alata i procesa koji se koriste za identifikaciju, praćenje i zaštitu podataka u upotrebi, u pokretu i u mirovanju putem dubinske inspekcije sadržaja i primenom sveobuhvatnog skupa pravila zaštite podataka.
* **Servis sertifikacionog tela**: Razmerljiv i siguran servis koji pojednostavljuje i automatizuje upravljanje, implementaciju i obnavljanje SSL/TLS sertifikata za interne i eksterne servise.
* **Upravljanje ključevima**: Cloud servis koji vam omogućava upravljanje kriptografskim ključevima za vaše aplikacije, uključujući kreiranje, uvoz, rotaciju, korišćenje i uništavanje enkripcionih ključeva. Više informacija u:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Menadžer sertifikata**: Servis koji upravlja i implementira SSL/TLS sertifikate, obezbeđujući sigurne i enkriptovane veze sa vašim veb servisima i aplikacijama.
* **Menadžer tajni**: Siguran i praktičan sistem za skladištenje API ključeva, lozinki, sertifikata i drugih osetljivih podataka, koji omogućava jednostavan i siguran pristup i upravljanje ovim tajnama u aplikacijama. Više informacija u:

{% content-ref url="../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Nulta Poverenja

* **BeyondCorp Enterprise**: Platforma za bezbednost nultog poverenja koja omogućava siguran pristup internim aplikacijama bez potrebe za tradicionalnim VPN-om, oslanjajući se na verifikaciju poverenja korisnika i uređaja pre dodeljivanja pristupa.
* **Alat za rešavanje problema sa politikom**: Alat dizajniran da pomogne administratorima da razumeju i reše probleme sa pristupom u njihovoj organizaciji identifikujući zašto korisnik ima pristup određenim resursima ili zašto je pristup odbijen, čime pomaže u sprovođenju politika nultog poverenja.
* **Proxy s identitetom (IAP)**: Servis koji kontroliše pristup cloud aplikacijama i virtuelnim mašinama koje se izvršavaju na Google Cloud-u, lokalno ili na drugim oblakama, na osnovu identiteta i konteksta zahteva umesto mreže sa koje zahtev potiče.
* **Kontrole servisa VPC**: Bezbednosni obod koji pruža dodatne slojeve zaštite resursima i servisima hostovanim u Virtualnom privatnom oblaku (VPC) Google Cloud-a, sprečavajući eksfiltraciju podataka i pružajući granularnu kontrolu pristupa.
* **Menadžer konteksta pristupa**: Deo BeyondCorp Enterprise-a Google Cloud-a, ovaj alat pomaže u definisanju i sprovođenju politika fine kontrole pristupa na osnovu identiteta korisnika i konteksta njihovog zahteva, poput statusa bezbednosti uređaja, IP adrese i više.
