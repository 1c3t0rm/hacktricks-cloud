# GCP - Usalama

<details>

<summary><strong>Jifunze kuhusu kudukua AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za kudukua kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Taarifa Msingi

Usalama wa Jukwaa la Google Cloud (GCP) unajumuisha **seti kamili ya zana** na mazoea yaliyoundwa kuhakikisha **usalama** wa rasilimali na data ndani ya mazingira ya Google Cloud, yaliyogawanywa katika sehemu kuu nne: **Kituo cha Amri cha Usalama, Uchunguzi na Udhibiti, Ulinzi wa Data na Zero Trust.**

## **Kituo cha Amri cha Usalama**

Kituo cha Amri cha Usalama (SCC) cha Jukwaa la Google Cloud (GCP) ni **zana ya usimamizi wa usalama na hatari kwa rasilimali za GCP** ambayo inawezesha mashirika kupata uonekano na udhibiti juu ya mali zao za wingu. Inasaidia **kugundua na kujibu vitisho** kwa kutoa uchambuzi wa usalama wa kina, **kutambua upangilio mbaya**, kuhakikisha **kufuata** viwango vya usalama, na **kuunganisha** na zana zingine za usalama kwa uchunguzi wa vitisho na majibu yaliyoautomatiki.

* **Muhtasari**: Kiolesura cha **kuona muhtasari** wa matokeo yote ya Kituo cha Amri cha Usalama.
* Vitisho: \[Inahitaji Premium] Kiolesura cha kuona vitisho vyote **vilivyogunduliwa. Angalia zaidi kuhusu Vitisho hapa chini**
* **Udhaifu**: Kiolesura cha **kuona upangilio mbaya uliopatikana kwenye akaunti ya GCP**.
* **Kufuata**: \[Inahitaji Premium] Sehemu hii inaruhusu **jaribu mazingira yako ya GCP dhidi ya ukaguzi kadhaa wa kufuata** (kama vile PCI-DSS, NIST 800-53, viwango vya CIS...) juu ya shirika.
* **Mali**: Sehemu hii **inaonyesha mali zote zinazotumiwa**, muhimu sana kwa wasimamizi wa mfumo (na labda mshambuliaji) kuona ni nini kinachoendesha kwenye ukurasa mmoja.
* **Matokeo**: Hii **inakusanya** katika **meza matokeo** ya sehemu tofauti za Usalama wa GCP (siyo tu Kituo cha Amri) ili kuweza kuona kwa urahisi matokeo yanayojali.
* **Vyanzo**: Inaonyesha **muhtasari wa matokeo** ya sehemu tofauti za usalama wa GCP **kwa sehemu**.
* **Msimamo**: \[Inahitaji Premium] Msimamo wa Usalama unaruhusu **kuamua, kutathmini, na kufuatilia usalama wa mazingira ya GCP**. Inafanya kazi kwa kuunda sera ambayo inaamua vikwazo au vizuizi vinavyodhibiti/kuangalia rasilimali katika GCP. Kuna templeti za msimamo zilizopangwa mapema ambazo zinaweza kupatikana kwenye [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Vitisho**

Kutoka mtazamo wa mshambuliaji, hii labda ni **kipengele cha kuvutia zaidi kwani inaweza kugundua mshambuliaji**. Walakini, kumbuka kuwa kipengele hiki kinahitaji **Premium** (ambayo inamaanisha kuwa kampuni itahitaji kulipa zaidi), kwa hivyo **huenda hata kisipoamilishwa**.&#x20;

Kuna aina 3 za mifumo ya kugundua vitisho:

* **Vitisho vya Tukio**: Matokeo yanayozalishwa kwa kulinganisha matukio kutoka **Kuingia kwa Wingu** kulingana na **kanuni zilizoundwa** ndani na Google. Pia inaweza kutafuta **kuingia kwa Google Workspace**.
* Inawezekana kupata maelezo ya [**kanuni za kugundua zote katika nyaraka**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **Vitisho vya Kontena**: Matokeo yanayozalishwa baada ya kuchambua tabia ya kiwango cha chini ya kernel ya kontena.
* **Vitisho vya Desturi**: Kanuni zilizoundwa na kampuni.

Inawezekana kupata majibu yaliyopendekezwa kwa vitisho vilivyogunduliwa vya aina zote katika [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)

### Urambazaji

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
### Baada ya Uvamizi

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Uchunguzi na Udhibiti

* **Chronicle SecOps**: Suite ya hali ya juu ya operesheni za usalama iliyoundwa kusaidia timu kuongeza kasi na athari ya operesheni za usalama, ikiwa ni pamoja na ugunduzi wa vitisho, uchunguzi, na majibu.
* **reCAPTCHA Enterprise**: Huduma inayolinda tovuti kutokana na shughuli za udanganyifu kama vile kuchimba, kujaza vibambo, na mashambulizi ya kiotomatiki kwa kutofautisha kati ya watumiaji binadamu na bots.
* **Web Security Scanner**: Zana ya kiotomatiki ya skanning ya usalama inayogundua mapungufu na masuala ya kawaida ya usalama katika programu za wavuti zilizohifadhiwa kwenye Google Cloud au huduma nyingine ya wavuti.
* **Risk Manager**: Zana ya utawala, hatari, na uthibitishaji (GRC) inayosaidia mashirika kutathmini, kudokumenti, na kuelewa hali yao ya hatari kwenye Google Cloud.
* **Binary Authorization**: Udhibiti wa usalama kwa vyombo vya kube ambao unahakikisha tu picha za vyombo vya kube zinazotegemewa zinahifadhiwa kwenye vikundi vya Kubernetes Engine kulingana na sera zilizowekwa na kampuni.
* **Advisory Notifications**: Huduma inayotoa tahadhari na maelekezo kuhusu masuala ya usalama yanayowezekana, mapungufu, na hatua zilizopendekezwa ili kudumisha usalama wa rasilimali.
* **Access Approval**: Kipengele kinachoruhusu mashirika kuhitaji idhini wazi kabla ya wafanyakazi wa Google kufikia data au mipangilio yao, kutoa safu ya ziada ya udhibiti na uwezo wa ukaguzi.
* **Managed Microsoft AD**: Huduma inayotoa usimamizi wa Microsoft Active Directory (AD) iliyoratibiwa ambayo inaruhusu watumiaji kutumia programu na mzigo wao ulio tegemeziwa na Microsoft AD uliopo kwenye Google Cloud.

## Ulinzi wa Data

* **Ulinzi wa Data Nyeti**: Zana na mazoea yanayolenga kulinda data nyeti, kama vile taarifa za kibinafsi au mali miliki, dhidi ya ufikiaji au ufunuli usiohalali.
* **Kupoteza Data Kuzuia (DLP)**: Seti ya zana na michakato inayotumika kutambua, kufuatilia, na kulinda data inayotumiwa, inayosafirishwa, na iliyoko kupitia ukaguzi wa kina wa maudhui na kwa kutumia seti kamili ya sheria za ulinzi wa data.
* **Certificate Authority Service**: Huduma inayoweza kupanuka na salama inayosimplisha na kiotomatiki usimamizi, upelekaji, na upya wa vyeti vya SSL/TLS kwa huduma za ndani na nje.
* **Usimamizi wa Funguo**: Huduma inayotegemea wingu inayoruhusu kusimamia funguo za kriptografia kwa programu zako, ikiwa ni pamoja na uumbaji, uingizaji, mzunguko, matumizi, na uharibifu wa funguo za kufichua. Taarifa zaidi katika:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Certificate Manager**: Huduma inayosimamia na kutoa vyeti vya SSL/TLS, ikihakikisha mawasiliano salama na yaliyofichwa kwa huduma na programu zako za wavuti.
* **Meneja wa Siri**: Mfumo salama na rahisi wa kuhifadhi funguo za API, nywila, vyeti, na data nyeti nyingine, ambao unaruhusu ufikiaji na usimamizi rahisi na salama wa siri hizi katika programu. Taarifa zaidi katika:

{% content-ref url="../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Imani Sifuri

* **BeyondCorp Enterprise**: Jukwaa la usalama la imani sifuri linalowezesha ufikiaji salama wa programu za ndani bila haja ya VPN ya jadi, kwa kutegemea uthibitishaji wa imani ya mtumiaji na kifaa kabla ya kutoa ufikiaji.
* **Policy Troubleshooter**: Zana iliyoundwa kusaidia wasimamizi kuelewa na kutatua matatizo ya ufikiaji katika shirika lao kwa kutambua kwa nini mtumiaji ana ufikiaji wa rasilimali fulani au kwa nini ufikiaji ulikataliwa, hivyo kusaidia katika utekelezaji wa sera za imani sifuri.
* **Identity-Aware Proxy (IAP)**: Huduma inayodhibiti ufikiaji wa programu za wingu na VM zinazoendesha kwenye Google Cloud, kwenye maeneo ya ndani, au mawingu mengine, kulingana na utambulisho na muktadha wa ombi badala ya mtandao ambao ombi linatoka.
* **VPC Service Controls**: Mipaka ya usalama inayotoa safu za ziada za ulinzi kwa rasilimali na huduma zilizohifadhiwa kwenye Virtual Private Cloud (VPC) ya Google Cloud, kuzuia utoroshaji wa data na kutoa udhibiti wa ufikiaji wa kina.
* **Access Context Manager**: Sehemu ya BeyondCorp Enterprise ya Google Cloud, zana hii husaidia kufafanua na kutekeleza sera za udhibiti wa ufikiaji wa kina kulingana na utambulisho wa mtumiaji na muktadha wa ombi lao, kama vile hali ya usalama ya kifaa, anwani ya IP, na zaidi.
