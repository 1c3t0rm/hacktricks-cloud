# GCP - Sicurezza

<details>

<summary><strong>Impara l'hacking su AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Esperto Red Team di HackTricks su AWS)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se desideri vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**La Famiglia PEASS**](https://opensea.io/collection/the-peass-family), la nostra collezione esclusiva di [**NFT**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguici** su **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Informazioni di Base

La Sicurezza della Piattaforma Google Cloud (GCP) comprende una **suite completa di strumenti** e pratiche progettate per garantire la **sicurezza** delle risorse e dei dati all'interno dell'ambiente Google Cloud, divisi in quattro sezioni principali: **Security Command Center, Rilevamenti e Controlli, Protezione dei Dati e Zero Trust.**

## **Security Command Center**

Il Security Command Center (SCC) della Piattaforma Google Cloud (GCP) √® uno **strumento di gestione della sicurezza e dei rischi per le risorse GCP** che consente alle organizzazioni di ottenere visibilit√† e controllo sui propri asset cloud. Aiuta a **rilevare e rispondere alle minacce** offrendo analisi di sicurezza complete, **identificando configurazioni errate**, garantendo **conformit√†** agli standard di sicurezza e **integrandosi** con altri strumenti di sicurezza per la rilevazione e risposta automatiche alle minacce.

* **Panoramica**: Pannello per **visualizzare una panoramica** di tutti i risultati del Security Command Center.
* Minacce: \[Richiede Premium] Pannello per visualizzare tutte le **minacce rilevate. Scopri di pi√π sulle Minacce qui sotto**
* **Vulnerabilit√†**: Pannello per **visualizzare le configurazioni errate trovate nell'account GCP**.
* **Conformit√†**: \[Richiede Premium] Questa sezione consente di **testare il proprio ambiente GCP contro diversi controlli di conformit√†** (come PCI-DSS, NIST 800-53, benchmark CIS...) all'interno dell'organizzazione.
* **Asset**: Questa sezione **mostra tutti gli asset in uso**, molto utile per gli amministratori di sistema (e forse per gli attaccanti) per vedere cosa √® in esecuzione in una singola pagina.
* **Risultati**: Questo **aggrega** in una **tabella i risultati** delle diverse sezioni della Sicurezza GCP (non solo del Command Center) per poter visualizzare facilmente i risultati che contano.
* **Sorgenti**: Mostra un **riassunto dei risultati** di tutte le diverse sezioni della sicurezza GCP **per sezione**.
* **Postura**: \[Richiede Premium] La Postura di Sicurezza consente di **definire, valutare e monitorare la sicurezza dell'ambiente GCP**. Funziona creando una policy che definisce vincoli o restrizioni che controllano/monitorano le risorse in GCP. Ci sono diversi modelli di postura predefiniti che possono essere trovati su [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Minacce**

Dal punto di vista di un attaccante, questa √® probabilmente la **funzionalit√† pi√π interessante in quanto potrebbe rilevare l'attaccante**. Tuttavia, nota che questa funzionalit√† richiede **Premium** (il che significa che l'azienda dovr√† pagare di pi√π), quindi **potrebbe non essere nemmeno abilitata**.&#x20;

Ci sono 3 tipi di meccanismi di rilevamento delle minacce:

* **Minacce Evento**: Risultati prodotti abbinando eventi da **Cloud Logging** basati su **regole create** internamente da Google. Pu√≤ anche esaminare i **log di Google Workspace**.
* √à possibile trovare la descrizione di tutte le [**regole di rilevamento nella documentazione**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **Minacce Container**: Risultati prodotti dopo l'analisi del comportamento a basso livello del kernel dei container.
* **Minacce Personalizzate**: Regole create dall'azienda.

√à possibile trovare le risposte consigliate alle minacce rilevate di entrambi i tipi su [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)

### Enumerazione

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
{% endcode %}

### Post Esploitation

{% content-ref url="../gcp-post-exploitation/gcp-security-post-exploitation.md" %}
[gcp-security-post-exploitation.md](../gcp-post-exploitation/gcp-security-post-exploitation.md)
{% endcontent-ref %}

## Rilevamenti e Controlli

* **Chronicle SecOps**: Una suite avanzata di operazioni di sicurezza progettata per aiutare i team ad aumentare la velocit√† e l'impatto delle operazioni di sicurezza, inclusa la rilevazione delle minacce, l'indagine e la risposta.
* **reCAPTCHA Enterprise**: Un servizio che protegge i siti web da attivit√† fraudolente come lo scraping, il riempimento di credenziali e gli attacchi automatizzati distinguendo tra utenti umani e bot.
* **Web Security Scanner**: Strumento di scansione di sicurezza automatizzato che rileva vulnerabilit√† e problemi di sicurezza comuni nelle applicazioni web ospitate su Google Cloud o su un altro servizio web.
* **Risk Manager**: Uno strumento di governance, rischio e conformit√† (GRC) che aiuta le organizzazioni a valutare, documentare e comprendere la propria posizione di rischio su Google Cloud.
* **Binary Authorization**: Un controllo di sicurezza per i contenitori che garantisce che solo immagini di contenitori attendibili vengano distribuite su cluster di Kubernetes Engine secondo le politiche impostate dall'azienda.
* **Notifiche Consultive**: Un servizio che fornisce avvisi e consulenze su potenziali problemi di sicurezza, vulnerabilit√† e azioni consigliate per mantenere sicure le risorse.
* **Approvazione dell'Accesso**: Una funzionalit√† che consente alle organizzazioni di richiedere un'approvazione esplicita prima che i dipendenti di Google possano accedere ai loro dati o configurazioni, fornendo un ulteriore livello di controllo e tracciabilit√†.
* **Managed Microsoft AD**: Un servizio che offre Active Directory (AD) di Microsoft gestito che consente agli utenti di utilizzare le proprie app e carichi di lavoro dipendenti da Microsoft AD esistenti su Google Cloud.

## Protezione dei Dati

* **Protezione dei Dati Sensibili**: Strumenti e pratiche mirate a salvaguardare dati sensibili, come informazioni personali o propriet√† intellettuale, dall'accesso o dall'esposizione non autorizzati.
* **Prevenzione della Perdita di Dati (DLP)**: Un insieme di strumenti e processi utilizzati per identificare, monitorare e proteggere i dati in uso, in movimento e a riposo attraverso un'ispezione approfondita dei contenuti e l'applicazione di un insieme completo di regole di protezione dei dati.
* **Servizio di Autorit√† di Certificazione**: Un servizio scalabile e sicuro che semplifica e automatizza la gestione, la distribuzione e il rinnovo di certificati SSL/TLS per servizi interni ed esterni.
* **Gestione delle Chiavi**: Un servizio basato su cloud che consente di gestire chiavi crittografiche per le applicazioni, inclusa la creazione, l'importazione, la rotazione, l'uso e la distruzione delle chiavi di crittografia. Ulteriori informazioni in:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Gestore dei Certificati**: Un servizio che gestisce e distribuisce certificati SSL/TLS, garantendo connessioni sicure e criptate ai servizi web e alle applicazioni.
* **Gestore delle Chiavi Segrete**: Un sistema di archiviazione sicuro e conveniente per chiavi API, password, certificati e altri dati sensibili, che consente un accesso e una gestione facili e sicuri di questi segreti nelle applicazioni. Ulteriori informazioni in:

{% content-ref url="../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Una piattaforma di sicurezza a zero trust che consente l'accesso sicuro alle applicazioni interne senza la necessit√† di una VPN tradizionale, affidandosi alla verifica della fiducia dell'utente e del dispositivo prima di concedere l'accesso.
* **Risoluzione dei Problemi di Politica**: Uno strumento progettato per aiutare gli amministratori a comprendere e risolvere problemi di accesso nella propria organizzazione identificando perch√© un utente ha accesso a determinate risorse o perch√© √® stato negato l'accesso, contribuendo cos√¨ all'applicazione delle politiche di zero trust.
* **Proxy Basato sull'Identit√† (IAP)**: Un servizio che controlla l'accesso alle applicazioni cloud e alle VM in esecuzione su Google Cloud, in locale o su altri cloud, in base all'identit√† e al contesto della richiesta anzich√© dalla rete da cui proviene la richiesta.
* **Controlli dei Servizi VPC**: Perimetri di sicurezza che forniscono ulteriori livelli di protezione alle risorse e ai servizi ospitati nella Virtual Private Cloud (VPC) di Google Cloud, prevenendo l'esfiltrazione dei dati e fornendo un controllo granulare sull'accesso.
* **Gestore del Contesto di Accesso**: Parte di BeyondCorp Enterprise di Google Cloud, questo strumento aiuta a definire ed applicare politiche di controllo dell'accesso dettagliate basate sull'identit√† dell'utente e sul contesto della loro richiesta, come lo stato di sicurezza del dispositivo, l'indirizzo IP e altro ancora.
