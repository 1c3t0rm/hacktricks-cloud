# GCP - Cloud Functions Unauthenticated Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>!</strong></a> jImej</summary>

Ha'DIbaH HackTricks vItlhutlh:

* **tlhIngan Hol** **HackTricks** **advertised** **company** **want** **or** **HackTricks** **PDF** **download** **to'wI'** [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) **Check**!
* [**official PEASS & HackTricks swag**](https://peass.creator-spring.com) **Get**
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) **Discover**, [**NFTs**](https://opensea.io/collection/the-peass-family) **our collection** **exclusive**
* üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) **Join** **or** [**telegram group**](https://t.me/peass) **or** **follow** **me** **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Share** **your hacking tricks** **by submitting PRs** **to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) **and** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github repos.**

</details>

## Cloud Functions

Cloud Functions DaH ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghotpu' ghot
```bash
#!/bin/bash

############################
# Run this tool to find Cloud Functions that permit unauthenticated invocations
# anywhere in your GCP organization.
# Enjoy!
############################

for proj in $(gcloud projects list --format="get(projectId)"); do
echo "[*] scraping project $proj"

enabled=$(gcloud services list --project "$proj" | grep "Cloud Functions API")

if [ -z "$enabled" ]; then
continue
fi


for func_region in $(gcloud functions list --quiet --project "$proj" --format="value[separator=','](NAME,REGION)"); do
# drop substring from first occurence of "," to end of string.
func="${func_region%%,*}"
# drop substring from start of string up to last occurence of ","
region="${func_region##*,}"
ACL="$(gcloud functions get-iam-policy "$func" --project "$proj" --region "$region")"

all_users="$(echo "$ACL" | grep allUsers)"
all_auth="$(echo "$ACL" | grep allAuthenticatedUsers)"

if [ -z "$all_users" ]
then
:
else
echo "[!] Open to all users: $proj: $func"
fi

if [ -z "$all_auth" ]
then
:
else
echo "[!] Open to all authenticated users: $proj: $func"
fi
done
done
```
<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;github repos.

</details>
