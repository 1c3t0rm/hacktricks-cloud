# AWS - SQS Persistence

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## SQS

For more information check:

{% content-ref url="../aws-services/aws-sqs-and-sns-enum.md" %}
[aws-sqs-and-sns-enum.md](../aws-services/aws-sqs-and-sns-enum.md)
{% endcontent-ref %}

### Using resource policy

In SQS you need to indicate with an IAM policy **who has access to read and write**. It's possible to indicate external accounts, ARN of roles, or **even "\*"**.\
The following policy gives everyone in AWS access to everything in the queue called **MyTestQueue**:

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## SQS

For more information check:

{% content-ref url="../aws-services/aws-sqs-and-sns-enum.md" %}
[aws-sqs-and-sns-enum.md](../aws-services/aws-sqs-and-sns-enum.md)
{% endcontent-ref %}

### Using resource policy

In SQS you need to indicate with an IAM policy **who has access to read and write**. It's possible to indicate external accounts, ARN of roles, or **even "\*"**.\
The following policy gives everyone in AWS access to everything in the queue called **MyTestQueue**:
```json
{
"Version": "2008-10-17",
"Id": "__default_policy_ID",
"Statement": [
{
"Sid": "__owner_statement",
"Effect": "Allow",
"Principal": {
"AWS": "*"
},
"Action": [
"SQS:*"
],
"Resource": "arn:aws:sqs:us-east-1:123123123123:MyTestQueue"
}
]
}
```
{% hint style="info" %}
**Qapla'!** **Qa'vIn Lambda vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vItlhutlh** **'ej vIt
