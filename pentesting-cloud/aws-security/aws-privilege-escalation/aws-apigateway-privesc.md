# AWS - Apigateway Privesc

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Apigateway

For more information check:

{% content-ref url="../aws-services/aws-api-gateway-enum.md" %}
[aws-api-gateway-enum.md](../aws-services/aws-api-gateway-enum.md)
{% endcontent-ref %}

### `apigateway:POST`

With this permission you can generate API keys of the APIs configured (per region).
```bash
aws --region <region> apigateway create-api-key
```
**QaDrwI'**: QaHbe'ghachDaq 'ej vItlhutlhlaHbe'chugh, 'ach vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh vItlhutlhlaHbe'chugh
```bash
aws --region apigateway get-api-keys
aws --region <region> apigateway get-api-key --api-key <key> --include-value
```
**Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'!** Qapla'! **Qapla'
```bash
aws apigateway update-rest-api \
--rest-api-id api-id \
--patch-operations op=replace,path=/policy,value='"{\"jsonEscapedPolicyDocument\"}"'
```
{% endcode %}

**·ñá·ëå·ë≠·ëï·ïº·ó©·ëé·òî·ó¥ ·ë≠·ó©·ë≠·ó¥·ñá:** ·ëå·ëé·ó™·ó¥·ñá ·ëéO·ñá·ó∞·ó©·í™ ·ëïI·ñá·ëï·ëå·ó∞·îïT·ó©·ëé·ëï·ó¥·îï, ·ñá·ó¥·ë≠·ñá·ó¥·îï·ó¥·ëéTI·ëéG ·ó™I·ñá·ó¥·ëïT·í™Y I·îï ·ëéOT ·ë≠O·îï·îïI·ó∑·í™·ó¥ ·óØIT·ïº T·ïºI·îï T·ó¥·ëï·ïº·ëéI·ë´·ëå·ó¥ ·ó∑·ëåT YO·ëå ·ó∞IG·ïºT ·òú·ïÆT ·ó©·ëï·ëï·ïÆ·îï·îï TO ·îï·ïÆ·ëé·îïITI·êØ·ïÆ I·ëé·ñ¥O.

### `apigateway:PutIntegration`, `apigateway:CreateDeployment`, `iam:PassRole`

{% hint style="info" %}
·ëé·ó¥·ó¥·ó™ T·ó¥·îïTI·ëé·òú
{% endhint %}

·ó©·ëé ·ó©TT·ó©·ëïK·ó¥·ñá ·óØIT·ïº T·ïº·ó¥ ·ë≠·ó¥·ñá·ó∞I·îï·îïIO·ëé·îï `apigateway:PutIntegration`, `apigateway:CreateDeployment`, ·ó©·ëé·ó™ `iam:PassRole` ·ëï·ó©·ëé **·ó©·ó™·ó™ ·ó© ·ëé·ïÆ·óØ I·ëéT·ïÆG·ñá·ó©TIO·ëé TO ·ó©·ëé ·ó¥·ô≠I·îïTI·ëé·òú ·ó©·ë≠I ·òú·ó©T·ó¥·óØ·ó©Y ·ñá·ïÆ·îïT ·ó©·ë≠I ·óØIT·ïº ·ó© ·í™·ó©·ó∞·ó∑·ó© ·ñ¥·ëå·ëé·ëïTIO·ëé T·ïº·ó©T ·ïº·ó©·îï ·ó©·ëé I·ó©·ó∞ ·ñáO·í™·ó¥ ·ó©TT·ó©·ëï·ïº·ó¥·ó™**. T·ïº·ó¥ ·ó©TT·ó©·ëïK·ó¥·ñá ·ëï·ó©·ëé T·ïº·ó¥·ëé **T·ñáI·òú·òú·ó¥·ñá T·ïº·ó¥ ·í™·ó©·ó∞·ó∑·ó© ·ñ¥·ëå·ëé·ëïTIO·ëé TO ·ïÆ·ô≠·ó¥·ëï·ëåT·ó¥ ·ó©·ñá·ó∑IT·ñá·ó©·ñáY ·ëïO·ó™·ó¥ ·ó©·ëé·ó™ ·ë≠OT·ó¥·ëéTI·ó©·í™·í™Y ·òú·ó©I·ëé ·ó©·ëï·ëï·ïÆ·îï·îï TO T·ïº·ó¥ ·ñá·ïÆ·îïO·ëå·ñá·ëï·ïÆ·îï ·ó©·îï·îïO·ëïI·ó©T·ó¥·ó™ ·óØIT·ïº T·ïº·ó¥ I·ó©·ó∞ ·ñáO·í™·ó¥**.

{% code overflow="wrap" %}
```bash
API_ID="your-api-id"
RESOURCE_ID="your-resource-id"
HTTP_METHOD="GET"
LAMBDA_FUNCTION_ARN="arn:aws:lambda:region:account-id:function:function-name"
LAMBDA_ROLE_ARN="arn:aws:iam::account-id:role/lambda-role"

# Add a new integration to the API Gateway REST API
aws apigateway put-integration --rest-api-id $API_ID --resource-id $RESOURCE_ID --http-method $HTTP_METHOD --type AWS_PROXY --integration-http-method POST --uri arn:aws:apigateway:region:lambda:path/2015-03-31/functions/$LAMBDA_FUNCTION_ARN/invocations --credentials $LAMBDA_ROLE_ARN

# Create a deployment for the updated API Gateway REST API
aws apigateway create-deployment --rest-api-id $API_ID --stage-name Prod
```
{% endcode %}

**QaD Impact**: QaD vItlhutlh resources associated with the Lambda function's IAM role.

### `apigateway:UpdateAuthorizer`, `apigateway:CreateDeployment`

{% hint style="info" %}
QaD testing
{% endhint %}

An attacker with the permissions `apigateway:UpdateAuthorizer` and `apigateway:CreateDeployment` can **modify an existing API Gateway authorizer** to bypass security checks or to execute arbitrary code when API requests are made.

{% code overflow="wrap" %}
```bash
API_ID="your-api-id"
AUTHORIZER_ID="your-authorizer-id"
LAMBDA_FUNCTION_ARN="arn:aws:lambda:region:account-id:function:function-name"

# Update the API Gateway authorizer
aws apigateway update-authorizer --rest-api-id $API_ID --authorizer-id $AUTHORIZER_ID --authorizer-uri arn:aws:apigateway:region:lambda:path/2015-03-31/functions/$LAMBDA_FUNCTION_ARN/invocations

# Create a deployment for the updated API Gateway REST API
aws apigateway create-deployment --rest-api-id $API_ID --stage-name Prod
```
{% endcode %}

**Potential Impact**: Bypassing security checks, unauthorized access to API resources.

### `apigateway:UpdateVpcLink`

{% hint style="info" %}
Need testing
{% endhint %}

An attacker with the permission `apigateway:UpdateVpcLink` can **modify an existing VPC Link to point to a different Network Load Balancer, potentially redirecting private API traffic to unauthorized or malicious resources**.
```bash
bashCopy codeVPC_LINK_ID="your-vpc-link-id"
NEW_NLB_ARN="arn:aws:elasticloadbalancing:region:account-id:loadbalancer/net/new-load-balancer-name/50dc6c495c0c9188"

# Update the VPC Link
aws apigateway update-vpc-link --vpc-link-id $VPC_LINK_ID --patch-operations op=replace,path=/targetArns,value="[$NEW_NLB_ARN]"
```
**Qapla'**: QaD unauthorized access to private API resources, interception or disruption of API traffic.

<details>

<summary><strong>QaD AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
