# AWS - Nitro

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikitangazwa kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA USAJILI**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) ya kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## Taarifa Msingi

AWS Nitro ni mkusanyo wa **teknolojia za ubunifu** ambazo hufanya jukwaa la msingi kwa mifano ya AWS EC2. Iliyotolewa na Amazon kwa lengo la **kuimarisha usalama, utendaji, na uaminifu**, Nitro inatumia vipengele vya **vifaa vya kipekee na hypervisor nyepesi**. Inaficha sehemu kubwa ya utendaji wa kawaida wa upekee kwa vifaa na programu maalum, **kupunguza eneo la shambulio** na kuboresha ufanisi wa rasilimali. Kwa kuchukua majukumu ya utengenezaji wa upekee, Nitro inaruhusu mifano ya EC2 kutoa **utendaji karibu na chuma halisi**, ikifanya iwe hasa faida kwa programu zenye mahitaji makubwa ya rasilimali. Aidha, Chip ya Usalama ya Nitro inahakikisha **usalama wa vifaa na firmware**, ikaimarisha muundo wake imara zaidi.

### Mabweni ya Nitro

**AWS Nitro Enclaves** hutoa mazingira salama, **yaliyojitosheleza ndani ya mifano ya Amazon EC2**, iliyoundwa kwa usindikaji wa data nyeti sana. Kwa kutumia Mfumo wa AWS Nitro, mabweni haya yanahakikisha **uhuishaji na usalama imara**, yanayofaa kwa **kushughulikia habari za siri** kama PII au rekodi za kifedha. Yanajumuisha mazingira ya minimalist, kupunguza hatari kubwa ya kufichua data. Aidha, Mabweni ya Nitro yanaiunga mkono uthibitisho wa kriptografia, kuruhusu watumiaji kuhakiki kuwa kanuni iliyoruhusiwa tu inaendeshwa, muhimu kwa kudumisha viwango vikali vya uthibitisho na ulinzi wa data.

{% hint style="danger" %}
Picha za Mabweni ya Nitro zinaendeshwa **ndani ya mifano ya EC2** na huwezi kuona kutoka kwenye kiolesura cha wavuti cha AWS ikiwa mifano ya EC2 inaendesha picha katika Mabweni ya Nitro au la.
{% endhint %}

### Usanidi wa CLI wa Mabweni ya Nitro

Fuata maagizo yote [**kutoka kwenye nyaraka**](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/1-my-first-enclave/1-1-nitro-enclaves-cli#run-connect-and-terminate-the-enclave). Hata hivyo, haya ndiyo muhimu zaidi:
```bash
# Install tools
sudo amazon-linux-extras install aws-nitro-enclaves-cli -y
sudo yum install aws-nitro-enclaves-cli-devel -y

# Config perms
sudo usermod -aG ne $USER
sudo usermod -aG docker $USER

# Check installation
nitro-cli --version

# Start and enable the Nitro Enclaves allocator service.
sudo systemctl start nitro-enclaves-allocator.service && sudo systemctl enable nitro-enclaves-allocator.service
```
### Picha za Nitro Enclave

Picha ambazo unaweza kuendesha kwenye Nitro Enclave zinategemea picha za docker, hivyo unaweza kuunda picha zako za Nitro Enclave kutoka kwenye picha za docker kama:
```bash
# You need to have the docker image accesible in your running local registry
# Or indicate the full docker image URL to access the image
nitro-cli build-enclave --docker-uri <docker-img>:<tag> --output-file nitro-img.eif
```
Kama unavyoona picha za Nitro Enclave hutumia kifaa cha **`eif`** (Faili la Picha ya Enclave).

Matokeo yatafanana na:
```
Using the locally available Docker image...
Enclave Image successfully created.
{
"Measurements": {
"HashAlgorithm": "Sha384 { ... }",
"PCR0": "e199261541a944a93129a52a8909d29435dd89e31299b59c371158fc9ab3017d9c450b0a580a487e330b4ac691943284",
"PCR1": "bcdf05fefccaa8e55bf2c8d6dee9e79bbff31e34bf28a99aa19e6b29c37ee80b214a414b7607236edf26fcb78654e63f",
"PCR2": "2e1fca1dbb84622ec141557dfa971b4f8ea2127031b264136a20278c43d1bba6c75fea286cd4de9f00450b6a8db0e6d3"
}
}
```
Kulingana na [**hati ya maelezo**](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/1-my-first-enclave/1-1-nitro-enclaves-cli#run-connect-and-terminate-the-enclave), ili kuendesha picha ya enklevu unahitaji kuiwezesha kumbukumbu ya angalau mara 4 ya faili la **`eif`** linachukua kwenye diski.
