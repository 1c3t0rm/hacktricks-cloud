# AWS - Nitro

<details>

<summary><strong>Sıfırdan kahraman olacak şekilde AWS hacklemeyi öğrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Kırmızı Takım Uzmanı)</strong></a><strong>!</strong></summary>

HackTricks'ı desteklemenin diğer yolları:

* **Şirketinizi HackTricks'te reklamını görmek istiyorsanız** veya **HackTricks'i PDF olarak indirmek istiyorsanız** [**ABONELİK PLANLARI**]'na(https://github.com/sponsors/carlospolop) göz atın!
* [**Resmi PEASS & HackTricks ürünlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keşfedin, özel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katılın** veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin**.
* **Hacking püf noktalarınızı paylaşarak PR'lar göndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarına katkıda bulunun.

</details>

## Temel Bilgiler

AWS Nitro, AWS EC2 örnekleri için temel platform oluşturan **yenilikçi teknolojiler** paketidir. Amazon tarafından tanıtılan Nitro, özel **donanım bileşenleri ve hafif bir hipervizör** kullanan, güvenliği, performansı ve güvenilirliği artırmayı amaçlayan bir platformdur. Geleneksel sanallaştırma işlevlerinin çoğunu ayrılmış donanım ve yazılıma soyutlar, **saldırı yüzeyini en aza indirir** ve kaynak verimliliğini artırır. Sanallaştırma işlevlerini dışarıya aktararak, Nitro, EC2 örneklerinin **neredeyse bare-metal performansı** sunmasına olanak tanır, bu da kaynak yoğun uygulamalar için özellikle faydalıdır. Ayrıca, Nitro Güvenlik Çipi özellikle **donanım ve yazılımın güvenliğini** sağlar, sağlam mimarisini daha da pekiştirir.

### Nitro Enklavları

**AWS Nitro Enklavları**, Amazon EC2 örnekleri içinde **izole bir hesaplama ortamı** sağlar ve özellikle son derece hassas verilerin işlenmesi için tasarlanmıştır. AWS Nitro Sistemi'nden yararlanan bu enklavlar, sağlam **izolasyon ve güvenlik** sağlar, PII veya finansal kayıtlar gibi **gizli bilgilerin işlenmesi** için idealdir. Veri maruziyet riskini önemli ölçüde azaltan minimalist bir ortam sunar. Ayrıca, Nitro Enklavları, yalnızca yetkili kodların çalıştığını doğrulamaya olanak tanıyan kriptografik belgeleme desteği sağlar, bu da sıkı uyumluluk ve veri koruma standartlarının korunması için hayati önem taşır.

{% hint style="danger" %}
Nitro Enklav görüntüleri **EC2 örneklerinin içinden çalıştırılır** ve bir EC2 örneğinin Nitro Enklav görüntüleri çalıştırıp çalıştırmadığını AWS web konsolundan göremezsiniz.
{% endhint %}

### Nitro Enklav CLI kurulumu

Tüm talimatları [**belgelerden**](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/1-my-first-enclave/1-1-nitro-enclaves-cli#run-connect-and-terminate-the-enclave) takip edin. Bunlar en önemli olanlardır:
```bash
# Install tools
sudo amazon-linux-extras install aws-nitro-enclaves-cli -y
sudo yum install aws-nitro-enclaves-cli-devel -y

# Config perms
sudo usermod -aG ne $USER
sudo usermod -aG docker $USER

# Check installation
nitro-cli --version

# Start and enable the Nitro Enclaves allocator service.
sudo systemctl start nitro-enclaves-allocator.service && sudo systemctl enable nitro-enclaves-allocator.service
```
### Nitro Enclave Görüntüleri

Nitro Enclave'de çalıştırabileceğiniz görüntüler, docker görüntülerine dayanmaktadır, bu nedenle Nitro Enclave görüntülerinizi şu şekilde oluşturabilirsiniz:
```bash
# You need to have the docker image accesible in your running local registry
# Or indicate the full docker image URL to access the image
nitro-cli build-enclave --docker-uri <docker-img>:<tag> --output-file nitro-img.eif
```
Nitro Enclave görüntülerinin uzantısı **`eif`** (Enclave Image File) olarak kullanılır.

Çıktı aşağıdaki gibi görünecektir:
```
Using the locally available Docker image...
Enclave Image successfully created.
{
"Measurements": {
"HashAlgorithm": "Sha384 { ... }",
"PCR0": "e199261541a944a93129a52a8909d29435dd89e31299b59c371158fc9ab3017d9c450b0a580a487e330b4ac691943284",
"PCR1": "bcdf05fefccaa8e55bf2c8d6dee9e79bbff31e34bf28a99aa19e6b29c37ee80b214a414b7607236edf26fcb78654e63f",
"PCR2": "2e1fca1dbb84622ec141557dfa971b4f8ea2127031b264136a20278c43d1bba6c75fea286cd4de9f00450b6a8db0e6d3"
}
}
```
[**Belgeler**](https://catalog.us-east-1.prod.workshops.aws/event/dashboard/en-US/workshop/1-my-first-enclave/1-1-nitro-enclaves-cli#run-connect-and-terminate-the-enclave)na göre, bir kalesi görüntüsünü çalıştırmak için, ona en az 4 katı **`eif`** dosyasının diske aldığı belleği atamanız gerekmektedir.
