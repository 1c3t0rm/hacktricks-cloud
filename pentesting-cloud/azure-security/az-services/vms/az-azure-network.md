# Az - Azure Network

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Azure pruÅ¾a **virtuelne mreÅ¾e (VNet)** koje omoguÄ‡avaju korisnicima da kreiraju **izolovane** **mreÅ¾e** unutar Azure oblaka. Unutar ovih VNeta, resursi kao Å¡to su virtuelne maÅ¡ine, aplikacije, baze podataka... mogu biti sigurno hostovani i upravljani. MreÅ¾no povezivanje u Azure podrÅ¾ava kako komunikaciju unutar oblaka (izmeÄ‘u Azure usluga), tako i povezivanje sa spoljnim mreÅ¾ama i internetom.\
Pored toga, moguÄ‡e je **povezati** VNete sa drugim VNetima i sa lokalnim mreÅ¾ama.

## Virtual Network (VNET) & Subnets

Azure Virtuelna MreÅ¾a (VNet) je reprezentacija vaÅ¡e vlastite mreÅ¾e u oblaku, pruÅ¾ajuÄ‡i **logiÄku izolaciju** unutar Azure okruÅ¾enja posveÄ‡enog vaÅ¡oj pretplati. VNete vam omoguÄ‡avaju da obezbedite i upravljate virtuelnim privatnim mreÅ¾ama (VPN) u Azure, hostujuÄ‡i resurse kao Å¡to su Virtuelne MaÅ¡ine (VM), baze podataka i usluge aplikacija. One nude **potpunu kontrolu nad mreÅ¾nim podeÅ¡avanjima**, ukljuÄujuÄ‡i opsege IP adresa, kreiranje podmreÅ¾a, tabele ruta i mreÅ¾ne prolaze.

**PodmreÅ¾e** su pododeli unutar VNet-a, definisane specifiÄnim **opsegom IP adresa**. Segmentacijom VNet-a u viÅ¡e podmreÅ¾a, moÅ¾ete organizovati i osigurati resurse prema vaÅ¡oj mreÅ¾noj arhitekturi.\
Po defaultu, sve podmreÅ¾e unutar iste Azure Virtuelne MreÅ¾e (VNet) **mogu komunicirati jedna s drugom** bez ikakvih ograniÄenja.

**Primer:**

* `MyVNet` sa opsegom IP adresa 10.0.0.0/16.
* **PodmreÅ¾a-1:** 10.0.0.0/24 za web servere.
* **PodmreÅ¾a-2:** 10.0.1.0/24 za servere baza podataka.

### Enumeration

Da biste naveli sve VNete i podmreÅ¾e u Azure nalogu, moÅ¾ete koristiti Azure Command-Line Interface (CLI). Evo koraka:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}"

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## Grupa za bezbednost mreÅ¾e (NSG)

**Grupa za bezbednost mreÅ¾e (NSG)** filtrira mreÅ¾ni saobraÄ‡aj kako prema tako i od Azure resursa unutar Azure Virtuelne MreÅ¾e (VNet). SadrÅ¾i skup **pravila bezbednosti** koja mogu da odrede **koje portove otvoriti za dolazni i odlazni saobraÄ‡aj** prema izvoru porta, izvornoj IP adresi, odrediÅ¡nom portu i moguÄ‡e je dodeliti prioritet (manji broj prioriteta, veÄ‡i prioritet).

NSG-ovi se mogu povezati sa **podmreÅ¾ama i NIC-ovima.**

**Primer pravila:**

* Pravilo za dolazni saobraÄ‡aj koje dozvoljava HTTP saobraÄ‡aj (port 80) iz bilo kog izvora ka vaÅ¡im web serverima.
* Pravilo za odlazni saobraÄ‡aj koje dozvoljava samo SQL saobraÄ‡aj (port 1433) ka odreÄ‘enom opsegu odrediÅ¡nih IP adresa.

### Enumeracija

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table
az network nsg show --name <nsg-name>

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table

# Get NICs and subnets using this NSG
az network nsg show --name MyLowCostVM-nsg --resource-group Resource_Group_1 --query "{subnets: subnets, networkInterfaces: networkInterfaces}"
```
{% endcode %}

## Azure Firewall

Azure Firewall je **upravljana mreÅ¾na bezbednosna usluga** u Azure-u koja Å¡titi cloud resurse inspekcijom i kontrolom saobraÄ‡aja. To je **stanje svesti vatrozid** koji filtrira saobraÄ‡aj na osnovu pravila za slojeve 3 do 7, podrÅ¾avajuÄ‡i komunikaciju kako **unutar Azure-a** (isto-zapadni saobraÄ‡aj) tako i **ka/od spoljaÅ¡njih mreÅ¾a** (sever-jug saobraÄ‡aj). Postavljen na **nivou Virtuelne MreÅ¾e (VNet)**, pruÅ¾a centralizovanu zaÅ¡titu za sve podmreÅ¾e u VNet-u. Azure Firewall automatski skalira kako bi zadovoljio zahteve saobraÄ‡aja i osigurava visoku dostupnost bez potrebe za ruÄnom konfiguracijom.

Dostupan je u tri SKU-aâ€”**Osnovni**, **Standardni** i **Premium**, svaki prilagoÄ‘en specifiÄnim potrebama kupaca:

| **PreporuÄeni sluÄaj upotrebe** | Mala/Srednja preduzeÄ‡a (SMB) sa ograniÄenim potrebama | OpÅ¡ta preduzeÄ‡a, filtriranje slojeva 3â€“7 | Veoma osetljiva okruÅ¾enja (npr. obrada plaÄ‡anja)  |
| ------------------------------- | ----------------------------------------------------- | ---------------------------------------- | ------------------------------------------------- |
| **Performanse**                | Do 250 Mbps propusnosti                               | Do 30 Gbps propusnosti                  | Do 100 Gbps propusnosti                           |
| **ObaveÅ¡tavanje o pretnjama**  | Samo upozorenja                                      | Upozorenja i blokiranje (maliciozni IP-ovi/domeni) | Upozorenja i blokiranje (napredna obaveÅ¡tajna inteligencija) |
| **Filtriranje L3â€“L7**          | Osnovno filtriranje                                   | Filtriranje sa stanjem svesti preko protokola | Filtriranje sa stanjem svesti uz naprednu inspekciju |
| **Napredna zaÅ¡tita od pretnji** | Nije dostupna                                       | Filtriranje zasnovano na obaveÅ¡tajnoj inteligenciji | UkljuÄuje sistem za otkrivanje i prevenciju upada (IDPS) |
| **TLS inspekcija**             | Nije dostupna                                       | Nije dostupna                            | PodrÅ¾ava ulaznu/izlaznu TLS terminaciju           |
| **Dostupnost**                 | Fiksni backend (2 VM-a)                             | Automatsko skaliranje                    | Automatsko skaliranje                              |
| **Jednostavnost upravljanja**  | Osnovne kontrole                                    | Upravljano putem Firewall Manager-a      | Upravljano putem Firewall Manager-a                |

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## Azure Tabele Rute

Azure **Tabele Rute** se koriste za kontrolu usmeravanja mreÅ¾nog saobraÄ‡aja unutar podmreÅ¾e. One definiÅ¡u pravila koja specificiraju kako paketi treba da se proslede, bilo ka Azure resursima, internetu, ili specifiÄnom sledeÄ‡em skoku kao Å¡to su Virtuelni Aparati ili Azure Firewall. MoÅ¾ete povezati tabelu rute sa **podmreÅ¾om**, i svi resursi unutar te podmreÅ¾e Ä‡e pratiti rute u tabeli.

**Primer:** Ako podmreÅ¾a hostuje resurse koji treba da usmere izlazni saobraÄ‡aj kroz MreÅ¾ni Virtuelni Aparat (NVA) na inspekciju, moÅ¾ete kreirati **rutu** u tabeli rute da preusmerite sav saobraÄ‡aj (npr., `0.0.0.0/0`) na privatnu IP adresu NVA kao sledeÄ‡i skok.

### **Enumeracija**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List routes for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Private Link

Azure Private Link je usluga u Azure-u koja **omoguÄ‡ava privatni pristup Azure uslugama** osiguravajuÄ‡i da **saobraÄ‡aj izmeÄ‘u vaÅ¡e Azure virtuelne mreÅ¾e (VNet) i usluge putuje potpuno unutar Microsoftove Azure backbone mreÅ¾e**. Efikasno dovodi uslugu u vaÅ¡u VNet. Ova postavka poboljÅ¡ava bezbednost ne izlaÅ¾uÄ‡i podatke javnom internetu.

Private Link se moÅ¾e koristiti sa raznim Azure uslugama, kao Å¡to su Azure Storage, Azure SQL Database i prilagoÄ‘ene usluge deljene putem Private Link-a. PruÅ¾a siguran naÄin za koriÅ¡Ä‡enje usluga iz vaÅ¡e vlastite VNet ili Äak iz razliÄitih Azure pretplata.

{% hint style="danger" %}
NSG-ovi se ne primenjuju na privatne krajnje taÄke, Å¡to jasno znaÄi da povezivanje NSG-a sa podmreÅ¾om koja sadrÅ¾i Private Link neÄ‡e imati efekta.
{% endhint %}

**Primer:**

Razmotrite scenario u kojem imate **Azure SQL Database koju Å¾elite da pristupite sigurno iz vaÅ¡e VNet**. ObiÄno bi to moglo ukljuÄivati prolazak kroz javni internet. Sa Private Link-om, moÅ¾ete kreirati **privatnu krajnju taÄku u vaÅ¡oj VNet** koja se direktno povezuje sa Azure SQL Database uslugom. Ova krajnja taÄka Äini da baza podataka izgleda kao da je deo vaÅ¡e vlastite VNet, dostupna putem privatne IP adrese, Äime se osigurava siguran i privatni pristup.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Private Link Services
az network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure Service Endpoints

Azure Service Endpoints proÅ¡iruju privatni adresni prostor vaÅ¡e virtuelne mreÅ¾e i identitet vaÅ¡e VNet na Azure usluge preko direktne veze. OmoguÄ‡avanjem servisnih krajnjih taÄaka, **resursi u vaÅ¡oj VNet mogu sigurno da se poveÅ¾u sa Azure uslugama**, kao Å¡to su Azure Storage i Azure SQL Database, koristeÄ‡i Azure-ovu osnovnu mreÅ¾u. Ovo osigurava da **saobraÄ‡aj iz VNet-a ka Azure usluzi ostaje unutar Azure mreÅ¾e**, pruÅ¾ajuÄ‡i sigurniji i pouzdaniji put.

**Primer:**

Na primer, **Azure Storage** nalog je po defaultu dostupan preko javnog interneta. OmoguÄ‡avanjem **servisne krajnje taÄke za Azure Storage unutar vaÅ¡e VNet**, moÅ¾ete osigurati da samo saobraÄ‡aj iz vaÅ¡e VNet moÅ¾e pristupiti nalogu za skladiÅ¡tenje. Zatim se vatrozid naloga za skladiÅ¡tenje moÅ¾e konfigurisati da prihvata saobraÄ‡aj samo iz vaÅ¡e VNet.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Razlike izmeÄ‘u Servisnih Krajnih TaÄaka i Privatnih Linkova

Microsoft preporuÄuje koriÅ¡Ä‡enje Privatnih Linkova u [**docs**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints):

<figure><img src="../../../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

**Servisne Krajne TaÄke:**

* SaobraÄ‡aj iz vaÅ¡eg VNet-a ka Azure servisu putuje preko Microsoft Azure backbone mreÅ¾e, zaobilazeÄ‡i javni internet.
* Krajna taÄka je direktna veza sa Azure servisom i ne obezbeÄ‘uje privatnu IP adresu za servis unutar VNet-a.
* Sam servis je i dalje dostupan putem svoje javne krajine taÄke sa spoljaÅ¡nje strane vaÅ¡eg VNet-a, osim ako ne konfiguriÅ¡ete vatrozid servisa da blokira takav saobraÄ‡aj.
* To je odnos jedan na jedan izmeÄ‘u podmreÅ¾e i Azure servisa.
* Jeftinije je od Privatnih Linkova.

**Privatni Linkovi:**

* Privatni Link mapira Azure servise u vaÅ¡ VNet putem privatne krajine taÄke, koja je mreÅ¾ni interfejs sa privatnom IP adresom unutar vaÅ¡eg VNet-a.
* Azure servis se pristupa koristeÄ‡i ovu privatnu IP adresu, ÄineÄ‡i ga delom vaÅ¡e mreÅ¾e.
* Servisi povezani putem Privatnog Linka mogu se pristupiti samo iz vaÅ¡eg VNet-a ili povezanih mreÅ¾a; nema pristupa javnom internetu za servis.
* OmoguÄ‡ava sigurnu vezu sa Azure servisima ili vaÅ¡im sopstvenim servisima hostovanim u Azure-u, kao i vezu sa servisima koje dele drugi.
* PruÅ¾a detaljniju kontrolu pristupa putem privatne krajine taÄke u vaÅ¡em VNet-u, za razliku od Å¡ire kontrole pristupa na nivou podmreÅ¾e sa servisnim krajim taÄkama.

Ukratko, dok i Servisne Krajne TaÄke i Privatni Linkovi pruÅ¾aju sigurnu povezanost sa Azure servisima, **Privatni Linkovi nude viÅ¡i nivo izolacije i sigurnosti osiguravajuÄ‡i da se servisi pristupaju privatno bez izlaganja javnom internetu**. Servisne Krajne TaÄke, s druge strane, lakÅ¡e se postavljaju za opÅ¡te sluÄajeve gde je potrebna jednostavna, sigurna povezanost sa Azure servisima bez potrebe za privatnom IP adresom u VNet-u.

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door** je skalabilna i sigurna ulazna taÄka za **brzu isporuku** vaÅ¡ih globalnih web aplikacija. **Kombinuje** razliÄite usluge kao Å¡to su globalno **optereÄ‡enje balansiranje, ubrzanje sajta, SSL offloading i Web Application Firewall (WAF)** moguÄ‡nosti u jedinstvenu uslugu. Azure Front Door pruÅ¾a inteligentno usmeravanje na osnovu **najbliÅ¾e ivice lokacije korisniku**, osiguravajuÄ‡i optimalne performanse i pouzdanost. Pored toga, nudi usmeravanje zasnovano na URL-u, viÅ¡esajtno hostovanje, afinitet sesije i sigurnost na aplikacionom nivou.

**Azure Front Door WAF** je dizajniran da **Å¡titi web aplikacije od napada zasnovanih na web-u** bez modifikacije pozadinskog koda. UkljuÄuje prilagoÄ‘ena pravila i upravljane skupove pravila za zaÅ¡titu od pretnji kao Å¡to su SQL injekcija, cross-site scripting i drugih uobiÄajenih napada.

**Primer:**

Zamislite da imate globalno distribuiranu aplikaciju sa korisnicima Å¡irom sveta. MoÅ¾ete koristiti Azure Front Door da **usmerite zahteve korisnika ka najbliÅ¾em regionalnom data centru** koji hostuje vaÅ¡u aplikaciju, Äime se smanjuje latencija, poboljÅ¡ava korisniÄko iskustvo i **brani je od web napada sa WAF moguÄ‡nostima**. Ako odreÄ‘ena regija doÅ¾ivi prekid rada, Azure Front Door moÅ¾e automatski preusmeriti saobraÄ‡aj na sledeÄ‡u najbolju lokaciju, osiguravajuÄ‡i visoku dostupnost.

### Enumeracija

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Application Gateway i Azure Application Gateway WAF

Azure Application Gateway je **balansir optereÄ‡enja web saobraÄ‡aja** koji vam omoguÄ‡ava da upravljate saobraÄ‡ajem ka vaÅ¡im **web** aplikacijama. PruÅ¾a **balansiranje optereÄ‡enja na Layer 7, SSL terminaciju i moguÄ‡nosti vatrozida za web aplikacije (WAF)** u okviru usluge Application Delivery Controller (ADC). KljuÄne karakteristike ukljuÄuju usmeravanje zasnovano na URL-u, afinitet sesije zasnovan na kolaÄiÄ‡ima i preuzimanje sigurnih soketa (SSL), Å¡to je kljuÄno za aplikacije koje zahtevaju sloÅ¾ene moguÄ‡nosti balansiranja optereÄ‡enja kao Å¡to su globalno usmeravanje i usmeravanje zasnovano na putanji.

**Primer:**

Razmotrite scenario u kojem imate e-trgovinsku veb stranicu koja ukljuÄuje viÅ¡e poddomena za razliÄite funkcije, kao Å¡to su korisniÄki nalozi i obrada plaÄ‡anja. Azure Application Gateway moÅ¾e **usmeriti saobraÄ‡aj ka odgovarajuÄ‡im web serverima na osnovu URL putanje**. Na primer, saobraÄ‡aj ka `example.com/accounts` mogao bi biti usmeren ka servisu za korisniÄke naloge, a saobraÄ‡aj ka `example.com/pay` mogao bi biti usmeren ka servisu za obradu plaÄ‡anja.\
I **zaÅ¡titite vaÅ¡u veb stranicu od napada koristeÄ‡i WAF moguÄ‡nosti.**

### **Enumeracija**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke & VNet Peering

**VNet Peering** je mreÅ¾na funkcija u Azure koja **omoguÄ‡ava razliÄitim Virtuelnim MreÅ¾ama (VNets) da budu direktno i neprimetno povezane**. Kroz VNet peering, resursi u jednoj VNet mogu komunicirati sa resursima u drugoj VNet koristeÄ‡i privatne IP adrese, **kao da su u istoj mreÅ¾i**.\
**VNet Peering se takoÄ‘e moÅ¾e koristiti sa lokalnim mreÅ¾ama** postavljanjem site-to-site VPN-a ili Azure ExpressRoute.

**Azure Hub i Spoke** je mreÅ¾na topologija koja se koristi u Azure za upravljanje i organizovanje mreÅ¾nog saobraÄ‡aja. **"Hub" je centralna taÄka koja kontroliÅ¡e i usmerava saobraÄ‡aj izmeÄ‘u razliÄitih "spokova"**. Hub obiÄno sadrÅ¾i deljene usluge kao Å¡to su mreÅ¾ni virtuelni ureÄ‘aji (NVAs), Azure VPN Gateway, Azure Firewall ili Azure Bastion. **"Spokovi" su VNets koji hostuju radne optereÄ‡enja i povezuju se sa hub-om koristeÄ‡i VNet peering**, omoguÄ‡avajuÄ‡i im da koriste deljene usluge unutar huba. Ovaj model promoviÅ¡e Äist raspored mreÅ¾e, smanjujuÄ‡i sloÅ¾enost centralizovanjem zajedniÄkih usluga koje viÅ¡e radnih optereÄ‡enja iz razliÄitih VNets mogu koristiti.

{% hint style="danger" %}
**VNET povezivanje nije tranzitivno u Azure**, Å¡to znaÄi da ako je spok 1 povezan sa spokom 2, a spok 2 je povezan sa spokom 3, tada spok 1 ne moÅ¾e direktno komunicirati sa spokom 3.
{% endhint %}

**Primer:**

Zamislite kompaniju sa odvojenim odeljenjima kao Å¡to su Prodaja, Ljudski resursi i Razvoj, **svako sa svojom VNet (spokovi)**. Ove VNets **zahtevaju pristup deljenim resursima** kao Å¡to su centralna baza podataka, vatrozid i internet prolaz, koji se svi nalaze u **drugoj VNet (hub)**. KoriÅ¡Ä‡enjem modela Hub i Spoke, svako odeljenje moÅ¾e **sigurno da se poveÅ¾e sa deljenim resursima kroz hub VNet bez izlaganja tih resursa javnom internetu** ili kreiranja sloÅ¾ene mreÅ¾ne strukture sa brojnim vezama.

### Enumeration

{% code overflow="wrap" %}
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## Site-to-Site VPN

Site-to-Site VPN u Azure-u vam omoguÄ‡ava da **poveÅ¾ete svoju lokalnu mreÅ¾u sa vaÅ¡om Azure Virtual Network (VNet)**, omoguÄ‡avajuÄ‡i resursima kao Å¡to su VM-ovi unutar Azure-a da izgledaju kao da su na vaÅ¡oj lokalnoj mreÅ¾i. Ova veza se uspostavlja putem **VPN gateway-a koji enkriptuje saobraÄ‡aj** izmeÄ‘u dve mreÅ¾e.

**Primer:**

Firma Äija se glavna kancelarija nalazi u Njujorku ima lokalni data centar koji treba da se sigurno poveÅ¾e sa svojom VNet u Azure-u, koja hostuje njene virtualizovane radne optereÄ‡enja. Postavljanjem **Site-to-Site VPN-a, kompanija moÅ¾e osigurati enkriptovanu povezanost izmeÄ‘u lokalnih servera i Azure VM-ova**, omoguÄ‡avajuÄ‡i da se resursi sigurno pristupaju u oba okruÅ¾enja kao da su u istoj lokalnoj mreÅ¾i.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
{% endcode %}

## Azure ExpressRoute

Azure ExpressRoute je usluga koja pruÅ¾a **privatnu, posveÄ‡enu, visok brzu vezu izmeÄ‘u vaÅ¡e lokalne infrastrukture i Azure data centara**. Ova veza se uspostavlja putem provajdera povezivanja, zaobilazeÄ‡i javni internet i nudeÄ‡i veÄ‡u pouzdanost, brÅ¾e brzine, niÅ¾e latencije i veÄ‡u sigurnost od tipiÄnih internet veza.

**Primer:**

Multinacionalna korporacija zahteva **doslednu i pouzdanu vezu sa svojim Azure uslugama zbog velikog obima podataka** i potrebe za visokim protokom. Kompanija se odluÄuje za Azure ExpressRoute kako bi direktno povezala svoj lokalni data centar sa Azure-om, olakÅ¡avajuÄ‡i velike transfere podataka, kao Å¡to su dnevne rezervne kopije i analitika podataka u realnom vremenu, uz poboljÅ¡anu privatnost i brzinu.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

{% hint style="success" %}
UÄite i veÅ¾bajte AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
UÄite i veÅ¾bajte GCP Hacking: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>PodrÅ¾ite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
