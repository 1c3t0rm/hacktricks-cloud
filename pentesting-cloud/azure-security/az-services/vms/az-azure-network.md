# Az - Azure Network

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

Azure, kullanÄ±cÄ±larÄ±n Azure bulutunda **izole** **aÄŸlar** oluÅŸturmasÄ±na olanak tanÄ±yan **sanaldan aÄŸlar (VNet)** saÄŸlar. Bu VNets iÃ§inde, sanal makineler, uygulamalar, veritabanlarÄ± gibi kaynaklar gÃ¼venli bir ÅŸekilde barÄ±ndÄ±rÄ±labilir ve yÃ¶netilebilir. Azure'daki aÄŸ iletiÅŸimi, hem bulut iÃ§indeki (Azure hizmetleri arasÄ±nda) iletiÅŸimi hem de dÄ±ÅŸ aÄŸlar ve internetle baÄŸlantÄ±yÄ± destekler.\
AyrÄ±ca, VNets'in diÄŸer VNets ve yerel aÄŸlarla **baÄŸlanmasÄ±** mÃ¼mkÃ¼ndÃ¼r.

## Virtual Network (VNET) & Subnets

Azure Sanal AÄŸÄ± (VNet), bulutta kendi aÄŸÄ±nÄ±zÄ±n bir temsilidir ve aboneliÄŸinize ayrÄ±lmÄ±ÅŸ Azure ortamÄ±nda **mantÄ±ksal izolasyon** saÄŸlar. VNets, Azure'da sanal Ã¶zel aÄŸlar (VPN'ler) oluÅŸturmanÄ±za ve yÃ¶netmenize olanak tanÄ±r ve Sanal Makineler (VM'ler), veritabanlarÄ± ve uygulama hizmetleri gibi kaynaklarÄ± barÄ±ndÄ±rÄ±r. **AÄŸ ayarlarÄ± Ã¼zerinde tam kontrol** sunar; IP adresi aralÄ±klarÄ±, alt aÄŸ oluÅŸturma, yÃ¶nlendirme tablolarÄ± ve aÄŸ geÃ§itleri dahil.

**Alt aÄŸlar**, belirli **IP adresi aralÄ±klarÄ±** ile tanÄ±mlanan bir VNet iÃ§indeki alt bÃ¶lÃ¼mlerdir. Bir VNet'i birden fazla alt aÄŸa bÃ¶lerek, kaynaklarÄ± aÄŸ mimarinize gÃ¶re organize edebilir ve gÃ¼vence altÄ±na alabilirsiniz.\
VarsayÄ±lan olarak, aynÄ± Azure Sanal AÄŸÄ± (VNet) iÃ§indeki tÃ¼m alt aÄŸlar **birbirleriyle iletiÅŸim kurabilir** ve herhangi bir kÄ±sÄ±tlama yoktur.

**Ã–rnek:**

* `MyVNet` IP adresi aralÄ±ÄŸÄ± 10.0.0.0/16.
* **Alt AÄŸ-1:** 10.0.0.0/24 web sunucularÄ± iÃ§in.
* **Alt AÄŸ-2:** 10.0.1.0/24 veritabanÄ± sunucularÄ± iÃ§in.

### Enumeration

Azure hesabÄ±ndaki tÃ¼m VNets ve alt aÄŸlarÄ± listelemek iÃ§in Azure Komut SatÄ±rÄ± ArayÃ¼zÃ¼ (CLI) kullanabilirsiniz. Ä°ÅŸte adÄ±mlar: 

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}"

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## AÄŸ GÃ¼venlik GruplarÄ± (NSG)

Bir **AÄŸ GÃ¼venlik Grubu (NSG)**, Azure Sanal AÄŸÄ± (VNet) iÃ§indeki Azure kaynaklarÄ±na giden ve gelen aÄŸ trafiÄŸini filtreler. **GÃ¼venlik kurallarÄ±** setini barÄ±ndÄ±rÄ±r ve bu kurallar **gelen ve giden trafik iÃ§in hangi portlarÄ±n aÃ§Ä±lacaÄŸÄ±nÄ±** kaynak portu, kaynak IP, port hedefi ile belirtebilir ve bir Ã¶ncelik atamak mÃ¼mkÃ¼ndÃ¼r (Ã¶ncelik numarasÄ± ne kadar dÃ¼ÅŸÃ¼kse, Ã¶ncelik o kadar yÃ¼ksektir).

NSG'ler **alt aÄŸlar ve NIC'ler** ile iliÅŸkilendirilebilir.

**Kural Ã¶rneÄŸi:**

* Herhangi bir kaynaktan web sunucularÄ±nÄ±za HTTP trafiÄŸine (port 80) izin veren bir gelen kural.
* Belirli bir hedef IP adresi aralÄ±ÄŸÄ±na yalnÄ±zca SQL trafiÄŸine (port 1433) izin veren bir giden kural.

### SayÄ±m

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table
az network nsg show --name <nsg-name>

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table

# Get NICs and subnets using this NSG
az network nsg show --name MyLowCostVM-nsg --resource-group Resource_Group_1 --query "{subnets: subnets, networkInterfaces: networkInterfaces}"
```
{% endcode %}

## Azure Firewall

Azure Firewall, bulut kaynaklarÄ±nÄ± trafiÄŸi denetleyerek ve inceleyerek koruyan **yÃ¶netilen bir aÄŸ gÃ¼venlik hizmetidir**. **Durum bilgisi olan bir gÃ¼venlik duvarÄ±dÄ±r** ve 3. ile 7. katmanlar arasÄ±ndaki kurallara gÃ¶re trafiÄŸi filtreler, hem **Azure iÃ§inde** (doÄŸu-batÄ± trafiÄŸi) hem de **dÄ±ÅŸ aÄŸlara/gelen aÄŸlardan** (kuzey-gÃ¼ney trafiÄŸi) iletiÅŸimi destekler. **Sanal AÄŸ (VNet) dÃ¼zeyinde** daÄŸÄ±tÄ±lÄ±r ve VNet'teki tÃ¼m alt aÄŸlar iÃ§in merkezi koruma saÄŸlar. Azure Firewall, trafik taleplerini karÅŸÄ±lamak iÃ§in otomatik olarak Ã¶lÃ§eklenir ve manuel kurulum gerektirmeden yÃ¼ksek kullanÄ±labilirlik saÄŸlar.

ÃœÃ§ SKU'da mevcutturâ€”**Temel**, **Standart** ve **Premium**, her biri belirli mÃ¼ÅŸteri ihtiyaÃ§larÄ±na gÃ¶re Ã¶zelleÅŸtirilmiÅŸtir:

| **Tavsiye Edilen KullanÄ±m Durumu** | SÄ±nÄ±rlÄ± ihtiyaÃ§lara sahip KÃ¼Ã§Ã¼k/Orta Ã–lÃ§ekli Ä°ÅŸletmeler (KOBÄ°'ler) | Genel kurumsal kullanÄ±m, 3â€“7. katman filtreleme | Son derece hassas ortamlar (Ã¶rneÄŸin, Ã¶deme iÅŸleme)  |
| ----------------------------------- | --------------------------------------------------------------- | ------------------------------------------------ | --------------------------------------------------- |
| **Performans**                      | 250 Mbps'ye kadar verim                                     | 30 Gbps'ye kadar verim                             | 100 Gbps'ye kadar verim                              |
| **Tehdit Ä°stihbaratÄ±**             | Sadece uyarÄ±lar                                             | UyarÄ±lar ve engelleme (kÃ¶tÃ¼ niyetli IP'ler/alan adlarÄ±) | UyarÄ±lar ve engelleme (geliÅŸmiÅŸ tehdit istihbaratÄ±) |
| **L3â€“L7 Filtreleme**               | Temel filtreleme                                           | Protokoller arasÄ± durum bilgisi olan filtreleme   | GeliÅŸmiÅŸ inceleme ile durum bilgisi olan filtreleme  |
| **GeliÅŸmiÅŸ Tehdit KorumasÄ±**       | Mevcut deÄŸil                                               | Tehdit istihbaratÄ±na dayalÄ± filtreleme            | SaldÄ±rÄ± Tespit ve Ã–nleme Sistemi (IDPS) iÃ§erir      |
| **TLS Ä°ncelemesi**                 | Mevcut deÄŸil                                               | Mevcut deÄŸil                                      | Gelen/giden TLS sonlandÄ±rmasÄ±nÄ± destekler            |
| **KullanÄ±labilirlik**               | Sabit arka uÃ§ (2 VM)                                      | Otomatik Ã¶lÃ§eklendirme                             | Otomatik Ã¶lÃ§eklendirme                                |
| **YÃ¶netim KolaylÄ±ÄŸÄ±**              | Temel kontroller                                          | GÃ¼venlik DuvarÄ± YÃ¶neticisi aracÄ±lÄ±ÄŸÄ±yla yÃ¶netilir | GÃ¼venlik DuvarÄ± YÃ¶neticisi aracÄ±lÄ±ÄŸÄ±yla yÃ¶netilir    |

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## Azure YÃ¶nlendirme TablolarÄ±

Azure **YÃ¶nlendirme TablolarÄ±**, bir alt aÄŸ iÃ§indeki aÄŸ trafiÄŸinin yÃ¶nlendirilmesini kontrol etmek iÃ§in kullanÄ±lÄ±r. Paketlerin nasÄ±l iletileceÄŸini belirten kurallar tanÄ±mlar; bu, Azure kaynaklarÄ±na, internete veya bir Sanal Cihaz veya Azure GÃ¼venlik DuvarÄ± gibi belirli bir sonraki adrese yÃ¶nlendirme yapabilir. Bir yÃ¶nlendirme tablosunu bir **alt aÄŸ** ile iliÅŸkilendirebilirsiniz ve o alt aÄŸ iÃ§indeki tÃ¼m kaynaklar tablodaki yÃ¶nlendirmeleri takip eder.

**Ã–rnek:** EÄŸer bir alt aÄŸ, dÄ±ÅŸa doÄŸru trafiÄŸi inceleme iÃ§in bir AÄŸ Sanal CihazÄ± (NVA) Ã¼zerinden yÃ¶nlendirmesi gereken kaynaklar barÄ±ndÄ±rÄ±yorsa, tÃ¼m trafiÄŸi (Ã¶rneÄŸin, `0.0.0.0/0`) NVA'nÄ±n Ã¶zel IP adresine yÃ¶nlendirmek iÃ§in bir yÃ¶nlendirme tablosunda bir **yÃ¶nlendirme** oluÅŸturabilirsiniz.

### **SÄ±ralama**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List routes for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Ã–zel BaÄŸlantÄ±

Azure Ã–zel BaÄŸlantÄ±, **Azure hizmetlerine Ã¶zel eriÅŸim saÄŸlamayÄ±** mÃ¼mkÃ¼n kÄ±lan bir hizmettir ve **Azure sanal aÄŸÄ±nÄ±z (VNet) ile hizmet arasÄ±ndaki trafiÄŸin tamamen Microsoft'un Azure omurga aÄŸÄ± iÃ§inde seyahat etmesini saÄŸlar**. Bu, hizmeti VNet'inize getirir. Bu yapÄ±, verileri genel internete maruz bÄ±rakmadÄ±ÄŸÄ± iÃ§in gÃ¼venliÄŸi artÄ±rÄ±r.

Ã–zel BaÄŸlantÄ±, Azure Depolama, Azure SQL VeritabanÄ± ve Ã–zel BaÄŸlantÄ± aracÄ±lÄ±ÄŸÄ±yla paylaÅŸÄ±lan Ã¶zel hizmetler gibi Ã§eÅŸitli Azure hizmetleri ile kullanÄ±labilir. Kendi VNet'inizden veya farklÄ± Azure aboneliklerinden hizmetleri tÃ¼ketmenin gÃ¼venli bir yolunu saÄŸlar.

{% hint style="danger" %}
NSG'ler Ã¶zel uÃ§ noktalara uygulanmaz, bu da bir NSG'yi Ã–zel BaÄŸlantÄ±yÄ± iÃ§eren bir alt aÄŸa iliÅŸkilendirmenin hiÃ§bir etkisi olmayacaÄŸÄ± anlamÄ±na gelir.
{% endhint %}

**Ã–rnek:**

VNet'inizden gÃ¼venli bir ÅŸekilde eriÅŸmek istediÄŸiniz bir **Azure SQL VeritabanÄ±** senaryosunu dÃ¼ÅŸÃ¼nÃ¼n. Normalde, bu genel internet Ã¼zerinden geÃ§iÅŸ yapmayÄ± gerektirebilir. Ã–zel BaÄŸlantÄ± ile, Azure SQL VeritabanÄ± hizmetine doÄŸrudan baÄŸlanan **VNet'inizde bir Ã¶zel uÃ§ nokta oluÅŸturabilirsiniz**. Bu uÃ§ nokta, veritabanÄ±nÄ± kendi VNet'inizin bir parÃ§asÄ±ymÄ±ÅŸ gibi gÃ¶sterir ve Ã¶zel bir IP adresi aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir hale getirir, bÃ¶ylece gÃ¼venli ve Ã¶zel eriÅŸim saÄŸlanÄ±r.

### **SÄ±ralama**

{% code overflow="wrap" %}
```bash
# List Private Link Services
az network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure Servis UÃ§ NoktalarÄ±

Azure Servis UÃ§ NoktalarÄ±, sanal aÄŸÄ±nÄ±zÄ±n Ã¶zel adres alanÄ±nÄ± ve VNet'inizin kimliÄŸini doÄŸrudan bir baÄŸlantÄ± Ã¼zerinden Azure hizmetlerine geniÅŸletir. Servis uÃ§ noktalarÄ±nÄ± etkinleÅŸtirerek, **VNet'inizdeki kaynaklar Azure hizmetlerine gÃ¼venli bir ÅŸekilde baÄŸlanabilir**, Azure Depolama ve Azure SQL VeritabanÄ± gibi, Azure'un omurga aÄŸÄ± kullanÄ±larak. Bu, **VNet'ten Azure hizmetine giden trafiÄŸin Azure aÄŸÄ± iÃ§inde kalmasÄ±nÄ± saÄŸlar**, daha gÃ¼venli ve gÃ¼venilir bir yol sunar.

**Ã–rnek:**

Ã–rneÄŸin, bir **Azure Depolama** hesabÄ± varsayÄ±lan olarak genel internet Ã¼zerinden eriÅŸilebilir. **VNet'iniz iÃ§inde Azure Depolama iÃ§in bir servis uÃ§ noktasÄ± etkinleÅŸtirerek**, yalnÄ±zca VNet'inizden gelen trafiÄŸin depolama hesabÄ±na eriÅŸmesini saÄŸlayabilirsiniz. Depolama hesabÄ± gÃ¼venlik duvarÄ±, yalnÄ±zca VNet'inizden gelen trafiÄŸi kabul edecek ÅŸekilde yapÄ±landÄ±rÄ±labilir.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Service Endpoint'leri ve Ã–zel BaÄŸlantÄ±lar ArasÄ±ndaki Farklar

Microsoft, [**docs**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) sayfasÄ±nda Ã–zel BaÄŸlantÄ±larÄ±n kullanÄ±lmasÄ±nÄ± Ã¶nermektedir:

<figure><img src="../../../../.gitbook/assets/image (25).png" alt=""><figcaption></figcaption></figure>

**Service Endpoint'leri:**

* VNet'inizden Azure hizmetine giden trafik, kamu internetini atlayarak Microsoft Azure omurga aÄŸÄ± Ã¼zerinden geÃ§er.
* Endpoint, Azure hizmetine doÄŸrudan bir baÄŸlantÄ±dÄ±r ve VNet iÃ§inde hizmet iÃ§in Ã¶zel bir IP saÄŸlamaz.
* Hizmet, VNet'inizden dÄ±ÅŸarÄ±da, hizmet gÃ¼venlik duvarÄ±nÄ± bu tÃ¼r trafiÄŸi engelleyecek ÅŸekilde yapÄ±landÄ±rmadÄ±ÄŸÄ±nÄ±z sÃ¼rece, hala kamu endpoint'i Ã¼zerinden eriÅŸilebilir.
* Alt aÄŸ ile Azure hizmeti arasÄ±nda bire bir iliÅŸki vardÄ±r.
* Ã–zel BaÄŸlantÄ±lardan daha az maliyetlidir.

**Ã–zel BaÄŸlantÄ±lar:**

* Ã–zel BaÄŸlantÄ±, Azure hizmetlerini VNet'inize Ã¶zel bir endpoint aracÄ±lÄ±ÄŸÄ±yla haritalar; bu, VNet'iniz iÃ§inde Ã¶zel bir IP adresine sahip bir aÄŸ arayÃ¼zÃ¼dÃ¼r.
* Azure hizmetine bu Ã¶zel IP adresi kullanÄ±larak eriÅŸilir, bu da onu aÄŸÄ±nÄ±zÄ±n bir parÃ§asÄ± gibi gÃ¶sterir.
* Ã–zel BaÄŸlantÄ± aracÄ±lÄ±ÄŸÄ±yla baÄŸlanan hizmetlere yalnÄ±zca VNet'inizden veya baÄŸlÄ± aÄŸlardan eriÅŸilebilir; hizmete kamu internet eriÅŸimi yoktur.
* Azure hizmetlerine veya Azure'da barÄ±ndÄ±rÄ±lan kendi hizmetlerinize gÃ¼venli bir baÄŸlantÄ± saÄŸlar ve baÅŸkalarÄ± tarafÄ±ndan paylaÅŸÄ±lan hizmetlere de baÄŸlantÄ± sunar.
* VNet'inizde Ã¶zel bir endpoint aracÄ±lÄ±ÄŸÄ±yla daha ayrÄ±ntÄ±lÄ± eriÅŸim kontrolÃ¼ saÄŸlar; bu, service endpoint'leri ile alt aÄŸ dÃ¼zeyinde daha geniÅŸ eriÅŸim kontrolÃ¼ne kÄ±yasla daha Ã¶zelleÅŸmiÅŸ bir kontrol sunar.

Ã–zetle, hem Service Endpoint'leri hem de Ã–zel BaÄŸlantÄ±lar Azure hizmetlerine gÃ¼venli baÄŸlantÄ± saÄŸlarken, **Ã–zel BaÄŸlantÄ±lar, hizmetlerin kamu internetine maruz kalmadan Ã¶zel olarak eriÅŸilmesini saÄŸlayarak daha yÃ¼ksek bir izolasyon ve gÃ¼venlik seviyesi sunar**. Ã–te yandan, Service Endpoint'leri, VNet iÃ§inde Ã¶zel bir IP gerektirmeden Azure hizmetlerine basit ve gÃ¼venli eriÅŸim gereken genel durumlar iÃ§in daha kolay bir ÅŸekilde kurulabilir.

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door**, **kÃ¼resel web uygulamalarÄ±nÄ±zÄ±n hÄ±zlÄ± teslimatÄ±** iÃ§in Ã¶lÃ§eklenebilir ve gÃ¼venli bir giriÅŸ noktasÄ±dÄ±r. **KÃ¼resel yÃ¼k dengeleme, site hÄ±zlandÄ±rma, SSL yÃ¼k dengelemesi ve Web Uygulama GÃ¼venlik DuvarÄ± (WAF)** yetenekleri gibi Ã§eÅŸitli hizmetleri tek bir hizmette **birleÅŸtirir**. Azure Front Door, **kullanÄ±cÄ±ya en yakÄ±n kenar konumuna** dayalÄ± akÄ±llÄ± yÃ¶nlendirme saÄŸlar, bÃ¶ylece optimal performans ve gÃ¼venilirlik sunar. AyrÄ±ca, URL tabanlÄ± yÃ¶nlendirme, Ã§oklu site barÄ±ndÄ±rma, oturum baÄŸlÄ±lÄ±ÄŸÄ± ve uygulama katmanÄ± gÃ¼venliÄŸi sunar.

**Azure Front Door WAF**, **web tabanlÄ± saldÄ±rÄ±lardan web uygulamalarÄ±nÄ± korumak** iÃ§in tasarlanmÄ±ÅŸtÄ±r ve arka uÃ§ kodunda deÄŸiÅŸiklik gerektirmez. SQL enjeksiyonu, Ã§apraz site betikleme ve diÄŸer yaygÄ±n saldÄ±rÄ±lar gibi tehditlere karÅŸÄ± korumak iÃ§in Ã¶zel kurallar ve yÃ¶netilen kural setleri iÃ§erir.

**Ã–rnek:**

DÃ¼nyanÄ±n dÃ¶rt bir yanÄ±nda kullanÄ±cÄ±larÄ± olan kÃ¼resel bir daÄŸÄ±tÄ±m uygulamanÄ±z olduÄŸunu hayal edin. Azure Front Door'u, **kullanÄ±cÄ± isteklerini uygulamanÄ±zÄ± barÄ±ndÄ±ran en yakÄ±n bÃ¶lgesel veri merkezine yÃ¶nlendirmek** iÃ§in kullanabilirsiniz; bÃ¶ylece gecikmeyi azaltÄ±r, kullanÄ±cÄ± deneyimini iyileÅŸtirir ve **WAF yetenekleri ile web saldÄ±rÄ±larÄ±na karÅŸÄ± savunursunuz**. Belirli bir bÃ¶lge kesinti yaÅŸarsa, Azure Front Door otomatik olarak trafiÄŸi bir sonraki en iyi konuma yÃ¶nlendirebilir ve yÃ¼ksek kullanÄ±labilirlik saÄŸlar.

### Enumeration

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Uygulama GeÃ§idi ve Azure Uygulama GeÃ§idi WAF

Azure Uygulama GeÃ§idi, **web** uygulamalarÄ±nÄ±za trafik yÃ¶netmenizi saÄŸlayan bir **web trafiÄŸi yÃ¼k dengeleyici**dir. **Katman 7 yÃ¼k dengeleme, SSL sonlandÄ±rma ve web uygulama gÃ¼venlik duvarÄ± (WAF) yetenekleri** sunar. Ana Ã¶zellikler arasÄ±nda URL tabanlÄ± yÃ¶nlendirme, Ã§erez tabanlÄ± oturum baÄŸlÄ±lÄ±ÄŸÄ± ve gÃ¼venli soket katmanÄ± (SSL) yÃ¼k dengelemesi bulunur; bu Ã¶zellikler, kÃ¼resel yÃ¶nlendirme ve yol tabanlÄ± yÃ¶nlendirme gibi karmaÅŸÄ±k yÃ¼k dengeleme yetenekleri gerektiren uygulamalar iÃ§in kritik Ã¶neme sahiptir.

**Ã–rnek:**

Bir e-ticaret web siteniz olduÄŸunu ve bu sitenin kullanÄ±cÄ± hesaplarÄ± ve Ã¶deme iÅŸlemleri gibi farklÄ± iÅŸlevler iÃ§in birden fazla alt alan adÄ± iÃ§erdiÄŸini dÃ¼ÅŸÃ¼nÃ¼n. Azure Uygulama GeÃ§idi, **URL yolu temelinde trafiÄŸi uygun web sunucularÄ±na yÃ¶nlendirebilir**. Ã–rneÄŸin, `example.com/accounts` adresine gelen trafik kullanÄ±cÄ± hesaplarÄ± hizmetine, `example.com/pay` adresine gelen trafik ise Ã¶deme iÅŸleme hizmetine yÃ¶nlendirilebilir.\
Ve **WAF yeteneklerini kullanarak web sitenizi saldÄ±rÄ±lardan koruyun.**

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke & VNet Peering

**VNet Peering**, Azure'da **farklÄ± Sanal AÄŸlarÄ±n (VNet'lerin) doÄŸrudan ve kesintisiz bir ÅŸekilde baÄŸlanmasÄ±na olanak tanÄ±yan** bir aÄŸ Ã¶zelliÄŸidir. VNet peering aracÄ±lÄ±ÄŸÄ±yla, bir VNet'teki kaynaklar, **sanki aynÄ± aÄŸdaymÄ±ÅŸ gibi** baÅŸka bir VNet'teki kaynaklarla Ã¶zel IP adresleri kullanarak iletiÅŸim kurabilir.\
**VNet Peering, bir yerel aÄŸ ile de kullanÄ±labilir**; bir site-to-site VPN veya Azure ExpressRoute kurarak.

**Azure Hub ve Spoke**, aÄŸ trafiÄŸini yÃ¶netmek ve organize etmek iÃ§in Azure'da kullanÄ±lan bir aÄŸ topolojisidir. **"Hub", farklÄ± "spokelar" arasÄ±ndaki trafiÄŸi kontrol eden ve yÃ¶nlendiren merkezi bir noktadÄ±r**. Hub genellikle aÄŸ sanal cihazlarÄ± (NVA'lar), Azure VPN Gateway, Azure Firewall veya Azure Bastion gibi paylaÅŸÄ±lan hizmetleri iÃ§erir. **"Spokelar", iÅŸ yÃ¼klerini barÄ±ndÄ±ran ve hub'a VNet peering kullanarak baÄŸlanan VNNet'lerdir**, bu da onlarÄ±n hub iÃ§indeki paylaÅŸÄ±lan hizmetlerden yararlanmalarÄ±nÄ± saÄŸlar. Bu model, farklÄ± VNet'ler arasÄ±nda birden fazla iÅŸ yÃ¼kÃ¼nÃ¼n kullanabileceÄŸi ortak hizmetleri merkezileÅŸtirerek karmaÅŸÄ±klÄ±ÄŸÄ± azaltarak temiz bir aÄŸ dÃ¼zenini teÅŸvik eder.

{% hint style="danger" %}
**VNET eÅŸleÅŸtirmesi Azure'da geÃ§iÅŸken deÄŸildir**, bu da demektir ki eÄŸer spoke 1, spoke 2'ye baÄŸlÄ±ysa ve spoke 2, spoke 3'e baÄŸlÄ±ysa, spoke 1 doÄŸrudan spoke 3 ile iletiÅŸim kuramaz.
{% endhint %}

**Ã–rnek:**

SatÄ±ÅŸ, Ä°K ve GeliÅŸtirme gibi ayrÄ± departmanlara sahip bir ÅŸirketi hayal edin, **her birinin kendi VNet'i (spokelar)** vardÄ±r. Bu VNNet'ler, **bir merkezi veritabanÄ±, bir gÃ¼venlik duvarÄ± ve bir internet geÃ§idi gibi paylaÅŸÄ±lan kaynaklara eriÅŸim gerektirir**, bunlarÄ±n hepsi **baÅŸka bir VNet'te (hub)** bulunmaktadÄ±r. Hub ve Spoke modelini kullanarak, her departman **bu paylaÅŸÄ±lan kaynaklara hub VNet aracÄ±lÄ±ÄŸÄ±yla gÃ¼venli bir ÅŸekilde baÄŸlanabilir ve bu kaynaklarÄ± kamu internetine aÃ§madan** veya Ã§ok sayÄ±da baÄŸlantÄ± ile karmaÅŸÄ±k bir aÄŸ yapÄ±sÄ± oluÅŸturmadan eriÅŸebilir.

### Enumeration

{% code overflow="wrap" %}
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## Site-to-Site VPN

Azure'daki Site-to-Site VPN, **yerel aÄŸÄ±nÄ±zÄ± Azure Sanal AÄŸÄ± (VNet) ile baÄŸlamanÄ±za** olanak tanÄ±r ve Azure iÃ§indeki VM'ler gibi kaynaklarÄ±n yerel aÄŸÄ±nÄ±zda varmÄ±ÅŸ gibi gÃ¶rÃ¼nmesini saÄŸlar. Bu baÄŸlantÄ±, iki aÄŸ arasÄ±ndaki trafiÄŸi **ÅŸifreleyen bir VPN geÃ§idi aracÄ±lÄ±ÄŸÄ±yla** kurulur.

**Ã–rnek:**

Ana ofisi New York'ta bulunan bir iÅŸletmenin, Azure'daki VNet'ine gÃ¼venli bir ÅŸekilde baÄŸlanmasÄ± gereken yerel bir veri merkezi vardÄ±r; bu VNet, sanallaÅŸtÄ±rÄ±lmÄ±ÅŸ iÅŸ yÃ¼klerini barÄ±ndÄ±rmaktadÄ±r. **Site-to-Site VPN kurarak, ÅŸirket yerel sunucular ile Azure VM'leri arasÄ±nda ÅŸifreli baÄŸlantÄ± saÄŸlayabilir**, bÃ¶ylece kaynaklara her iki ortamda da sanki aynÄ± yerel aÄŸdaymÄ±ÅŸ gibi gÃ¼venli bir ÅŸekilde eriÅŸilebilir.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
{% endcode %}

## Azure ExpressRoute

Azure ExpressRoute, **yerel altyapÄ±nÄ±z ile Azure veri merkezleri arasÄ±nda Ã¶zel, ayrÄ±lmÄ±ÅŸ, yÃ¼ksek hÄ±zlÄ± bir baÄŸlantÄ± saÄŸlayan bir hizmettir**. Bu baÄŸlantÄ±, kamu internetini atlayarak bir baÄŸlantÄ± saÄŸlayÄ±cÄ±sÄ± aracÄ±lÄ±ÄŸÄ±yla yapÄ±lÄ±r ve tipik internet baÄŸlantÄ±larÄ±ndan daha fazla gÃ¼venilirlik, daha hÄ±zlÄ± hÄ±zlar, daha dÃ¼ÅŸÃ¼k gecikmeler ve daha yÃ¼ksek gÃ¼venlik sunar.

**Ã–rnek:**

Bir Ã§ok uluslu ÅŸirket, **yÃ¼ksek veri hacmi ve yÃ¼ksek veri akÄ±ÅŸÄ± ihtiyacÄ± nedeniyle Azure hizmetlerine tutarlÄ± ve gÃ¼venilir bir baÄŸlantÄ± gerektirir**. Åirket, yerel veri merkezini doÄŸrudan Azure'a baÄŸlamak iÃ§in Azure ExpressRoute'u tercih eder, bÃ¶ylece gÃ¼nlÃ¼k yedeklemeler ve gerÃ§ek zamanlÄ± veri analitiÄŸi gibi bÃ¼yÃ¼k Ã¶lÃ§ekli veri transferlerini artÄ±rÄ±lmÄ±ÅŸ gizlilik ve hÄ±z ile kolaylaÅŸtÄ±rÄ±r.

### **Enumeration**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** bizi **takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
