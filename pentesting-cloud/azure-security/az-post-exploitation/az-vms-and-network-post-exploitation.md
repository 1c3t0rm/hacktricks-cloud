# Az - VMs & Network Post Exploitation

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## VMs & Network

Azure VMs ve aÄŸlarÄ± hakkÄ±nda daha fazla bilgi iÃ§in aÅŸaÄŸÄ±daki sayfayÄ± kontrol edin:

{% content-ref url="../az-services/vms/" %}
[vms](../az-services/vms/)
{% endcontent-ref %}

### VM Uygulama Pivotlama

VM uygulamalarÄ± diÄŸer abonelikler ve kiracÄ±lar ile paylaÅŸÄ±labilir. Bir uygulama paylaÅŸÄ±lÄ±yorsa, muhtemelen kullanÄ±ldÄ±ÄŸÄ± iÃ§indir. Bu nedenle, saldÄ±rgan **uygulamayÄ± ele geÃ§irip arka kapÄ±lÄ±** bir versiyon yÃ¼klemeyi baÅŸarÄ±rsa, bu versiyonun **baÅŸka bir kiracÄ± veya abonelikte Ã§alÄ±ÅŸtÄ±rÄ±lmasÄ±** mÃ¼mkÃ¼n olabilir.

### GÃ¶rsellerdeki hassas bilgiler

GeÃ§miÅŸteki VMs'den alÄ±nan **gÃ¶rsellerin iÃ§inde hassas bilgiler** bulmak mÃ¼mkÃ¼n olabilir.

1. **Galeri gÃ¶rÃ¼ntÃ¼lerini listeleyin**
```bash
# Get galleries
az sig list -o table

# List images inside gallery
az sig image-definition list \
--resource-group <RESOURCE_GROUP> \
--gallery-name <GALLERY_NAME> \
-o table

# Get images versions
az sig image-version list \
--resource-group <RESOURCE_GROUP> \
--gallery-name <GALLERY_NAME> \
--gallery-image-definition <IMAGE_DEFINITION> \
-o table
```
2. **Ã–zel gÃ¶rÃ¼ntÃ¼leri listele**
```bash
az image list -o table
```
3. **GÃ¶rÃ¼ntÃ¼ ID'sinden VM oluÅŸturun** ve iÃ§inde hassas bilgileri arayÄ±n
```bash
# Create VM from image
az vm create \
--resource-group <RESOURCE_GROUP> \
--name <VM_NAME> \
--image /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Compute/galleries/<GALLERY_NAME>/images/<IMAGE_DEFINITION>/versions/<IMAGE_VERSION> \
--admin-username <ADMIN_USERNAME> \
--generate-ssh-keys
```
### Restore noktalarÄ±nda hassas bilgiler

**Restore noktalarÄ±nda hassas bilgilerin** bulunmasÄ± mÃ¼mkÃ¼n olabilir.

1. **Restore noktalarÄ±nÄ± listele**
```bash
az restore-point list \
--resource-group <RESOURCE_GROUP> \
--restore-point-collection-name <COLLECTION_NAME> \
-o table
```
2. **Bir disk oluÅŸturun** bir geri yÃ¼kleme noktasÄ±ndan

{% code overflow="wrap" %}
```bash
az disk create \
--resource-group <RESOURCE_GROUP> \
--name <NEW_DISK_NAME> \
--source /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Compute/restorePointCollections/<COLLECTION_NAME>/restorePoints/<RESTORE_POINT_NAME>
```
{% endcode %}

3. **Bir diski bir VM'ye ekleyin** (saldÄ±rganÄ±n zaten hesap iÃ§indeki bir VM'yi ele geÃ§irmiÅŸ olmasÄ± gerekir)
```bash
az vm disk attach \
--resource-group <RESOURCE_GROUP> \
--vm-name <VM_NAME> \
--name <DISK_NAME>
```
4. **Disk'i baÄŸlayÄ±n** ve **hassas bilgileri arayÄ±n**

{% tabs %}
{% tab title="Linux" %}
```bash
# List all available disks
sudo fdisk -l

# Check disk format
sudo file -s /dev/sdX

# Mount it
sudo mkdir /mnt/mydisk
sudo mount /dev/sdX1 /mnt/mydisk
```
{% endtab %}

{% tab title="Windows" %}
#### **1. Disk YÃ¶netimini AÃ§Ä±n**

1. **BaÅŸlat**'a saÄŸ tÄ±klayÄ±n ve **Disk YÃ¶netimi**'ni seÃ§in.
2. BaÄŸlÄ± disk **Ã‡evrimdÄ±ÅŸÄ±** veya **AyrÄ±lmamÄ±ÅŸ** olarak gÃ¶rÃ¼nmelidir.

#### **2. Diski Ã‡evrimiÃ§i YapÄ±n**

1. Alt pencerede diski bulun.
2. Diske saÄŸ tÄ±klayÄ±n (Ã¶rneÄŸin, **Disk 1**) ve **Ã‡evrimiÃ§i**'yi seÃ§in.

#### **3. Diski BaÅŸlatÄ±n**

1. Disk baÅŸlatÄ±lmamÄ±ÅŸsa, saÄŸ tÄ±klayÄ±n ve **Diski BaÅŸlat**'Ä± seÃ§in.
2. BÃ¶lÃ¼m stilini seÃ§in:
* **MBR** (Master Boot Record) veya **GPT** (GUID Partition Table). Modern sistemler iÃ§in GPT Ã¶nerilir.

#### **4. Yeni Bir Birim OluÅŸturun**

1. Diskteki ayrÄ±lmamÄ±ÅŸ alana saÄŸ tÄ±klayÄ±n ve **Yeni Basit Birim**'i seÃ§in.
2. SihirbazÄ± takip edin:
* Bir sÃ¼rÃ¼cÃ¼ harfi atayÄ±n (Ã¶rneÄŸin, `D:`).
* Diski biÃ§imlendirin (Ã§oÄŸu durumda NTFS seÃ§in).
{% endtab %}
{% endtabs %}

### Disklerde ve anlÄ±k gÃ¶rÃ¼ntÃ¼lerde hassas bilgiler

**Disklerde veya hatta eski disk anlÄ±k gÃ¶rÃ¼ntÃ¼lerinde hassas bilgilerin bulunmasÄ± mÃ¼mkÃ¼n olabilir.**

1. **AnlÄ±k gÃ¶rÃ¼ntÃ¼leri listeleyin**
```bash
az snapshot list \
--resource-group <RESOURCE_GROUP> \
-o table
```
2. **AnlÄ±k gÃ¶rÃ¼ntÃ¼den disk oluÅŸtur** (gerekirse)
```bash
az disk create \
--resource-group <RESOURCE_GROUP> \
--name <DISK_NAME> \
--source <SNAPSHOT_ID> \
--size-gb <DISK_SIZE>
```
3. **Bir diski bir VM'ye ekleyin ve baÄŸlayÄ±n** ve hassas bilgileri arayÄ±n (bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± gÃ¶rmek iÃ§in Ã¶nceki bÃ¶lÃ¼me bakÄ±n)

### VM UzantÄ±larÄ± ve VM UygulamalarÄ±ndaki Hassas Bilgiler

**VM uzantÄ±larÄ± ve VM uygulamalarÄ± iÃ§inde hassas bilgilerin** bulunmasÄ± mÃ¼mkÃ¼n olabilir.

1. **TÃ¼m VM uygulamalarÄ±nÄ± listeleyin**

{% code overflow="wrap" %}
```bash
## List all VM applications inside a gallery
az sig gallery-application list --gallery-name <gallery-name> --resource-group <res-group> --output table
```
{% endcode %}

2. Bir VM'de uzantÄ±yÄ± yÃ¼kleyin ve **hassas bilgileri arayÄ±n**

{% code overflow="wrap" %}
```bash
az vm application set \
--resource-group <rsc-group> \
--name <vm-name> \
--app-version-ids /subscriptions/9291ff6e-6afb-430e-82a4-6f04b2d05c7f/resourceGroups/Resource_Group_1/providers/Microsoft.Compute/galleries/myGallery/applications/myReverseShellApp/versions/1.0.2 \
--treat-deployment-as-failure true
```
{% endcode %}

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter'da** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**'i takip edin.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
