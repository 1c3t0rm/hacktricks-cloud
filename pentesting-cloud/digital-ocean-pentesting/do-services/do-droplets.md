# DO - Droplets

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Informaci칩n B치sica

En DigitalOcean, un "droplet" es un **servidor privado virtual (VPS)** que se puede utilizar para alojar sitios web y aplicaciones. Un droplet es un **paquete preconfigurado de recursos inform치ticos**, que incluye una cierta cantidad de CPU, memoria y almacenamiento, que se puede implementar r치pida y f치cilmente en la infraestructura en la nube de DigitalOcean.

Puedes seleccionar entre **sistemas operativos comunes**, aplicaciones ya en funcionamiento (como WordPress, cPanel, Laravel...), o incluso subir y usar **tus propias im치genes**.

Los droplets admiten **scripts de datos de usuario**.

<details>

<summary>Diferencia entre un snapshot y una copia de seguridad</summary>

En DigitalOcean, un snapshot es una copia en un momento dado del disco de un Droplet. Captura el estado del disco del Droplet en el momento en que se tom칩 el snapshot, incluyendo el sistema operativo, aplicaciones instaladas y todos los archivos y datos en el disco.

Los snapshots se pueden usar para crear nuevos Droplets con la misma configuraci칩n que el Droplet original, o para restaurar un Droplet al estado en que se encontraba cuando se tom칩 el snapshot. Los snapshots se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, y son incrementales, lo que significa que solo se almacenan los cambios desde el 칰ltimo snapshot. Esto los hace eficientes de usar y rentables de almacenar.

Por otro lado, una copia de seguridad es una copia completa de un Droplet, incluyendo el sistema operativo, aplicaciones instaladas, archivos y datos, as칤 como la configuraci칩n y metadatos del Droplet. Las copias de seguridad se realizan t칤picamente en un horario regular, y capturan el estado completo de un Droplet en un momento espec칤fico.

A diferencia de los snapshots, las copias de seguridad se almacenan en un formato comprimido y cifrado, y se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota para su custodia. Esto hace que las copias de seguridad sean ideales para la recuperaci칩n ante desastres, ya que proporcionan una copia completa de un Droplet que se puede restaurar en caso de p칠rdida de datos u otros eventos catastr칩ficos.

En resumen, los snapshots son copias en un momento dado del disco de un Droplet, mientras que las copias de seguridad son copias completas de un Droplet, incluyendo su configuraci칩n y metadatos. Los snapshots se almacenan en el servicio de almacenamiento de objetos de DigitalOcean, mientras que las copias de seguridad se transfieren fuera de la infraestructura de DigitalOcean a una ubicaci칩n remota. Tanto los snapshots como las copias de seguridad se pueden usar para restaurar un Droplet, pero los snapshots son m치s eficientes de usar y almacenar, mientras que las copias de seguridad proporcionan una soluci칩n de respaldo m치s completa para la recuperaci칩n ante desastres.

</details>

### Autenticaci칩n

Para la autenticaci칩n, es posible **habilitar SSH** a trav칠s de nombre de usuario y **contrase침a** (contrase침a definida cuando se crea el droplet). O **seleccionar una o m치s de las claves SSH subidas**.

### Firewall

{% hint style="danger" %}
Por defecto, **los droplets se crean SIN UN FIREWALL** (no como en otras nubes como AWS o GCP). As칤 que si quieres que DO proteja los puertos del droplet (VM), necesitas **crearlo y adjuntarlo**.
{% endhint %}

M치s informaci칩n en:

{% content-ref url="do-networking.md" %}
[do-networking.md](do-networking.md)
{% endcontent-ref %}

### Enumeraci칩n
```bash
# VMs
doctl compute droplet list # IPs will appear here
doctl compute droplet backups <droplet-id>
doctl compute droplet snapshots <droplet-id>
doctl compute droplet neighbors <droplet-id> # Get network neighbors
doctl compute droplet actions <droplet-id> # Get droplet actions

# VM interesting actions
doctl compute droplet-action password-reset <droplet-id> # New password is emailed to the user
doctl compute droplet-action enable-ipv6 <droplet-id>
doctl compute droplet-action power-on <droplet-id>
doctl compute droplet-action disable-backups <droplet-id>

# SSH
doctl compute ssh <droplet-id> # This will just run SSH
doctl compute ssh-key list
doctl compute ssh-key import <key-name> --public-key-file /path/to/key.pub

# Certificates
doctl compute certificate list

# Snapshots
doctl compute snapshot list
```
{% hint style="danger" %}
**Los Droplets tienen puntos finales de metadatos**, pero en DO **no hay IAM** ni cosas como roles de AWS o cuentas de servicio de GCP.
{% endhint %}

### RCE

Con acceso a la consola es posible **obtener un shell dentro del droplet** accediendo a la URL: **`https://cloud.digitalocean.com/droplets/<droplet-id>/terminal/ui/`**

Tambi칠n es posible lanzar una **consola de recuperaci칩n** para ejecutar comandos dentro del host accediendo a una consola de recuperaci칩n en **`https://cloud.digitalocean.com/droplets/<droplet-id>/console`** (pero en este caso necesitar치s conocer la contrase침a de root).

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
