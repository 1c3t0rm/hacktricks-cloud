# AWS - Uthabiti wa EC2

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>

## EC2

Kwa habari zaidi angalia:

{% content-ref url="../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

### Uthabiti wa Kufuatilia Uunganisho wa Kikundi cha Usalama

Ikiwa mwepesi anagundua kuwa **kifaa cha EC2 kimevamiwa** labda atajaribu **kutenga** **mtandao** wa kifaa hicho. Anaweza kufanya hivyo kwa kutumia **Deny NACL** (ingawa NACLs huathiri subnet nzima), au **kubadilisha kikundi cha usalama** kwa kutokuwa **ruhusa ya aina yoyote ya trafiki kuingia au kutoka.**

Ikiwa muhusika alikuwa na **shell ya nyuma iliyotokana na kifaa**, hata kama SG imebadilishwa ili kutokuwa na ruhusa ya trafiki kuingia au kutoka, **unganisho halitakatishwa kutokana na** [**Kufuatilia Uunganisho wa Kikundi cha Usalama**](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-group-connection-tracking.html)**.**

### Meneja wa Mzunguko wa EC2

Huduma hii inaruhusu **kupanga** **ujenzi wa AMIs na snapshots** na hata **kushiriki nao na akaunti zingine**.\
Mshambuliaji anaweza kusanidi **ujenzi wa AMIs au snapshots** za picha zote au diski zote **kila wiki** na **kushiriki nao kwenye akaunti yake**.

### Vifaa Vilivyopangwa

Inawezekana kupanga vifaa viendeshe kila siku, kila wiki au hata kila mwezi. Mshambuliaji anaweza kuendesha kifaa chenye mamlaka kubwa au ufikiaji wa kuvutia ambapo anaweza kupata ufikiaji.

### Ombi la Floti ya Nafasi

Vifaa vya nafasi ni **nafuu** kuliko vifaa vya kawaida. Mshambuliaji anaweza kuzindua **ombi dogo la floti ya nafasi kwa miaka 5** (kwa mfano), na **utoaji wa IP moja kwa moja** na **data ya mtumiaji** ambayo inamtumia muhusika **wakati kifaa cha nafasi kinaanza** na **anwani ya IP** na na **jukumu la IAM lenye mamlaka makubwa**.

### Vifaa vya Nyuma

Mshambuliaji anaweza kupata ufikiaji wa vifaa na kuvifungia:

* Kwa kutumia **rootkit** ya jadi kwa mfano
* Kuongeza **funguo mpya ya SSH ya umma** (angalia [chaguzi za EC2 za privesc](../../aws-security/aws-privilege-escalation/aws-ec2-privesc.md))
* Kuvifungia **Data ya Mtumiaji**

### **Uzinduzi wa Nyuma wa Usanidi**

* Kuvifungia AMI iliyotumiwa
* Kuvifungia Data ya Mtumiaji
* Kuvifungia Jozi ya Funguo

### VPN

Unda VPN ili mshambuliaji aweze kuunganisha moja kwa moja kupitia hiyo kwenye VPC.

### Uunganisho wa VPC Peering

Unda uunganisho wa peering kati ya VPC ya mwathiriwa na VPC ya mshambuliaji ili aweze kupata ufikiaji wa VPC ya mwathiriwa.

<details>

<summary><strong>Jifunze kuhusu udukuzi wa AWS kutoka sifuri hadi shujaa na</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Mtaalam wa Timu Nyekundu ya AWS ya HackTricks)</strong></a><strong>!</strong></summary>

Njia nyingine za kusaidia HackTricks:

* Ikiwa unataka kuona **kampuni yako ikionekana kwenye HackTricks** au **kupakua HackTricks kwa PDF** Angalia [**MIPANGO YA KUJIUNGA**](https://github.com/sponsors/carlospolop)!
* Pata [**bidhaa rasmi za PEASS & HackTricks**](https://peass.creator-spring.com)
* Gundua [**Familia ya PEASS**](https://opensea.io/collection/the-peass-family), mkusanyiko wetu wa [**NFTs**](https://opensea.io/collection/the-peass-family) za kipekee
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Shiriki mbinu zako za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
