# AWS - Enumerazione di Kinesis Data Firehose

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** 💬 [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Kinesis Data Firehose

Amazon Kinesis Data Firehose è un servizio **completamente gestito** che facilita la consegna di **dati in streaming in tempo reale**. Supporta una varietà di destinazioni, tra cui Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk e endpoint HTTP personalizzati.

Il servizio allevia la necessità di scrivere applicazioni o gestire risorse consentendo ai produttori di dati di essere configurati per inoltrare i dati direttamente a Kinesis Data Firehose. Questo servizio è responsabile della **consegna automatica dei dati alla destinazione specificata**. Inoltre, Kinesis Data Firehose offre la possibilità di **trasformare i dati prima della consegna**, migliorandone la flessibilità e l'applicabilità a vari casi d'uso.

### Enumerazione
```bash
# Get delivery streams
aws firehose list-delivery-streams

# Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## Post-esecuzione / Bypass della difesa

Nel caso in cui firehose venga utilizzato per inviare log o informazioni sulla difesa, utilizzando queste funzionalità un attaccante potrebbe impedire il corretto funzionamento.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination

La acción `firehose:UpdateDestination` permite a un usuario actualizar la configuración de un destino existente en Amazon Kinesis Data Firehose. Esto incluye la actualización de la configuración de transformación, la configuración de compresión y la configuración de encriptación del destino.

#### Sintaxis

```html
aws firehose update-destination --delivery-stream-name <nombre-del-stream> --current-delivery-stream-version-id <id-de-version-actual> --destination-id <id-del-destino> --s3-destination-update <configuración-de-actualización-de-destino-s3> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --redshift-destination-update <configuración-de-actualización-de-destino-redshift> --elasticsearch-destination-update <configuración-de-actualización-de-destino-elasticsearch> --splunk-destination-update <configuración-de-actualización-de-destino-splunk> --http-destination-update <configuración-de-actualización-de-destino-http> --open-xray-destination-update <configuración-de-actualización-de-destino-open-xray> --cloudwatch-logs-destination-update <configuración-de-actualización-de-destino-cloudwatch-logs> --http-endpoint-configuration <configuración-de-extremo-http> --vpc-configuration-update <configuración-de-actualización-de-vpc> --processing-configuration-update <configuración-de-actualización-de-procesamiento> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido> --extended-s3-destination-update <configuración-de-actualización-de-destino-s3-extendido>
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch

Questi sono i permessi necessari per inviare dati a un flusso di dati Kinesis Data Firehose. Il comando `firehose:PutRecord` consente di inviare un singolo record al flusso di dati, mentre il comando `firehose:PutRecordBatch` consente di inviare più record contemporaneamente.
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## Riferimenti

* [https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html)

<details>

<summary><strong>Impara l'hacking di AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF**, controlla i [**PACCHETTI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT**](https://opensea.io/collection/the-peass-family) esclusivi
* **Unisciti al** 💬 [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo Telegram**](https://t.me/peass) o **seguici** su **Twitter** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Condividi i tuoi trucchi di hacking inviando PR ai repository di** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>
