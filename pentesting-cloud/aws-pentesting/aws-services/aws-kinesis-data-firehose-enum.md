# AWS - Kinesis Data Firehose Enum

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Kinesis Data Firehose

Amazon Kinesis Data Firehose to **w pełni zarządzana usługa**, która ułatwia dostarczanie **danych strumieniowych w czasie rzeczywistym**. Obsługuje różne miejsca docelowe, w tym Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk i niestandardowe punkty końcowe HTTP.

Usługa eliminuje konieczność pisania aplikacji lub zarządzania zasobami, umożliwiając konfigurację producentów danych do przekazywania danych bezpośrednio do Kinesis Data Firehose. Usługa ta jest odpowiedzialna za **automatyczne dostarczanie danych do określonego miejsca docelowego**. Dodatkowo, Kinesis Data Firehose umożliwia **transformację danych przed ich dostarczeniem**, zwiększając tym samym ich elastyczność i zastosowanie w różnych przypadkach użycia.

### Wyliczanie
```bash
# Get delivery streams
aws firehose list-delivery-streams

# Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## Post-eksploatacja / Ominięcie obrony

W przypadku, gdy firehose jest używany do wysyłania logów lub informacji o obronie, za pomocą tych funkcji atakujący może uniemożliwić mu prawidłowe działanie.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination

Metoda `firehose:UpdateDestination` służy do aktualizacji konfiguracji docelowego miejsca dostarczania danych w usłudze AWS Kinesis Data Firehose. Ta metoda umożliwia zmianę ustawień, takich jak nazwa docelowego miejsca, typ dostarczania danych, konfiguracja transformacji danych i inne parametry.

Aby użyć tej metody, należy dostarczyć odpowiednie uprawnienia IAM dla użytkownika lub roli, która wykonuje żądanie. Po autoryzacji, można przekazać parametry żądania, takie jak nazwa strumienia danych, nazwa docelowego miejsca i nowe ustawienia, które mają zostać zaktualizowane.

Po wykonaniu żądania `firehose:UpdateDestination`, usługa Kinesis Data Firehose zastosuje nowe ustawienia dla docelowego miejsca dostarczania danych.
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch

Metoda `firehose:PutRecord` służy do wysyłania pojedynczego rekordu do strumienia danych Amazon Kinesis Data Firehose. 

Metoda `firehose:PutRecordBatch` służy do wysyłania wielu rekordów jednocześnie do strumienia danych Amazon Kinesis Data Firehose.
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## Odwołania

* [https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html)

<details>

<summary><strong>Naucz się hakować AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia dla HackTricks:

* Jeśli chcesz zobaczyć swoją **firmę reklamowaną w HackTricks** lub **pobrać HackTricks w formacie PDF**, sprawdź [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobądź [**oficjalne gadżety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzinę PEASS**](https://opensea.io/collection/the-peass-family), naszą kolekcję ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Dołącz do** 💬 [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **śledź** nas na **Twitterze** 🐦 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel się swoimi sztuczkami hakerskimi, przesyłając PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
