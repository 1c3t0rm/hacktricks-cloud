# AWS - CodeBuild Na-uitbuiting

<details>

<summary><strong>Leer AWS-hacking vanaf nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy jou **maatskappy geadverteer wil sien in HackTricks** of **HackTricks in PDF wil aflaai**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-repos.

</details>

## CodeBuild

Vir meer inligting, kyk:

{% content-ref url="../../aws-security/aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../../aws-security/aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### Misbruik van CodeBuild Repo-toegang

Om **CodeBuild** te konfigureer, sal dit **toegang tot die kode-opslag** benodig wat dit gaan gebruik. Verskeie platforms kan hierdie kode huisves:

<figure><img src="../../../.gitbook/assets/image (3) (5).png" alt=""><figcaption></figcaption></figure>

Die **CodeBuild-projek moet toegang h√™** tot die gekonfigureerde bronverskaffer, √≥f via **IAM-rol** of met 'n github/bitbucket **token of OAuth-toegang**.

'n Aanvaller met **verhoogde regte oor 'n CodeBuild** kan hierdie gekonfigureerde toegang misbruik om die kode van die gekonfigureerde opslag en ander waar die ingestelde geloofsbriewe toegang het, te lek.\
Om dit te doen, sal 'n aanvaller net die **opslag-URL verander na elke opslag waarop die gekonfigureerde geloofsbriewe toegang het** (let daarop dat die AWS-webwerf almal vir jou sal lys):

<figure><img src="../../../.gitbook/assets/image (11) (1) (2).png" alt=""><figcaption></figcaption></figure>

En **verander die Buildspec-opdragte om elke opslag uit te voer**.

{% hint style="warning" %}
Hierdie **taak is egter herhalend en vervelig** en as 'n github-token gekonfigureer is met **skryfregte**, sal 'n aanvaller **nie in staat wees om hierdie regte te misbruik** nie, aangesien hy nie toegang tot die token het nie.\
Of het hy wel? Kyk na die volgende afdeling
{% endhint %}

### Lekkering van Toegangstokens vanaf AWS CodeBuild

Jy kan toegang wat in CodeBuild gegee is, lek na platforms soos Github. Kyk of enige toegang tot eksterne platforms gegee is met:
```bash
aws codebuild list-source-credentials
```
### `codebuild:DeleteProject`

'n Aanvaller kan 'n hele CodeBuild-projek uitvee, wat verlies van projekkonfigurasie veroorsaak en toepassings wat op die projek staatmaak, be√Ønvloed.
```bash
aws codebuild delete-project --name <value>
```
**Potensi√´le Impak**: Verlies van projekkonfigurasie en diensonderbreking vir toepassings wat die uitgewiste projek gebruik.

### `codebuild:TagResource`, `codebuild:UntagResource`

'n Aanvaller kan etikette by CodeBuild-bronne voeg, wysig of verwyder, wat jou organisasie se koste-allokasie, hulpbronopsporing en toegangsbeheerbeleid op grond van etikette kan ontwrig.
```bash
aws codebuild tag-resource --resource-arn <value> --tags <value>
aws codebuild untag-resource --resource-arn <value> --tag-keys <value>
```
**Potensi√´le Impak**: Versteuring van koste-toewysing, hulpbronopsporing, en toegangsbeheerbeleid gebaseer op etikette.

### `codebuild:DeleteSourceCredentials`

'n Aanvaller kan bronlegitimasie vir 'n Git-opberging verwyder, wat die normale werking van programme wat op die opberging staatmaak, kan be√Ønvloed.
```sql
aws codebuild delete-source-credentials --arn <value>
```
**Potensi√´le Impak**: Verstoring van normale funksionering vir toepassings wat staatmaak op die betrokke bewaarplek as gevolg van die verwydering van bronlegitimasie.

<details>

<summary><strong>Leer AWS-hacking van nul tot held met</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Ander maniere om HackTricks te ondersteun:

* As jy wil sien dat jou **maatskappy geadverteer word in HackTricks** of **HackTricks aflaai in PDF-formaat**, kyk na die [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Kry die [**amptelike PEASS & HackTricks-uitrusting**](https://peass.creator-spring.com)
* Ontdek [**The PEASS Family**](https://opensea.io/collection/the-peass-family), ons versameling eksklusiewe [**NFT's**](https://opensea.io/collection/the-peass-family)
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Deel jou hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslagplekke.

</details>
