# Serverless.com ë³´ì•ˆ

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **[**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.**

</details>
{% endhint %}

## ê¸°ë³¸ ì •ë³´

### ì¡°ì§

**ì¡°ì§**ì€ Serverless Framework ìƒíƒœê³„ ë‚´ì—ì„œ ê°€ì¥ ë†’ì€ ìˆ˜ì¤€ì˜ ì—”í„°í‹°ì…ë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸, íŒ€ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í¬í•¨í•˜ëŠ” íšŒì‚¬, ë¶€ì„œ ë˜ëŠ” ê¸°íƒ€ ëŒ€ê·œëª¨ ì—”í„°í‹°ì™€ ê°™ì€ **ì§‘ë‹¨ ê·¸ë£¹**ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### íŒ€

**íŒ€**ì€ ì¡°ì§ ë‚´ì—ì„œ ì ‘ê·¼ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë“¤ì…ë‹ˆë‹¤. íŒ€ì€ ì—­í• ì— ë”°ë¼ êµ¬ì„±ì›ì„ ì¡°ì§í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. **`í˜‘ë ¥ì`**ëŠ” ê¸°ì¡´ ì•±ì„ ë³´ê³  ë°°í¬í•  ìˆ˜ ìˆìœ¼ë©°, **`ê´€ë¦¬ì`**ëŠ” ìƒˆë¡œìš´ ì•±ì„ ìƒì„±í•˜ê³  ì¡°ì§ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì• í”Œë¦¬ì¼€ì´ì…˜

**ì•±**ì€ ì¡°ì§ ë‚´ ê´€ë ¨ ì„œë¹„ìŠ¤ì˜ ë…¼ë¦¬ì  ê·¸ë£¹í™”ì…ë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ëœ ì™„ì „í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‚˜íƒ€ë‚´ë©°, ì´ ì„œë¹„ìŠ¤ë“¤ì€ í•¨ê»˜ ì‘ë™í•˜ì—¬ ì¼ê´€ëœ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### **ì„œë¹„ìŠ¤**

**ì„œë¹„ìŠ¤**ëŠ” ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì´ëŠ” ì „ì²´ ì„œë²„ë¦¬ìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ë©°, í•„ìš”í•œ ëª¨ë“  í•¨ìˆ˜, êµ¬ì„± ë° ë¦¬ì†ŒìŠ¤ë¥¼ ìº¡ìŠí™”í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ `serverless.yml` íŒŒì¼ì— ì •ì˜ë˜ë©°, ì„œë¹„ìŠ¤ì—ëŠ” ì„œë¹„ìŠ¤ ì´ë¦„, ì œê³µì êµ¬ì„±, í•¨ìˆ˜, ì´ë²¤íŠ¸, ë¦¬ì†ŒìŠ¤, í”ŒëŸ¬ê·¸ì¸ ë° ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜ì™€ ê°™ì€ ë©”íƒ€ë°ì´í„°ê°€ í¬í•¨ë©ë‹ˆë‹¤.
```yaml
service: my-service
provider:
name: aws
runtime: nodejs14.x
functions:
hello:
handler: handler.hello
```
<details>

<summary>Function</summary>

A **Function**ëŠ” AWS Lambda í•¨ìˆ˜ì™€ ê°™ì€ ë‹¨ì¼ ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ë²¤íŠ¸ì— ì‘ë‹µí•˜ì—¬ ì‹¤í–‰ë˜ëŠ” ì½”ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

`serverless.yml`ì˜ `functions` ì„¹ì…˜ ì•„ë˜ì— ì •ì˜ë˜ë©°, í•¸ë“¤ëŸ¬, ëŸ°íƒ€ì„, ì´ë²¤íŠ¸, í™˜ê²½ ë³€ìˆ˜ ë° ê¸°íƒ€ ì„¤ì •ì„ ì§€ì •í•©ë‹ˆë‹¤.
```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
```
</details>

<details>

<summary>ì´ë²¤íŠ¸</summary>

**ì´ë²¤íŠ¸**ëŠ” ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” íŠ¸ë¦¬ê±°ì…ë‹ˆë‹¤. ì´ë“¤ì€ í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ ê·¸ë¦¬ê³  ì–¸ì œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

ì¼ë°˜ì ì¸ ì´ë²¤íŠ¸ ìœ í˜•ì—ëŠ” HTTP ìš”ì²­, ì˜ˆì•½ëœ ì´ë²¤íŠ¸(í¬ë¡  ì‘ì—…), ë°ì´í„°ë² ì´ìŠ¤ ì´ë²¤íŠ¸, íŒŒì¼ ì—…ë¡œë“œ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤.
```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
- schedule:
rate: rate(10 minutes)
```
</details>

<details>

<summary>ë¦¬ì†ŒìŠ¤</summary>

**ë¦¬ì†ŒìŠ¤**ëŠ” ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€ ë²„í‚· ë˜ëŠ” IAM ì—­í• ê³¼ ê°™ì´ ì„œë¹„ìŠ¤ê°€ ì˜ì¡´í•˜ëŠ” ì¶”ê°€ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ì˜í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

ì´ë“¤ì€ `resources` ì„¹ì…˜ ì•„ë˜ì— ì§€ì •ë˜ë©°, ì¢…ì¢… AWSì˜ CloudFormation êµ¬ë¬¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
```yaml
resources:
Resources:
MyDynamoDBTable:
Type: AWS::DynamoDB::Table
Properties:
TableName: my-table
AttributeDefinitions:
- AttributeName: id
AttributeType: S
KeySchema:
- AttributeName: id
KeyType: HASH
ProvisionedThroughput:
ReadCapacityUnits: 1
WriteCapacityUnits: 1
```
</details>

<details>

<summary>Provider</summary>

**Provider** ê°ì²´ëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì œê³µì—…ì²´(ì˜ˆ: AWS, Azure, Google Cloud)ë¥¼ ì§€ì •í•˜ê³  í•´ë‹¹ ì œê³µì—…ì²´ì™€ ê´€ë ¨ëœ êµ¬ì„± ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.

ì—¬ê¸°ì—ëŠ” ëŸ°íƒ€ì„, ì§€ì—­, ë‹¨ê³„ ë° ìê²© ì¦ëª…ê³¼ ê°™ì€ ì„¸ë¶€ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤.
```yaml
yamlCopy codeprovider:
name: aws
runtime: nodejs14.x
region: us-east-1
stage: dev
```
</details>

<details>

<summary>ë‹¨ê³„ ë° ì§€ì—­</summary>

ë‹¨ê³„ëŠ” ì„œë¹„ìŠ¤ê°€ ë°°í¬ë  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ í™˜ê²½(ì˜ˆ: ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜)ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ëŠ” í™˜ê²½ë³„ êµ¬ì„± ë° ë°°í¬ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
```yaml
provider:
stage: dev
```
ì§€ì—­ì€ ë¦¬ì†ŒìŠ¤ê°€ ë°°í¬ë  ì§€ë¦¬ì  ì§€ì—­ì„ ì§€ì •í•©ë‹ˆë‹¤. ì´ëŠ” ì§€ì—° ì‹œê°„, ê·œì • ì¤€ìˆ˜ ë° ê°€ìš©ì„± ê³ ë ¤ ì‚¬í•­ì— ì¤‘ìš”í•©ë‹ˆë‹¤.
```yaml
provider:
region: us-west-2
```
</details>

<details>

<summary>í”ŒëŸ¬ê·¸ì¸</summary>

**í”ŒëŸ¬ê·¸ì¸**ì€ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë„êµ¬ ë° ì„œë¹„ìŠ¤ì™€ í†µí•©í•˜ì—¬ Serverless Frameworkì˜ ê¸°ëŠ¥ì„ í™•ì¥í•©ë‹ˆë‹¤. ì´ë“¤ì€ `plugins` ì„¹ì…˜ ì•„ë˜ì— ì •ì˜ë˜ë©° npmì„ í†µí•´ ì„¤ì¹˜ë©ë‹ˆë‹¤.
```yaml
plugins:
- serverless-offline
- serverless-webpack
```
</details>

<details>

<summary>Layers</summary>

**Layers**ëŠ” ê³µìœ  ì½”ë“œë‚˜ ì¢…ì†ì„±ì„ í•¨ìˆ˜ì™€ ë³„ë„ë¡œ íŒ¨í‚¤ì§•í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ëŠ” ì¬ì‚¬ìš©ì„±ì„ ì´‰ì§„í•˜ê³  ë°°í¬ íŒ¨í‚¤ì§€ í¬ê¸°ë¥¼ ì¤„ì…ë‹ˆë‹¤. ì´ë“¤ì€ `layers` ì„¹ì…˜ ì•„ë˜ì— ì •ì˜ë˜ë©° í•¨ìˆ˜ì— ì˜í•´ ì°¸ì¡°ë©ë‹ˆë‹¤.
```yaml
layers:
commonLibs:
path: layer-common
functions:
hello:
handler: handler.hello
layers:
- { Ref: CommonLibsLambdaLayer }
```
</details>

<details>

<summary>ë³€ìˆ˜ ë° ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜</summary>

**ë³€ìˆ˜**ëŠ” ë°°í¬ ì‹œì ì— í•´ê²°ë˜ëŠ” ìë¦¬ í‘œì‹œìë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì  êµ¬ì„±ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

*   **êµ¬ë¬¸:** `${variable}` êµ¬ë¬¸ì€ í™˜ê²½ ë³€ìˆ˜, íŒŒì¼ ë‚´ìš© ë˜ëŠ” ê¸°íƒ€ êµ¬ì„± ë§¤ê°œë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
functions:
hello:
handler: handler.hello
environment:
TABLE_NAME: ${self:custom.tableName}
```

-   **ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜:** `custom` ì„¹ì…˜ì€ `serverless.yml` ì „ë°˜ì— ê±¸ì³ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ì íŠ¹ì • ë³€ìˆ˜ ë° êµ¬ì„±ì„ ì •ì˜í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

```yaml
custom:
tableName: my-dynamodb-table
stage: ${opt:stage, 'dev'}
```

</details>

<details>

<summary>ì¶œë ¥</summary>

**ì¶œë ¥**ì€ ì„œë¹„ìŠ¤ê°€ ë°°í¬ëœ í›„ ë°˜í™˜ë˜ëŠ” ê°’ë“¤ì„ ì •ì˜í•˜ë©°, ë¦¬ì†ŒìŠ¤ ARN, ì—”ë“œí¬ì¸íŠ¸ ë˜ëŠ” ê¸°íƒ€ ìœ ìš©í•œ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤. ì´ë“¤ì€ `outputs` ì„¹ì…˜ ì•„ë˜ì— ì§€ì •ë˜ë©°, ì¢…ì¢… ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ì •ë³´ë¥¼ ë…¸ì¶œí•˜ê±°ë‚˜ ë°°í¬ í›„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì‚¬ìš©ë©ë‹ˆë‹¤.
```yaml
Â¡outputs:
ApiEndpoint:
Description: "API Gateway endpoint URL"
Value:
Fn::Join:
- ""
- - "https://"
- Ref: ApiGatewayRestApi
- ".execute-api."
- Ref: AWS::Region
- ".amazonaws.com/"
- Ref: AWS::Stage
```
</details>

<details>

<summary>IAM ì—­í•  ë° ê¶Œí•œ</summary>

**IAM ì—­í•  ë° ê¶Œí•œ**ì€ í•¨ìˆ˜ ë° ê¸°íƒ€ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë³´ì•ˆ ìê²© ì¦ëª…ê³¼ ì ‘ê·¼ ê¶Œí•œì„ ì •ì˜í•©ë‹ˆë‹¤. ì´ë“¤ì€ í•„ìš”í•œ ê¶Œí•œì„ ì§€ì •í•˜ê¸° ìœ„í•´ `provider` ë˜ëŠ” ê°œë³„ í•¨ìˆ˜ ì„¤ì •ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
```yaml
provider:
[...]
iam:
role:
statements:
- Effect: 'Allow'
Action:
- 'dynamodb:PutItem'
- 'dynamodb:Get*'
- 'dynamodb:Scan*'
- 'dynamodb:UpdateItem'
- 'dynamodb:DeleteItem'
Resource: arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:service}-customerTable-${sls:stage}
```
</details>

<details>

<summary>í™˜ê²½ ë³€ìˆ˜</summary>

**ë³€ìˆ˜**ëŠ” í•˜ë“œì½”ë”©í•˜ì§€ ì•Šê³ ë„ êµ¬ì„± ì„¤ì • ë° ë¹„ë°€ì„ í•¨ìˆ˜ì— ì „ë‹¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ë“¤ì€ ì œê³µì ë˜ëŠ” ê°œë³„ í•¨ìˆ˜ì˜ `environment` ì„¹ì…˜ ì•„ë˜ì— ì •ì˜ë©ë‹ˆë‹¤.
```yaml
provider:
environment:
STAGE: ${self:provider.stage}
functions:
hello:
handler: handler.hello
environment:
TABLE_NAME: ${self:custom.tableName}
```
</details>

<details>

<summary>Dependencies</summary>

**Dependencies**ëŠ” í•¨ìˆ˜ê°€ í•„ìš”ë¡œ í•˜ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ëª¨ë“ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ npm ë˜ëŠ” pipì™€ ê°™ì€ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ í†µí•´ ì²˜ë¦¬ë˜ë©°, `serverless-webpack`ê³¼ ê°™ì€ ë„êµ¬ë‚˜ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬ íŒ¨í‚¤ì§€ì™€ í•¨ê»˜ ë²ˆë“¤ë©ë‹ˆë‹¤.
```yaml
plugins:
- serverless-webpack
```
</details>

<details>

<summary>Hooks</summary>

**Hooks**ëŠ” ë°°í¬ ìƒì•  ì£¼ê¸°ì˜ íŠ¹ì • ì§€ì ì—ì„œ ì‚¬ìš©ì ì •ì˜ ìŠ¤í¬ë¦½íŠ¸ë‚˜ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ë“¤ì€ `serverless.yml` ë‚´ì—ì„œ ë˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ì „í›„ì— ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ ì •ì˜ë©ë‹ˆë‹¤.
```yaml
custom:
hooks:
before:deploy:deploy: echo "Starting deployment..."
```
</details>

### Tutorial

ì´ê²ƒì€ ê³µì‹ íŠœí† ë¦¬ì–¼ [**ë¬¸ì„œì—ì„œ**](https://www.serverless.com/framework/docs/tutorial)ì˜ ìš”ì•½ì…ë‹ˆë‹¤:

1. AWS ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤ (Serverless.comì€ AWS ì¸í”„ë¼ì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤)
2. serverless.comì— ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤
3. ì•±ì„ ìƒì„±í•©ë‹ˆë‹¤:
```bash
# Create temp folder for the tutorial
mkdir /tmp/serverless-tutorial
cd /tmp/serverless-tutorial

# Install Serverless cli
npm install -g serverless

# Generate template
serverless #Choose first one (AWS / Node.js / HTTP API)
## Indicate a name like "Tutorial"
## Login/Register
## Create A New App
## Indicate a name like "tutorialapp)
```
ì´ê²ƒì€ **app**ì„ `tutorialapp`ì´ë¼ê³  ìƒì„±í–ˆì–´ì•¼ í•˜ë©°, [serverless.com](serverless.com-security.md)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆê³ , `helloworld` ì½”ë“œê°€ í¬í•¨ëœ JS ì½”ë“œê°€ ìˆëŠ” **`handler.js`** íŒŒì¼ê³¼ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ëŠ” **`serverless.yml`** íŒŒì¼ì´ ìˆëŠ” `Tutorial`ì´ë¼ëŠ” í´ë”ë¥¼ ìƒì„±í–ˆì–´ì•¼ í•©ë‹ˆë‹¤:

{% tabs %}
{% tab title="handler.js" %}
```javascript
exports.hello = async (event) => {
return {
statusCode: 200,
body: JSON.stringify({
message: "Go Serverless v4! Your function executed successfully!",
}),
};
};
```
{% endtab %}

{% tab title="serverless.yml" %}
```yaml
# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: testing12342
# "app" enables Serverless Framework Dashboard features and sharing them with other Services.
app: tutorialapp
# "service" is the name of this project. This will also be added to your AWS resource names.
service: Tutorial

provider:
name: aws
runtime: nodejs20.x

functions:
hello:
handler: handler.hello
events:
- httpApi:
path: /
method: get
```
{% endtab %}
{% endtabs %}

4. **ëŒ€ì‹œë³´ë“œ**ì—ì„œ AWS ê³µê¸‰ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤: `https://app.serverless.com/<org name>/settings/providers?providerId=new&provider=aws`.
1. `serverless.com`ì— AWS ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ ì´ êµ¬ì„± íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í´ë¼ìš°ë“œí¬ë©”ì´ì…˜ ìŠ¤íƒì„ ì‹¤í–‰í•˜ë¼ëŠ” ìš”ì²­ì´ ìˆìŠµë‹ˆë‹¤ (ì´ ê¸€ì„ ì‘ì„±í•  ë‹¹ì‹œ): [https://serverless-framework-template.s3.amazonaws.com/roleTemplate.yml](https://serverless-framework-template.s3.amazonaws.com/roleTemplate.yml)
2. ì´ í…œí”Œë¦¿ì€ **`SFRole-<ID>`**ë¼ëŠ” ì—­í• ì„ ìƒì„±í•˜ë©°, **`arn:aws:iam::aws:policy/AdministratorAccess`**ë¥¼ ê³„ì •ì— ëŒ€í•´ ì„¤ì •í•˜ê³ , `Serverless.com` AWS ê³„ì •ì´ ì´ ì—­í• ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ì‹ ë¢° IDë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

<details>

<summary>Yaml roleTemplate</summary>
```yaml
Description: This stack creates an IAM role that can be used by Serverless Framework for use in deployments.
Resources:
SFRole:
Type: AWS::IAM::Role
Properties:
AssumeRolePolicyDocument:
Version: '2012-10-17'
Statement:
- Effect: Allow
Principal:
AWS: arn:aws:iam::486128539022:root
Action:
- sts:AssumeRole
Condition:
StringEquals:
sts:ExternalId: !Sub 'ServerlessFramework-${OrgUid}'
Path: /
RoleName: !Ref RoleName
ManagedPolicyArns:
- arn:aws:iam::aws:policy/AdministratorAccess
ReporterFunction:
Type: Custom::ServerlessFrameworkReporter
Properties:
ServiceToken: 'arn:aws:lambda:us-east-1:486128539022:function:sp-providers-stack-reporter-custom-resource-prod-tmen2ec'
OrgUid: !Ref OrgUid
RoleArn: !GetAtt SFRole.Arn
Alias: !Ref Alias
Outputs:
SFRoleArn:
Description: 'ARN for the IAM Role used by Serverless Framework'
Value: !GetAtt SFRole.Arn
Parameters:
OrgUid:
Description: Serverless Framework Org Uid
Type: String
Alias:
Description: Serverless Framework Provider Alias
Type: String
RoleName:
Description: Serverless Framework Role Name
Type: String
```
</details>

<details>

<summary>ì‹ ë¢° ê´€ê³„</summary>
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": "arn:aws:iam::486128539022:root"
},
"Action": "sts:AssumeRole",
"Condition": {
"StringEquals": {
"sts:ExternalId": "ServerlessFramework-7bf7ddef-e1bf-43eb-a111-4d43e0894ccb"
}
}
}
]
}
```
</details>

5. íŠœí† ë¦¬ì–¼ì—ì„œëŠ” `createCustomer.js` íŒŒì¼ì„ ìƒì„±í•˜ë¼ê³  ìš”ì²­í•˜ë©°, ì´ íŒŒì¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìƒì„±í•˜ê³ , `serverless.yml` íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ **ìƒˆë¡œìš´ DynamoDB í…Œì´ë¸”**ì„ ìƒì„±í•˜ê³ , **í™˜ê²½ ë³€ìˆ˜ë¥¼** ì •ì˜í•˜ë©°, ìƒì„±ëœ ëŒë‹¤ë¥¼ ì‚¬ìš©í•  ì—­í• ì„ ì„¤ì •í•˜ë¼ê³  ìš”ì²­í•©ë‹ˆë‹¤.

{% tabs %}
{% tab title="createCustomer.js" %}
```javascript
'use strict'
const AWS = require('aws-sdk')
module.exports.createCustomer = async (event) => {
const body = JSON.parse(Buffer.from(event.body, 'base64').toString())
const dynamoDb = new AWS.DynamoDB.DocumentClient()
const putParams = {
TableName: process.env.DYNAMODB_CUSTOMER_TABLE,
Item: {
primary_key: body.name,
email: body.email,
},
}
await dynamoDb.put(putParams).promise()
return {
statusCode: 201,
}
}
```
{% endtab %}

{% tab title="serverless.yml" %}
```yaml
# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: testing12342
# "app" enables Serverless Framework Dashboard features and sharing them with other Services.
app: tutorialapp
# "service" is the name of this project. This will also be added to your AWS resource names.
service: Tutorial

provider:
name: aws
runtime: nodejs20.x
environment:
DYNAMODB_CUSTOMER_TABLE: ${self:service}-customerTable-${sls:stage}
iam:
role:
statements:
- Effect: 'Allow'
Action:
- 'dynamodb:PutItem'
- 'dynamodb:Get*'
- 'dynamodb:Scan*'
- 'dynamodb:UpdateItem'
- 'dynamodb:DeleteItem'
Resource: arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:service}-customerTable-${sls:stage}

functions:
hello:
handler: handler.hello
events:
- httpApi:
path: /
method: get
createCustomer:
handler: createCustomer.createCustomer
events:
- httpApi:
path: /
method: post

resources:
Resources:
CustomerTable:
Type: AWS::DynamoDB::Table
Properties:
AttributeDefinitions:
- AttributeName: primary_key
AttributeType: S
BillingMode: PAY_PER_REQUEST
KeySchema:
- AttributeName: primary_key
KeyType: HASH
TableName: ${self:service}-customerTable-${sls:stage}
```
{% endtab %}
{% endtabs %}

6. **`serverless deploy`**ë¥¼ ì‹¤í–‰í•˜ì—¬ ë°°í¬í•©ë‹ˆë‹¤.
1. ë°°í¬ëŠ” CloudFormation Stackì„ í†µí•´ ìˆ˜í–‰ë©ë‹ˆë‹¤.
2. **ëŒë‹¤ í•¨ìˆ˜ëŠ” ì§ì ‘ URLì´ ì•„ë‹Œ API ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ ë…¸ì¶œë©ë‹ˆë‹¤.**
7. **í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.**
1. ì´ì „ ë‹¨ê³„ì—ì„œëŠ” API ì—”ë“œí¬ì¸íŠ¸ ëŒë‹¤ í•¨ìˆ˜ê°€ ë°°í¬ëœ **URL**ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

## Serverless.comì˜ ë³´ì•ˆ ê²€í† 

### **ì˜ëª» êµ¬ì„±ëœ IAM ì—­í•  ë° ê¶Œí•œ**

ê³¼ë„í•˜ê²Œ í—ˆìš©ëœ IAM ì—­í• ì€ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•˜ì—¬ ë°ì´í„° ìœ ì¶œ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ì¡°ì‘ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëŒë‹¤ í•¨ìˆ˜ì— ëŒ€í•œ ê¶Œí•œì´ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´, ë¡œê·¸ ìƒì„± ê¶Œí•œë§Œ ìˆëŠ” ì—­í• ì´ ìƒì„±ë©ë‹ˆë‹¤.
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Action": [
"logs:CreateLogStream",
"logs:CreateLogGroup",
"logs:TagResource"
],
"Resource": [
"arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/jito-cranker-scripts-dev*:*"
],
"Effect": "Allow"
},
{
"Action": [
"logs:PutLogEvents"
],
"Resource": [
"arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/jito-cranker-scripts-dev*:*:*"
],
"Effect": "Allow"
}
]
}
```
</details>

#### **ì™„í™” ì „ëµ**

*   **ìµœì†Œ ê¶Œí•œ ì›ì¹™:** ê° í•¨ìˆ˜ì— í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬í•©ë‹ˆë‹¤.

```yaml
provider:
[...]
iam:
role:
statements:
- Effect: 'Allow'
Action:
- 'dynamodb:PutItem'
- 'dynamodb:Get*'
- 'dynamodb:Scan*'
- 'dynamodb:UpdateItem'
- 'dynamodb:DeleteItem'
Resource: arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:service}-customerTable-${sls:stage}
```
* **ë³„ë„ì˜ ì—­í•  ì‚¬ìš©:** ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ì—­í• ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.

***

### **ì•ˆì „í•˜ì§€ ì•Šì€ ë¹„ë°€ ë° êµ¬ì„± ê´€ë¦¬**

ë¯¼ê°í•œ ì •ë³´(ì˜ˆ: API í‚¤, ë°ì´í„°ë² ì´ìŠ¤ ìê²© ì¦ëª…)ë¥¼ **`serverless.yml`** ë˜ëŠ” ì½”ë“œì— ì§ì ‘ ì €ì¥í•˜ë©´ ë¦¬í¬ì§€í† ë¦¬ê°€ ì†ìƒë  ê²½ìš° ë…¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì¶”ì²œë˜ëŠ”** ë°©ë²•ì€ serverless.comì˜ **`serverless.yml`** íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ `ssm` ë˜ëŠ” `s3` ê³µê¸‰ìë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” **ë°°í¬ ì‹œ ì´ëŸ¬í•œ ì†ŒìŠ¤ì—ì„œ í™˜ê²½ ê°’ì„ ê°€ì ¸ì˜¤ê³ ** **lambdas** í™˜ê²½ ë³€ìˆ˜ë¥¼ **ê°’ì´ ì—†ëŠ” í…ìŠ¤íŠ¸ë¡œ êµ¬ì„±**í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤!

{% hint style="danger" %}
ë”°ë¼ì„œ AWS ë‚´ì—ì„œ lambdas êµ¬ì„±ì„ ì½ì„ ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ” ì‚¬ëŒì€ **ëª¨ë“  ì´ëŸ¬í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ í‰ë¬¸ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**
{% endhint %}

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ ì˜ˆì œëŠ” SSMì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤:
```yaml
provider:
environment:
DB_PASSWORD: ${ssm:/aws/reference/secretsmanager/my-db-password~true}
```
And even if this prevents hardcoding the environment variable value in the **`serverless.yml`** file, the value will be obtained at deployment time and will be **added in clear text inside the lambda environment variable**.

{% hint style="success" %}
ì„œë²„ë¦¬ìŠ¤.comì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ê¶Œì¥ ë°©ë²•ì€ **AWS ë¹„ë°€ì— ì €ì¥**í•˜ê³  í™˜ê²½ ë³€ìˆ˜ì— ë¹„ë°€ ì´ë¦„ë§Œ ì €ì¥í•œ ë‹¤ìŒ **ëŒë‹¤ ì½”ë“œê°€ ì´ë¥¼ ìˆ˜ì§‘í•´ì•¼ í•©ë‹ˆë‹¤**.
{% endhint %}

#### **ì™„í™” ì „ëµ**

* **ë¹„ë°€ ê´€ë¦¬ì í†µí•©:** **AWS Secrets Manager**ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
* **ì•”í˜¸í™”ëœ ë³€ìˆ˜:** ë¯¼ê°í•œ ë°ì´í„°ì— ëŒ€í•´ Serverless Frameworkì˜ ì•”í˜¸í™” ê¸°ëŠ¥ì„ í™œìš©í•˜ì‹­ì‹œì˜¤.
* **ì•¡ì„¸ìŠ¤ ì œì–´:** ì—­í• ì— ë”°ë¼ ë¹„ë°€ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œí•œí•˜ì‹­ì‹œì˜¤.

***

### **ì·¨ì•½í•œ ì½”ë“œ ë° ì¢…ì†ì„±**

êµ¬ì‹ ë˜ëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ ì¢…ì†ì„±ì€ ì·¨ì•½ì ì„ ë„ì…í•  ìˆ˜ ìˆìœ¼ë©°, ë¶€ì ì ˆí•œ ì…ë ¥ ì²˜ë¦¬ëŠ” ì½”ë“œ ì£¼ì… ê³µê²©ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

*   **ì¢…ì†ì„± ê´€ë¦¬:** ì¢…ì†ì„±ì„ ì •ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ì·¨ì•½ì ì„ ìŠ¤ìº”í•˜ì‹­ì‹œì˜¤.

```yaml
plugins:
- serverless-webpack
- serverless-plugin-snyk
```
* **ì…ë ¥ ê²€ì¦:** ëª¨ë“  ì…ë ¥ì— ëŒ€í•´ ì—„ê²©í•œ ê²€ì¦ ë° ì •í™”ë¥¼ êµ¬í˜„í•˜ì‹­ì‹œì˜¤.
* **ì½”ë“œ ê²€í† :** ë³´ì•ˆ ê²°í•¨ì„ ì‹ë³„í•˜ê¸° ìœ„í•´ ì² ì €í•œ ê²€í† ë¥¼ ìˆ˜í–‰í•˜ì‹­ì‹œì˜¤.
* **ì •ì  ë¶„ì„:** ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë² ì´ìŠ¤ì˜ ì·¨ì•½ì ì„ ê°ì§€í•˜ì‹­ì‹œì˜¤.

***

### **ë¶€ì ì ˆí•œ ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§**

ì ì ˆí•œ ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ì´ ì—†ìœ¼ë©´ ì•…ì˜ì ì¸ í™œë™ì´ ê°ì§€ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, ì‚¬ê±´ ëŒ€ì‘ì´ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

*   **ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹…:** **AWS CloudWatch** ë˜ëŠ” **Datadog**ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ë¥¼ ì§‘ê³„í•˜ì‹­ì‹œì˜¤.

```yaml
plugins:
- serverless-plugin-datadog
```
* **ìƒì„¸ ë¡œê¹… í™œì„±í™”:** ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê³  í•„ìˆ˜ ì •ë³´ë¥¼ ìº¡ì²˜í•˜ì‹­ì‹œì˜¤.
* **ì•Œë¦¼ ì„¤ì •:** ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™ì´ë‚˜ ì´ìƒ ì§•í›„ì— ëŒ€í•œ ì•Œë¦¼ì„ êµ¬ì„±í•˜ì‹­ì‹œì˜¤.
* **ì •ê¸° ëª¨ë‹ˆí„°ë§:** ì ì¬ì ì¸ ë³´ì•ˆ ì‚¬ê±´ì— ëŒ€í•´ ë¡œê·¸ ë° ë©”íŠ¸ë¦­ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì‹­ì‹œì˜¤.

***

### **ì•ˆì „í•˜ì§€ ì•Šì€ API ê²Œì´íŠ¸ì›¨ì´ êµ¬ì„±**

ì—´ë ¤ ìˆê±°ë‚˜ ë¶€ì ì ˆí•˜ê²Œ ë³´í˜¸ëœ APIëŠ” ë¬´ë‹¨ ì•¡ì„¸ìŠ¤, ì„œë¹„ìŠ¤ ê±°ë¶€(DoS) ê³µê²© ë˜ëŠ” êµì°¨ ì‚¬ì´íŠ¸ ê³µê²©ì— ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

*   **ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬:** OAuth, API í‚¤ ë˜ëŠ” JWTì™€ ê°™ì€ ê°•ë ¥í•œ ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•˜ì‹­ì‹œì˜¤.

```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
authorizer: aws_iam
```
*   **ìš”ì²­ ì†ë„ ì œí•œ ë° ì¡°ì ˆ:** ìš”ì²­ ì†ë„ë¥¼ ì œí•œí•˜ì—¬ ë‚¨ìš©ì„ ë°©ì§€í•˜ì‹­ì‹œì˜¤.

```yaml
provider:
apiGateway:
throttle:
burstLimit: 200
rateLimit: 100
```
*   **ì•ˆì „í•œ CORS êµ¬ì„±:** í—ˆìš©ëœ ì¶œì²˜, ë©”ì„œë“œ ë° í—¤ë”ë¥¼ ì œí•œí•˜ì‹­ì‹œì˜¤.

```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
cors:
origin: https://yourdomain.com
headers:
- Content-Type
```
* **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½(WAF) ì‚¬ìš©:** ì•…ì˜ì ì¸ íŒ¨í„´ì— ëŒ€í•´ HTTP ìš”ì²­ì„ í•„í„°ë§í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ì‹­ì‹œì˜¤.

***

### **ë¶ˆì¶©ë¶„í•œ í•¨ìˆ˜ ê²©ë¦¬**

ê³µìœ  ë¦¬ì†ŒìŠ¤ì™€ ë¶ˆì¶©ë¶„í•œ ê²©ë¦¬ëŠ” ê¶Œí•œ ìƒìŠ¹ ë˜ëŠ” í•¨ìˆ˜ ê°„ì˜ ì˜ë„í•˜ì§€ ì•Šì€ ìƒí˜¸ ì‘ìš©ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

* **í•¨ìˆ˜ ê²©ë¦¬:** ë…ë¦½ì ì¸ ì‘ë™ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê³ ìœ í•œ ë¦¬ì†ŒìŠ¤ ë° IAM ì—­í• ì„ í• ë‹¹í•˜ì‹­ì‹œì˜¤.
* **ë¦¬ì†ŒìŠ¤ íŒŒí‹°ì…”ë‹:** ì„œë¡œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ëŒ€í•´ ë³„ë„ì˜ ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” ì €ì¥ì†Œ ë²„í‚·ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
*   **VPC ì‚¬ìš©:** í–¥ìƒëœ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ë¥¼ ìœ„í•´ ê°€ìƒ ì‚¬ì„¤ í´ë¼ìš°ë“œ ë‚´ì—ì„œ í•¨ìˆ˜ë¥¼ ë°°í¬í•˜ì‹­ì‹œì˜¤.

```yaml
provider:
vpc:
securityGroupIds:
- sg-xxxxxxxx
subnetIds:
- subnet-xxxxxx
```
* **í•¨ìˆ˜ ê¶Œí•œ ì œí•œ:** í•¨ìˆ˜ê°€ ëª…ì‹œì ìœ¼ë¡œ ìš”êµ¬ë˜ì§€ ì•ŠëŠ” í•œ ì„œë¡œì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê±°ë‚˜ ê°„ì„­í•  ìˆ˜ ì—†ë„ë¡ í•˜ì‹­ì‹œì˜¤.

***

### **ë¶ˆì¶©ë¶„í•œ ë°ì´í„° ë³´í˜¸**

ì •ì§€ ìƒíƒœ ë˜ëŠ” ì „ì†¡ ì¤‘ì¸ ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ë°ì´í„°ëŠ” ë…¸ì¶œë  ìˆ˜ ìˆìœ¼ë©°, ë°ì´í„° ìœ ì¶œ ë˜ëŠ” ë³€ì¡°ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

*   **ì •ì§€ ìƒíƒœ ë°ì´í„° ì•”í˜¸í™”:** í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì•”í˜¸í™” ê¸°ëŠ¥ì„ í™œìš©í•˜ì‹­ì‹œì˜¤.

```yaml
resources:
Resources:
MyDynamoDBTable:
Type: AWS::DynamoDB::Table
Properties:
SSESpecification:
SSEEnabled: true
```
* **ì „ì†¡ ì¤‘ ë°ì´í„° ì•”í˜¸í™”:** ëª¨ë“  ë°ì´í„° ì „ì†¡ì— ëŒ€í•´ HTTPS/TLSë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
* **API í†µì‹  ë³´ì•ˆ:** ì•”í˜¸í™” í”„ë¡œí† ì½œì„ ì‹œí–‰í•˜ê³  ì¸ì¦ì„œë¥¼ ê²€ì¦í•˜ì‹­ì‹œì˜¤.
* **ì•”í˜¸í™” í‚¤ ì•ˆì „í•˜ê²Œ ê´€ë¦¬:** ê´€ë¦¬í˜• í‚¤ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  í‚¤ë¥¼ ì •ê¸°ì ìœ¼ë¡œ êµì²´í•˜ì‹­ì‹œì˜¤.

***

### **ì ì ˆí•œ ì˜¤ë¥˜ ì²˜ë¦¬ ë¶€ì¡±**

ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ì¸í”„ë¼ ë˜ëŠ” ì½”ë“œë² ì´ìŠ¤ì— ëŒ€í•œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶©ëŒë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

*   **ì¼ë°˜ ì˜¤ë¥˜ ë©”ì‹œì§€:** ì˜¤ë¥˜ ì‘ë‹µì—ì„œ ë‚´ë¶€ ì„¸ë¶€ ì •ë³´ë¥¼ ë…¸ì¶œí•˜ì§€ ë§ˆì‹­ì‹œì˜¤.

```javascript
javascriptCopy code// Example in Node.js
exports.hello = async (event) => {
try {
// Function logic
} catch (error) {
console.error(error);
return {
statusCode: 500,
body: JSON.stringify({ message: 'Internal Server Error' }),
};
}
};
```
* **ì¤‘ì•™ ì§‘ì¤‘ì‹ ì˜¤ë¥˜ ì²˜ë¦¬:** ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì˜¤ë¥˜ë¥¼ ì¼ê´€ë˜ê²Œ ê´€ë¦¬í•˜ê³  ì •í™”í•˜ì‹­ì‹œì˜¤.
* **ì˜¤ë¥˜ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…:** ì„¸ë¶€ ì •ë³´ë¥¼ ìµœì¢… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œí•˜ì§€ ì•Šê³  ë‚´ë¶€ì ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ì¶”ì í•˜ê³  ë¶„ì„í•˜ì‹­ì‹œì˜¤.

***

### **ì•ˆì „í•˜ì§€ ì•Šì€ ë°°í¬ ê´€í–‰**

ë…¸ì¶œëœ ë°°í¬ êµ¬ì„± ë˜ëŠ” CI/CD íŒŒì´í”„ë¼ì¸ì— ëŒ€í•œ ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ëŠ” ì•…ì˜ì ì¸ ì½”ë“œ ë°°í¬ ë˜ëŠ” ì˜ëª»ëœ êµ¬ì„±ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

* **ì•ˆì „í•œ CI/CD íŒŒì´í”„ë¼ì¸:** ì—„ê²©í•œ ì•¡ì„¸ìŠ¤ ì œì–´, ë‹¤ë‹¨ê³„ ì¸ì¦(MFA) ë° ì •ê¸° ê°ì‚¬ êµ¬í˜„í•˜ì‹­ì‹œì˜¤.
* **êµ¬ì„±ì„ ì•ˆì „í•˜ê²Œ ì €ì¥:** ë°°í¬ íŒŒì¼ì—ì„œ í•˜ë“œì½”ë”©ëœ ë¹„ë°€ ë° ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì œê±°í•˜ì‹­ì‹œì˜¤.
* **ì½”ë“œë¡œì„œì˜ ì¸í”„ë¼(IaC) ë³´ì•ˆ ë„êµ¬ ì‚¬ìš©:** **Checkov** ë˜ëŠ” **Terraform Sentinel**ê³¼ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆ ì •ì±…ì„ ì‹œí–‰í•˜ì‹­ì‹œì˜¤.
* **ë¶ˆë³€ ë°°í¬:** ë¶ˆë³€ ì¸í”„ë¼ ê´€í–‰ì„ ì±„íƒí•˜ì—¬ ë°°í¬ í›„ ë¬´ë‹¨ ë³€ê²½ì„ ë°©ì§€í•˜ì‹­ì‹œì˜¤.

***

### **í”ŒëŸ¬ê·¸ì¸ ë° í™•ì¥ í”„ë¡œê·¸ë¨ì˜ ì·¨ì•½ì **

ê²€ì¦ë˜ì§€ ì•Šê±°ë‚˜ ì•…ì˜ì ì¸ ì œ3ì í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ ì„œë²„ë¦¬ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì·¨ì•½ì ì„ ë„ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

* **í”ŒëŸ¬ê·¸ì¸ ì² ì €íˆ ê²€í† :** í†µí•© ì „ì— í”ŒëŸ¬ê·¸ì¸ì˜ ë³´ì•ˆì„ í‰ê°€í•˜ê³  í‰íŒì´ ì¢‹ì€ ì¶œì²˜ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì„ í˜¸í•˜ì‹­ì‹œì˜¤.
* **í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš© ì œí•œ:** ê³µê²© í‘œë©´ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë§Œ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
* **í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ëª¨ë‹ˆí„°ë§:** ë³´ì•ˆ íŒ¨ì¹˜ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ í”ŒëŸ¬ê·¸ì¸ì„ ì—…ë°ì´íŠ¸í•˜ì‹­ì‹œì˜¤.
* **í”ŒëŸ¬ê·¸ì¸ í™˜ê²½ ê²©ë¦¬:** ì ì¬ì ì¸ ì†ìƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í”ŒëŸ¬ê·¸ì¸ì„ ê²©ë¦¬ëœ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤.

***

### **ë¯¼ê°í•œ ì—”ë“œí¬ì¸íŠ¸ ë…¸ì¶œ**

ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ í•¨ìˆ˜ ë˜ëŠ” ì œí•œ ì—†ëŠ” APIëŠ” ë¬´ë‹¨ ì‘ì—…ì— ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

* **í•¨ìˆ˜ ì ‘ê·¼ ì œí•œ:** VPC, ë³´ì•ˆ ê·¸ë£¹ ë° ë°©í™”ë²½ ê·œì¹™ì„ ì‚¬ìš©í•˜ì—¬ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¶œì²˜ë¡œì˜ ì ‘ê·¼ì„ ì œí•œí•˜ì‹­ì‹œì˜¤.
* **ê°•ë ¥í•œ ì¸ì¦ êµ¬í˜„:** ëª¨ë“  ë…¸ì¶œëœ ì—”ë“œí¬ì¸íŠ¸ê°€ ì ì ˆí•œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìš”êµ¬í•˜ë„ë¡ í•˜ì‹­ì‹œì˜¤.
* **API ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©:** API ê²Œì´íŠ¸ì›¨ì´ë¥¼ êµ¬ì„±í•˜ì—¬ ì…ë ¥ ê²€ì¦ ë° ì†ë„ ì œí•œì„ í¬í•¨í•œ ë³´ì•ˆ ì •ì±…ì„ ì‹œí–‰í•˜ì‹­ì‹œì˜¤.
* **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì—”ë“œí¬ì¸íŠ¸ ë¹„í™œì„±í™”:** ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¹„í™œì„±í™”í•˜ì‹­ì‹œì˜¤.

***

### **íŒ€ì› ë° ì™¸ë¶€ í˜‘ë ¥ìì— ëŒ€í•œ ê³¼ë„í•œ ê¶Œí•œ**

íŒ€ì› ë° ì™¸ë¶€ í˜‘ë ¥ìì—ê²Œ ê³¼ë„í•œ ê¶Œí•œì„ ë¶€ì—¬í•˜ë©´ ë¬´ë‹¨ ì•¡ì„¸ìŠ¤, ë°ì´í„° ìœ ì¶œ ë° ë¦¬ì†ŒìŠ¤ ë‚¨ìš©ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìœ„í—˜ì€ ì—¬ëŸ¬ ê°œì¸ì´ ë‹¤ì–‘í•œ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ë¥¼ ê°–ëŠ” í™˜ê²½ì—ì„œ ì¦ê°€í•˜ì—¬ ê³µê²© í‘œë©´ê³¼ ë‚´ë¶€ ìœ„í˜‘ì˜ ê°€ëŠ¥ì„±ì„ ë†’ì…ë‹ˆë‹¤.

#### **ì™„í™” ì „ëµ**

* **ìµœì†Œ ê¶Œí•œ ì›ì¹™:** íŒ€ì› ë° í˜‘ë ¥ìê°€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ê¶Œí•œë§Œ ê°–ë„ë¡ í•˜ì‹­ì‹œì˜¤.

***

### **ì•¡ì„¸ìŠ¤ í‚¤ ë° ë¼ì´ì„¼ìŠ¤ í‚¤ ë³´ì•ˆ**

**ì•¡ì„¸ìŠ¤ í‚¤** ë° **ë¼ì´ì„¼ìŠ¤ í‚¤**ëŠ” Serverless Framework CLIì™€ì˜ ìƒí˜¸ ì‘ìš©ì„ ì¸ì¦í•˜ê³  ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì¤‘ìš”í•œ ìê²© ì¦ëª…ì…ë‹ˆë‹¤.

* **ë¼ì´ì„¼ìŠ¤ í‚¤:** CLIë¥¼ í†µí•´ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” Serverless Framework ë²„ì „ 4ì— ëŒ€í•œ ì¸ì¦ì— í•„ìš”í•œ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤.
* **ì•¡ì„¸ìŠ¤ í‚¤:** Serverless Framework Dashboardì™€ ì¸ì¦í•˜ê¸° ìœ„í•´ Serverless Framework CLIê°€ ì‚¬ìš©í•˜ëŠ” ìê²© ì¦ëª…ì…ë‹ˆë‹¤. `serverless` clië¡œ ë¡œê·¸ì¸í•  ë•Œ ì•¡ì„¸ìŠ¤ í‚¤ê°€ **ìƒì„±ë˜ì–´ ë…¸íŠ¸ë¶ì— ì €ì¥ë©ë‹ˆë‹¤**. ë˜í•œ `SERVERLESS_ACCESS_KEY`ë¼ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ë³´ì•ˆ ìœ„í—˜**

1. **ì½”ë“œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•œ ë…¸ì¶œ:**
* ì•¡ì„¸ìŠ¤ í‚¤ ë° ë¼ì´ì„¼ìŠ¤ í‚¤ë¥¼ í•˜ë“œì½”ë”©í•˜ê±°ë‚˜ ì‹¤ìˆ˜ë¡œ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì— ì»¤ë°‹í•˜ë©´ ë¬´ë‹¨ ì•¡ì„¸ìŠ¤ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ì•ˆì „í•˜ì§€ ì•Šì€ ì €ì¥:**
* ì ì ˆí•œ ì•”í˜¸í™” ì—†ì´ í™˜ê²½ ë³€ìˆ˜ë‚˜ êµ¬ì„± íŒŒì¼ì— í‰ë¬¸ìœ¼ë¡œ í‚¤ë¥¼ ì €ì¥í•˜ë©´ ìœ ì¶œ ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.
3. **ë¶€ì ì ˆí•œ ë°°í¬:**
* ì•ˆì „í•˜ì§€ ì•Šì€ ì±„ë„(ì˜ˆ: ì´ë©”ì¼, ì±„íŒ…)ì„ í†µí•´ í‚¤ë¥¼ ê³µìœ í•˜ë©´ ì•…ì˜ì ì¸ í–‰ìœ„ìì— ì˜í•´ ê°€ë¡œì±„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **íšŒì „ ë¶€ì¡±:**
* í‚¤ë¥¼ ì •ê¸°ì ìœ¼ë¡œ íšŒì „í•˜ì§€ ì•Šìœ¼ë©´ í‚¤ê°€ ì†ìƒëœ ê²½ìš° ë…¸ì¶œ ê¸°ê°„ì´ ì—°ì¥ë©ë‹ˆë‹¤.
5. **ê³¼ë„í•œ ê¶Œí•œ:**
* ê´‘ë²”ìœ„í•œ ê¶Œí•œì„ ê°€ì§„ í‚¤ëŠ” ì—¬ëŸ¬ ë¦¬ì†ŒìŠ¤ì—ì„œ ë¬´ë‹¨ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì•…ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop) í™•ì¸í•˜ê¸°!
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜ **Twitter**ì—ì„œ **íŒ”ë¡œìš°**í•˜ì„¸ìš” ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **HackTricks** ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŒì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
