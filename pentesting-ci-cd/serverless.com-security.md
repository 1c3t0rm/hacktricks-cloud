# Serverless.com Security

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

### Organization

**Organizacija** je entitet najvi코eg nivoa unutar Serverless Framework ekosistema. Predstavlja **kolektivnu grupu**, kao 코to su kompanija, odeljenje ili bilo koji veliki entitet, koji obuhvata vi코e projekata, timova i aplikacija.

### Team

**Tim** su korisnici sa pristupom unutar organizacije. Timovi poma쬿 u organizovanju 캜lanova na osnovu uloga. **`Saradnici`** mogu da pregledaju i implementiraju postoje캖e aplikacije, dok **`Administratori`** mogu da kreiraju nove aplikacije i upravljaju pode코avanjima organizacije.

### Application

**Aplikacija** je logi캜ko grupisanje povezanih usluga unutar organizacije. Predstavlja kompletnu aplikaciju sastavljenu od vi코e serverless usluga koje rade zajedno kako bi pru쬴le koherentnu funkcionalnost.

### **Services**

**Usluga** je osnovna komponenta serverless aplikacije. Predstavlja ceo va코 serverless projekat, obuhvataju캖i sve funkcije, konfiguracije i resurse koji su potrebni. Obi캜no je definisana u `serverless.yml` datoteci, usluga uklju캜uje metapodatke kao 코to su naziv usluge, konfiguracije provajdera, funkcije, doga캠aje, resurse, dodatke i prilago캠ene varijable.
```yaml
service: my-service
provider:
name: aws
runtime: nodejs14.x
functions:
hello:
handler: handler.hello
```
<details>

<summary>Funkcija</summary>

**Funkcija** predstavlja jednu serverless funkciju, kao 코to je AWS Lambda funkcija. Sadr쬴 kod koji se izvr코ava kao odgovor na doga캠aje.

Definira se u odeljku `functions` u `serverless.yml`, specificiraju캖i handler, runtime, doga캠aje, promenljive okru쬰nja i druge postavke.
```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
```
</details>

<details>

<summary>햆쮏햟뉋썜</summary>

**햆쮏햟뉋썜떓** 혜혞 혝햦햡햣햦 햨쮐떓 햟햨혝햦쒫쟴햟혲혞 쒫썜걣 혜햣쒫왐햩햣혜혜 혟혞햫햨혡햦혲햣. 뤯쫧 햢햣혟햦햫햦혣혞 햨햟햨 햦 햨햟햢햟 혟혞햫햨혡햦혲햟 혝햣햠햟 햢햟 혜햣 햦향쒬혣햦.

햒쮏쐃쟴햟혲햣햫햦 혝햦쮏쒫 햢쮏햟뉋썜떓 혞햨혳혞혢혞혲혞 HTTP 향햟혠혝햣쒫, 향햟햨햟향햟햫햣 햢쮏햟뉋썜떓 (cron 쮐햩쮏쒫), 햢쮏햟뉋썜떓 햠햟향햣 쮏얧썜햟햨햟, 혞혢햦혝햟쒫썜뛣 햢햟혝쮐햣햨햟 햦 혲쮐 햪햫쮏 혝쮏햟.
```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
- schedule:
rate: rate(10 minutes)
```
</details>

<details>

<summary>Resursi</summary>

**Resursi** vam omogu캖avaju da defini코ete dodatne cloud resurse na kojima va코a usluga zavisi, kao 코to su baze podataka, skladi코ni bucket-i ili IAM uloge.

Oni se defini코u u okviru `resources` sekcije, 캜esto koriste캖i CloudFormation sintaksu za AWS.
```yaml
resources:
Resources:
MyDynamoDBTable:
Type: AWS::DynamoDB::Table
Properties:
TableName: my-table
AttributeDefinitions:
- AttributeName: id
AttributeType: S
KeySchema:
- AttributeName: id
KeyType: HASH
ProvisionedThroughput:
ReadCapacityUnits: 1
WriteCapacityUnits: 1
```
</details>

<details>

<summary>Provajder</summary>

Objekat **Provajder** specificira provajdera cloud usluga (npr., AWS, Azure, Google Cloud) i sadr쬴 konfiguracione postavke relevantne za tog provajdera.

Uklju캜uje detalje kao 코to su runtime, region, stage i kredencijali.
```yaml
yamlCopy codeprovider:
name: aws
runtime: nodejs14.x
region: us-east-1
stage: dev
```
</details>

<details>

<summary>Faza i Region</summary>

Faza predstavlja razli캜ite okru쬰nja (npr., razvoj, testiranje, proizvodnja) gde va코a usluga mo쬰 biti postavljena. Omogu캖ava konfiguracije i postavke specifi캜ne za okru쬰nje.
```yaml
provider:
stage: dev
```
Region defini코e geografsku oblast u kojoj 캖e va코i resursi biti postavljeni. To je va쬹o za latenciju, uskla캠enost i dostupnost.
```yaml
provider:
region: us-west-2
```
</details>

<details>

<summary>Plugins</summary>

**Plugins** pro코iruju funkcionalnost Serverless Framework-a dodavanjem novih funkcija ili integracijom sa drugim alatima i uslugama. Defini코u se u `plugins` sekciji i instaliraju putem npm-a.
```yaml
plugins:
- serverless-offline
- serverless-webpack
```
</details>

<details>

<summary>Layers</summary>

**Layers** vam omogu캖avaju da pakujete i upravljate deljenim kodom ili zavisnostima odvojeno od va코ih funkcija. Ovo promovi코e ponovnu upotrebu i smanjuje veli캜ine paketa za implementaciju. Defini코u se u `layers` sekciji i pozivaju se iz funkcija.
```yaml
layers:
commonLibs:
path: layer-common
functions:
hello:
handler: handler.hello
layers:
- { Ref: CommonLibsLambdaLayer }
```
</details>

<details>

<summary>Promenljive i Prilago캠ene Promenljive</summary>

**Promenljive** omogu캖avaju dinami캜ku konfiguraciju omogu캖avaju캖i kori코캖enje mesta za zamenu koja se re코avaju u vreme implementacije.

*   **Sintaksa:** `${variable}` sintaksa mo쬰 referencirati promenljive okru쬰nja, sadr쬬j datoteka ili druge parametre konfiguracije.

```yaml
functions:
hello:
handler: handler.hello
environment:
TABLE_NAME: ${self:custom.tableName}
```

-   **Prilago캠ene Promenljive:** `custom` sekcija se koristi za definisanje korisni캜kih promenljivih i konfiguracija koje se mogu ponovo koristiti kroz `serverless.yml`.

```yaml
custom:
tableName: my-dynamodb-table
stage: ${opt:stage, 'dev'}
```

</details>

<details>

<summary>Izlazi</summary>

**Izlazi** defini코u vrednosti koje se vra캖aju nakon 코to je usluga implementirana, kao 코to su ARNs resursa, krajnje ta캜ke ili druge korisne informacije. Oni se specificiraju u `outputs` sekciji i 캜esto se koriste za izlaganje informacija drugim uslugama ili za lak pristup nakon implementacije.
```yaml
춰outputs:
ApiEndpoint:
Description: "API Gateway endpoint URL"
Value:
Fn::Join:
- ""
- - "https://"
- Ref: ApiGatewayRestApi
- ".execute-api."
- Ref: AWS::Region
- ".amazonaws.com/"
- Ref: AWS::Stage
```
</details>

<details>

<summary>IAM Uloge i Dozvole</summary>

**IAM Uloge i Dozvole** defini코u bezbednosne akreditive i prava pristupa za va코e funkcije i druge resurse. Upravljaju se pod `provider` ili pode코avanjima pojedina캜nih funkcija kako bi se odredile potrebne dozvole.
```yaml
provider:
iamRoleStatements:
- Effect: Allow
Action:
- dynamodb:Query
- dynamodb:Scan
Resource: arn:aws:dynamodb:${self:provider.region}:*:table/my-table
```
</details>

<details>

<summary>Promenljive okru쬰nja</summary>

**Promenljive** vam omogu캖avaju da prosledite pode코avanja konfiguracije i tajne va코im funkcijama bez hardkodiranja. Definisane su u `environment` sekciji za provajdera ili pojedina캜ne funkcije.
```yaml
provider:
environment:
STAGE: ${self:provider.stage}
functions:
hello:
handler: handler.hello
environment:
TABLE_NAME: ${self:custom.tableName}
```
</details>

<details>

<summary>Zavisnosti</summary>

**Zavisnosti** upravljaju spoljnim bibliotekama i modulima koje va코e funkcije zahtevaju. Obi캜no se upravlja putem menad쬰ra paketa kao 코to su npm ili pip, i paketu za implementaciju se dodaju koriste캖i alate ili dodatke kao 코to je `serverless-webpack`.
```yaml
plugins:
- serverless-webpack
```
</details>

<details>

<summary>Hooks</summary>

**Hooks** omogu캖avaju vam da pokrenete prilago캠ene skripte ili komande u odre캠enim ta캜kama u 쬴votnom ciklusu implementacije. Defini코u se kori코캖enjem dodataka ili unutar `serverless.yml` da bi se izvr코ile radnje pre ili posle implementacija.
```yaml
custom:
hooks:
before:deploy:deploy: echo "Starting deployment..."
```
</details>

### Tutorial

Ovo je sa쬰tak zvani캜nog tutorijala [**iz dokumentacije**](https://www.serverless.com/framework/docs/tutorial):

1. Kreirajte AWS nalog (Serverless.com po캜inje u AWS infrastrukturi)
2. Kreirajte nalog na serverless.com
3. Kreirajte aplikaciju:
```bash
# Create temp folder for the tutorial
mkdir /tmp/serverless-tutorial
cd /tmp/serverless-tutorial

# Install Serverless cli
npm install -g serverless

# Generate template
serverless #Choose first one (AWS / Node.js / HTTP API)
## Indicate a name like "Tutorial"
## Login/Register
## Create A New App
## Indicate a name like "tutorialapp)
```
Ovo bi trebalo da kreira **aplikaciju** pod nazivom `tutorialapp` koju mo쬰te proveriti na [serverless.com](serverless.com-security.md) i folder pod nazivom `Tutorial` sa datotekom **`handler.js`** koja sadr쬴 neki JS kod sa `helloworld` kodom i datotekom **`serverless.yml`** koja deklarira tu funkciju:

{% tabs %}
{% tab title="handler.js" %}
```javascript
exports.hello = async (event) => {
return {
statusCode: 200,
body: JSON.stringify({
message: "Go Serverless v4! Your function executed successfully!",
}),
};
};
```
{% endtab %}

{% tab title="serverless.yml" %}
```yaml
# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: testing12342
# "app" enables Serverless Framework Dashboard features and sharing them with other Services.
app: tutorialapp
# "service" is the name of this project. This will also be added to your AWS resource names.
service: Tutorial

provider:
name: aws
runtime: nodejs20.x

functions:
hello:
handler: handler.hello
events:
- httpApi:
path: /
method: get
```
{% endtab %}
{% endtabs %}

4. Kreirajte AWS provajder tako 코to 캖ete oti캖i na **dashboard** na `https://app.serverless.com/<org name>/settings/providers?providerId=new&provider=aws`.
1. Da biste dali `serverless.com` pristup AWS-u, bi캖e zatra쬰no da pokrenete cloudformation stack koriste캖i ovu konfiguracionu datoteku (u vreme pisanja ovog teksta): [https://serverless-framework-template.s3.amazonaws.com/roleTemplate.yml](https://serverless-framework-template.s3.amazonaws.com/roleTemplate.yml)
2. Ova 코ablon generi코e ulogu pod nazivom **`SFRole-<ID>`** sa **`arn:aws:iam::aws:policy/AdministratorAccess`** nad nalogom sa Trust Identity koja omogu캖ava `Serverless.com` AWS nalogu pristup toj ulozi.

<details>

<summary>Yaml roleTemplate</summary>
```yaml
Description: This stack creates an IAM role that can be used by Serverless Framework for use in deployments.
Resources:
SFRole:
Type: AWS::IAM::Role
Properties:
AssumeRolePolicyDocument:
Version: '2012-10-17'
Statement:
- Effect: Allow
Principal:
AWS: arn:aws:iam::486128539022:root
Action:
- sts:AssumeRole
Condition:
StringEquals:
sts:ExternalId: !Sub 'ServerlessFramework-${OrgUid}'
Path: /
RoleName: !Ref RoleName
ManagedPolicyArns:
- arn:aws:iam::aws:policy/AdministratorAccess
ReporterFunction:
Type: Custom::ServerlessFrameworkReporter
Properties:
ServiceToken: 'arn:aws:lambda:us-east-1:486128539022:function:sp-providers-stack-reporter-custom-resource-prod-tmen2ec'
OrgUid: !Ref OrgUid
RoleArn: !GetAtt SFRole.Arn
Alias: !Ref Alias
Outputs:
SFRoleArn:
Description: 'ARN for the IAM Role used by Serverless Framework'
Value: !GetAtt SFRole.Arn
Parameters:
OrgUid:
Description: Serverless Framework Org Uid
Type: String
Alias:
Description: Serverless Framework Provider Alias
Type: String
RoleName:
Description: Serverless Framework Role Name
Type: String
```
</details>

<details>

<summary>Odnos poverenja</summary>
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": {
"AWS": "arn:aws:iam::486128539022:root"
},
"Action": "sts:AssumeRole",
"Condition": {
"StringEquals": {
"sts:ExternalId": "ServerlessFramework-7bf7ddef-e1bf-43eb-a111-4d43e0894ccb"
}
}
}
]
}
```
</details>

5. U tutorijalu se tra쬴 da se kreira fajl `createCustomer.js` koji 캖e u su코tini kreirati novu API ta캜ku koju obra캠uje novi JS fajl i tra쬴 se da se modifikuje fajl `serverless.yml` kako bi se generisala **nova DynamoDB tabela**, definisala **promenljiva okru쬰nja**, uloga koja 캖e koristiti generisane lambde.

{% tabs %}
{% tab title="createCustomer.js" %}
```javascript
'use strict'
const AWS = require('aws-sdk')
module.exports.createCustomer = async (event) => {
const body = JSON.parse(Buffer.from(event.body, 'base64').toString())
const dynamoDb = new AWS.DynamoDB.DocumentClient()
const putParams = {
TableName: process.env.DYNAMODB_CUSTOMER_TABLE,
Item: {
primary_key: body.name,
email: body.email,
},
}
await dynamoDb.put(putParams).promise()
return {
statusCode: 201,
}
}
```
{% endtab %}

{% tab title="serverless.yml" %}
```yaml
# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: testing12342
# "app" enables Serverless Framework Dashboard features and sharing them with other Services.
app: tutorialapp
# "service" is the name of this project. This will also be added to your AWS resource names.
service: Tutorial

provider:
name: aws
runtime: nodejs20.x
environment:
DYNAMODB_CUSTOMER_TABLE: ${self:service}-customerTable-${sls:stage}
iam:
role:
statements:
- Effect: 'Allow'
Action:
- 'dynamodb:PutItem'
- 'dynamodb:Get*'
- 'dynamodb:Scan*'
- 'dynamodb:UpdateItem'
- 'dynamodb:DeleteItem'
Resource: arn:aws:dynamodb:${aws:region}:${aws:accountId}:table/${self:service}-customerTable-${sls:stage}

functions:
hello:
handler: handler.hello
events:
- httpApi:
path: /
method: get
createCustomer:
handler: createCustomer.createCustomer
events:
- httpApi:
path: /
method: post

resources:
Resources:
CustomerTable:
Type: AWS::DynamoDB::Table
Properties:
AttributeDefinitions:
- AttributeName: primary_key
AttributeType: S
BillingMode: PAY_PER_REQUEST
KeySchema:
- AttributeName: primary_key
KeyType: HASH
TableName: ${self:service}-customerTable-${sls:stage}
```
{% endtab %}
{% endtabs %}

6. Deploy it running **`serverless deploy`**
1. Implementacija 캖e se izvr코iti putem CloudFormation Stack-a
2. Imajte na umu da su **lambde izlo쬰ne putem API gateway-a** a ne putem direktnih URL-ova
7. **Test it**
1. Prethodni korak 캖e od코tampati **URL-ove** gde su va코i API endpoint lambdas funkcije implementirane

## Security Review of Serverless.com

### **Pogre코no konfigurisane IAM uloge i dozvole**

Previ코e permisivne IAM uloge mogu omogu캖iti neovla코캖en pristup cloud resursima, 코to mo쬰 dovesti do curenja podataka ili manipulacije resursima.

#### **Strategije ubla쬬vanja**

*   **Princip minimalnih privilegija:** Dodelite samo neophodne dozvole svakoj funkciji.

```yaml
provider:
iamRoleStatements:
- Effect: Allow
Action:
- dynamodb:Query
- dynamodb:Scan
Resource: arn:aws:dynamodb:${self:provider.region}:*:table/my-table
```
* **Koristite odvojene uloge:** Diferencirajte uloge na osnovu zahteva funkcije.

***

### **Nepouzdane tajne i upravljanje konfiguracijom**

Skladi코tenje osetljivih informacija (npr. API klju캜evi, kredencijali baze podataka) direktno u **`serverless.yml`** ili kodu mo쬰 dovesti do izlaganja ako su repozitorijumi kompromitovani.

**Preporu캜eni** na캜in za skladi코tenje promenljivih okru쬰nja u **`serverless.yml`** datoteci sa serverless.com (u vreme pisanja ovog teksta) je kori코캖enje `ssm` ili `s3` provajdera, 코to omogu캖ava dobijanje **vrednosti okru쬰nja iz ovih izvora u vreme implementacije** i **konfiguri코e** promenljive okru쬰nja **lambdi** sa **tekstom bez vrednosti**!

{% hint style="danger" %}
Stoga, svako ko ima dozvole za 캜itanje konfiguracije lambdi unutar AWS-a mo캖i 캖e da **pristupi svim ovim promenljivim okru쬰nja u 캜istom tekstu!**
{% endhint %}

Na primer, slede캖i primer 캖e koristiti SSM za dobijanje promenljive okru쬰nja:
```yaml
provider:
environment:
DB_PASSWORD: ${ssm:/aws/reference/secretsmanager/my-db-password~true}
```
I 캜ak i ako ovo spre캜ava hardkodiranje vrednosti promenljive okru쬰nja u **`serverless.yml`** datoteci, vrednost 캖e biti dobijena u vreme implementacije i bi캖e **dodata u 캜istom tekstu unutar lambda promenljive okru쬰nja**.

{% hint style="success" %}
Preporu캜eni na캜in za 캜uvanje promenljivih okru쬰nja koriste캖i serveless.com bio bi da **to 캜uvate u AWS tajni** i samo 캜uvate ime tajne u promenljivoj okru쬰nja, a **lambda kod bi to trebao prikupiti**.
{% endhint %}

#### **Strategije ubla쬬vanja**

* **Integracija sa Secrets Manager:** Koristite usluge poput **AWS Secrets Manager.**
* **Enkriptovane promenljive:** Iskoristite funkcije enkripcije Serverless Framework-a za osetljive podatke.
* **Kontrola pristupa:** Ograni캜ite pristup tajnama na osnovu uloga.

***

### **Ranljiv kod i zavisnosti**

Zastarale ili nesigurne zavisnosti mogu uvesti ranjivosti, dok nepravilno rukovanje ulazima mo쬰 dovesti do napada injekcijom koda.

#### **Strategije ubla쬬vanja**

*   **Upravljanje zavisnostima:** Redovno a쬿rirajte zavisnosti i skenirajte za ranjivosti.

```yaml
plugins:
- serverless-webpack
- serverless-plugin-snyk
```
* **Validacija ulaza:** Implementirajte strogu validaciju i sanitizaciju svih ulaza.
* **Revizije koda:** Sprovodite temeljne revizije kako biste identifikovali sigurnosne propuste.
* **Stati캜ka analiza:** Koristite alate za otkrivanje ranjivosti u kodnoj bazi.

***

### **Neadekvatno logovanje i pra캖enje**

Bez pravilnog logovanja i pra캖enja, zlonamerne aktivnosti mogu ostati neprime캖ene, odla쬿캖i odgovor na incidente.

#### **Strategije ubla쬬vanja**

*   **Centralizovano logovanje:** Agregirajte logove koriste캖i usluge poput **AWS CloudWatch** ili **Datadog**.

```yaml
plugins:
- serverless-plugin-datadog
```
* **Omogu캖ite detaljno logovanje:** Zabele쬴te bitne informacije bez izlaganja osetljivih podataka.
* **Postavite upozorenja:** Konfiguri코ite upozorenja za sumnjive aktivnosti ili anomalije.
* **Redovno pra캖enje:** Kontinuirano pratite logove i metrike za potencijalne sigurnosne incidente.

***

### **Neosigurane konfiguracije API Gateway-a**

Otvoreni ili nepravilno za코ti캖eni API-ji mogu se iskoristiti za neovla코캖en pristup, napade uskra캖ivanja usluge (DoS) ili napade izme캠u sajtova.

#### **Strategije ubla쬬vanja**

*   **Autentifikacija i autorizacija:** Implementirajte robusne mehanizme poput OAuth, API klju캜eva ili JWT.

```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
authorizer: aws_iam
```
*   **Ograni캜avanje brzine i usporavanje:** Spre캜ite zloupotrebu ograni캜avanjem brzine zahteva.

```yaml
provider:
apiGateway:
throttle:
burstLimit: 200
rateLimit: 100
```
*   **Sigurna CORS konfiguracija:** Ograni캜ite dozvoljene izvore, metode i zaglavlja.

```yaml
functions:
hello:
handler: handler.hello
events:
- http:
path: hello
method: get
cors:
origin: https://yourdomain.com
headers:
- Content-Type
```
* **Koristite vatrozidove za web aplikacije (WAF):** Filtrirajte i pratite HTTP zahteve za zlonamerne obrasce.

***

### **Nedovoljna izolacija funkcija**

Deljeni resursi i nedovoljna izolacija mogu dovesti do eskalacije privilegija ili nenamernih interakcija izme캠u funkcija.

#### **Strategije ubla쬬vanja**

* **Izolujte funkcije:** Dodelite razli캜ite resurse i IAM uloge kako biste osigurali nezavisno delovanje.
* **Particionisanje resursa:** Koristite odvojene baze podataka ili skladi코ne kante za razli캜ite funkcije.
*   **Koristite VPC:** Implementirajte funkcije unutar Virtuelnih Privatnih Oblaka za pobolj코anu mre쬹u izolaciju.

```yaml
provider:
vpc:
securityGroupIds:
- sg-xxxxxxxx
subnetIds:
- subnet-xxxxxx
```
* **Ograni캜ite dozvole funkcija:** Osigurajte da funkcije ne mogu pristupiti ili ometati resurse jedne druge osim ako to nije izri캜ito potrebno.

***

### **Nedovoljna za코tita podataka**

Ne코ifrovani podaci u mirovanju ili u prenosu mogu biti izlo쬰ni, 코to mo쬰 dovesti do curenja podataka ili manipulacije.

#### **Strategije ubla쬬vanja**

*   **말frujte podatke u mirovanju:** Iskoristite funkcije 코ifrovanja usluga u oblaku.

```yaml
resources:
Resources:
MyDynamoDBTable:
Type: AWS::DynamoDB::Table
Properties:
SSESpecification:
SSEEnabled: true
```
* **말frujte podatke u prenosu:** Koristite HTTPS/TLS za sve prenose podataka.
* **Osigurajte komunikaciju API-ja:** Sprovodite protokole 코ifrovanja i validirajte sertifikate.
* **Sigurno upravljajte 코ifrovanjem klju캜eva:** Koristite upravljane usluge klju캜eva i redovno rotirajte klju캜eve.

***

### **Nedostatak pravilnog rukovanja gre코kama**

Detaljne poruke o gre코kama mogu otkriti osetljive informacije o infrastrukturi ili kodnoj bazi, dok neobra캠ene izuzetke mogu dovesti do ru코enja aplikacije.

#### **Strategije ubla쬬vanja**

*   **Generi캜ke poruke o gre코kama:** Izbegavajte izlaganje internih detalja u odgovorima na gre코ke.

```javascript
javascriptCopy code// Primer u Node.js
exports.hello = async (event) => {
try {
// Logika funkcije
} catch (error) {
console.error(error);
return {
statusCode: 500,
body: JSON.stringify({ message: 'Internal Server Error' }),
};
}
};
```
* **Centralizovano rukovanje gre코kama:** Upravljajte i sanitizujte gre코ke dosledno kroz sve funkcije.
* **Pratite i logujte gre코ke:** Pratite i analizirajte gre코ke interno bez izlaganja detalja krajnjim korisnicima.

***

### **Neosigurane prakse implementacije**

Izlo쬰ne konfiguracije implementacije ili neovla코캖en pristup CI/CD pipelinima mogu dovesti do zlonamernih implementacija koda ili pogre코nih konfiguracija.

#### **Strategije ubla쬬vanja**

* **Osigurajte CI/CD pipelinske:** Implementirajte stroge kontrole pristupa, vi코efaktorsku autentifikaciju (MFA) i redovne revizije.
* **Sigurno 캜uvanje konfiguracije:** Dr쬴te datoteke za implementaciju bez hardkodiranih tajni i osetljivih podataka.
* **Koristite alate za sigurnost infrastrukture kao koda (IaC):** Koristite alate poput **Checkov** ili **Terraform Sentinel** za sprovo캠enje sigurnosnih politika.
* **Neizmenljive implementacije:** Spre캜ite neovla코캖ene promene nakon implementacije usvajanjem praksi neizmenljive infrastrukture.

***

### **Ranjivosti u dodacima i ekstenzijama**

Kori코캖enje neproverenih ili zlonamernih dodataka tre캖ih strana mo쬰 uvesti ranjivosti u va코e serverless aplikacije.

#### **Strategije ubla쬬vanja**

* **Temeljno proverite dodatke:** Procijenite sigurnost dodataka pre integracije, favorizuju캖i one iz uglednih izvora.
* **Ograni캜ite kori코캖enje dodataka:** Koristite samo neophodne dodatke kako biste smanjili povr코inu napada.
* **Pratite a쬿riranja dodataka:** Dr쬴te dodatke a쬿riranim kako biste imali koristi od sigurnosnih zakrpa.
* **Izolujte okru쬰nja dodataka:** Pokre캖ite dodatke u izolovanim okru쬰njima kako biste obuzdali potencijalne kompromitacije.

***

### **Izlo쬰nost osetljivih krajnjih ta캜aka**

Javno dostupne funkcije ili neograni캜eni API-ji mogu se iskoristiti za neovla코캖ene operacije.

#### **Strategije ubla쬬vanja**

* **Ograni캜ite pristup funkcijama:** Koristite VPC, sigurnosne grupe i pravila vatrozida kako biste ograni캜ili pristup pouzdanim izvorima.
* **Implementirajte robusnu autentifikaciju:** Osigurajte da sve izlo쬰ne krajnje ta캜ke zahtevaju pravilnu autentifikaciju i autorizaciju.
* **Sigurno koristite API Gateway:** Konfiguri코ite API Gateway da sprovodi sigurnosne politike, uklju캜uju캖i validaciju ulaza i ograni캜avanje brzine.
* **Onemogu캖ite neiskori코캖ene krajnje ta캜ke:** Redovno pregledajte i onemogu캖ite sve krajnje ta캜ke koje vi코e nisu u upotrebi.

***

### **Prekomerne dozvole za 캜lanove tima i spoljne saradnike**

Dodeljivanje prekomernih dozvola 캜lanovima tima i spoljnim saradnicima mo쬰 dovesti do neovla코캖enog pristupa, curenja podataka i zloupotrebe resursa. Ovaj rizik je poja캜an u okru쬰njima gde vi코e pojedinaca ima razli캜ite nivoe pristupa, pove캖avaju캖i povr코inu napada i potencijal za unutra코nje pretnje.

#### **Strategije ubla쬬vanja**

* **Princip najmanjih privilegija:** Osigurajte da 캜lanovi tima i saradnici imaju samo one dozvole koje su neophodne za obavljanje njihovih zadataka.

***

### **Bezbednost pristupnih klju캜eva i licenci**

**Pristupni klju캜evi** i **klju캜evi licenci** su kriti캜ne akreditive koji se koriste za autentifikaciju i autorizaciju interakcija sa Serverless Framework CLI.

* **Klju캜evi licenci:** Oni su jedinstveni identifikatori potrebni za autentifikaciju pristupa Serverless Framework verziji 4 koja omogu캖ava prijavu putem CLI.
* **Pristupni klju캜evi:** Akreditive koje omogu캖avaju Serverless Framework CLI da se autentifikuje sa Serverless Framework Dashboard-om. Kada se prijavite sa `serverless` cli, pristupni klju캜 캖e biti **generisan i sa캜uvan na laptopu**. Tako캠e ga mo쬰te postaviti kao promenljivu okru쬰nja pod imenom `SERVERLESS_ACCESS_KEY`.

#### **Sigurnosni rizici**

1. **Izlo쬰nost kroz repozitorijume koda:**
* Hardkodiranje ili slu캜ajno obavezivanje pristupnih klju캜eva i klju캜eva licenci u sisteme kontrole verzija mo쬰 dovesti do neovla코캖enog pristupa.
2. **Neosigurano skladi코tenje:**
* 캛uvanje klju캜eva u 캜istom tekstu unutar promenljivih okru쬰nja ili konfiguracionih datoteka bez pravilne enkripcije pove캖ava verovatno캖u curenja.
3. **Nepravilna distribucija:**
* Deljenje klju캜eva putem nesigurnih kanala (npr. e-po코ta, chat) mo쬰 rezultirati presretanjem od strane zlonamernih aktera.
4. **Nedostatak rotacije:**
* Ne redovno rotiranje klju캜eva produ쬬va period izlo쬰nosti ako su klju캜evi kompromitovani.
5. **Prekomerne dozvole:**
* Klju캜evi sa 코irokim dozvolama mogu se iskoristiti za obavljanje neovla코캖enih radnji na vi코e resursa.

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr쬴te HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
