# Vercel

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Informa√ß√µes B√°sicas

No Vercel, uma **Equipe** √© o **ambiente** completo que pertence a um cliente e um **projeto** √© uma **aplica√ß√£o**.

Para uma revis√£o de hardening do **Vercel**, voc√™ precisa solicitar um usu√°rio com **permiss√£o de fun√ß√£o Visualizador** ou pelo menos **permiss√£o de visualizador de projeto sobre os projetos** para verificar (caso voc√™ s√≥ precise verificar os projetos e n√£o a configura√ß√£o da Equipe tamb√©m).

## Configura√ß√µes do Projeto

### Geral

**Prop√≥sito:** Gerenciar configura√ß√µes fundamentais do projeto, como nome do projeto, framework e configura√ß√µes de build.

#### Configura√ß√µes de Seguran√ßa:

* **Transfer√™ncia**
* **M√° configura√ß√£o:** Permite transferir o projeto para outra equipe
* **Risco:** Um atacante pode roubar o projeto
* **Excluir Projeto**
* **M√° configura√ß√£o:** Permite excluir o projeto
* **Risco:** Excluir o projeto

***

### Dom√≠nios

**Prop√≥sito:** Gerenciar dom√≠nios personalizados, configura√ß√µes de DNS e configura√ß√µes de SSL.

#### Configura√ß√µes de Seguran√ßa:

* **Erros de Configura√ß√£o de DNS**
* **M√° configura√ß√£o:** Registros DNS incorretos (A, CNAME) apontando para servidores maliciosos.
* **Risco:** Sequestro de dom√≠nio, intercepta√ß√£o de tr√°fego e ataques de phishing.
* **Gerenciamento de Certificados SSL/TLS**
* **M√° configura√ß√£o:** Uso de certificados SSL/TLS fracos ou expirados.
* **Risco:** Vulner√°vel a ataques man-in-the-middle (MITM), comprometendo a integridade e confidencialidade dos dados.
* **Implementa√ß√£o de DNSSEC**
* **M√° configura√ß√£o:** Falha em habilitar DNSSEC ou configura√ß√µes DNSSEC incorretas.
* **Risco:** Aumento da suscetibilidade a ataques de spoofing de DNS e envenenamento de cache.
* **Ambiente usado por dom√≠nio**
* **M√° configura√ß√£o:** Alterar o ambiente usado pelo dom√≠nio em produ√ß√£o.
* **Risco:** Expor segredos ou funcionalidades potenciais que n√£o deveriam estar dispon√≠veis em produ√ß√£o.

***

### Ambientes

**Prop√≥sito:** Definir diferentes ambientes (Desenvolvimento, Pr√©-visualiza√ß√£o, Produ√ß√£o) com configura√ß√µes e vari√°veis espec√≠ficas.

#### Configura√ß√µes de Seguran√ßa:

* **Isolamento de Ambiente**
* **M√° configura√ß√£o:** Compartilhamento de vari√°veis de ambiente entre ambientes.
* **Risco:** Vazamento de segredos de produ√ß√£o em ambientes de desenvolvimento ou pr√©-visualiza√ß√£o, aumentando a exposi√ß√£o.
* **Acesso a Ambientes Sens√≠veis**
* **M√° configura√ß√£o:** Permitir amplo acesso a ambientes de produ√ß√£o.
* **Risco:** Altera√ß√µes n√£o autorizadas ou acesso a aplica√ß√µes em produ√ß√£o, levando a poss√≠veis interrup√ß√µes ou vazamentos de dados.

***

### Vari√°veis de Ambiente

**Prop√≥sito:** Gerenciar vari√°veis e segredos espec√≠ficos do ambiente usados pela aplica√ß√£o.

#### Configura√ß√µes de Seguran√ßa:

* **Expondo Vari√°veis Sens√≠veis**
* **M√° configura√ß√£o:** Prefixar vari√°veis sens√≠veis com `NEXT_PUBLIC_`, tornando-as acess√≠veis no lado do cliente.
* **Risco:** Exposi√ß√£o de chaves de API, credenciais de banco de dados ou outros dados sens√≠veis ao p√∫blico, levando a vazamentos de dados.
* **Sens√≠vel desativado**
* **M√° configura√ß√£o:** Se desativado (padr√£o), √© poss√≠vel ler os valores dos segredos gerados.
* **Risco:** Aumento da probabilidade de exposi√ß√£o acidental ou acesso n√£o autorizado a informa√ß√µes sens√≠veis.
* **Vari√°veis de Ambiente Compartilhadas**
* **M√° configura√ß√£o:** Estas s√£o vari√°veis de ambiente definidas no n√≠vel da Equipe e tamb√©m podem conter informa√ß√µes sens√≠veis.
* **Risco:** Aumento da probabilidade de exposi√ß√£o acidental ou acesso n√£o autorizado a informa√ß√µes sens√≠veis.

***

### Git

**Prop√≥sito:** Configurar integra√ß√µes de reposit√≥rio Git, prote√ß√µes de branch e gatilhos de implanta√ß√£o.

#### Configura√ß√µes de Seguran√ßa:

* **Etapa de Build Ignorada (TODO)**
* **M√° configura√ß√£o:** Parece que esta op√ß√£o permite configurar um script/commands bash que ser√° executado quando um novo commit for enviado ao Github, o que poderia permitir RCE.
* **Risco:** TBD

***

### Integra√ß√µes

**Prop√≥sito:** Conectar servi√ßos e ferramentas de terceiros para aprimorar as funcionalidades do projeto.

#### Configura√ß√µes de Seguran√ßa:

* **Integra√ß√µes de Terceiros Inseguras**
* **M√° configura√ß√£o:** Integrar com servi√ßos de terceiros n√£o confi√°veis ou inseguros.
* **Risco:** Introdu√ß√£o de vulnerabilidades, vazamentos de dados ou backdoors atrav√©s de integra√ß√µes comprometidas.
* **Integra√ß√µes com Permiss√µes Excessivas**
* **M√° configura√ß√£o:** Conceder permiss√µes excessivas a servi√ßos integrados.
* **Risco:** Acesso n√£o autorizado a recursos do projeto, manipula√ß√£o de dados ou interrup√ß√µes de servi√ßo.
* **Falta de Monitoramento de Integra√ß√µes**
* **M√° configura√ß√£o:** Falha em monitorar e auditar integra√ß√µes de terceiros.
* **Risco:** Detec√ß√£o atrasada de integra√ß√µes comprometidas, aumentando o impacto potencial de viola√ß√µes de seguran√ßa.

***

### Prote√ß√£o de Implanta√ß√£o

**Prop√≥sito:** Proteger implanta√ß√µes atrav√©s de v√°rios mecanismos de prote√ß√£o, controlando quem pode acessar e implantar em seus ambientes.

#### Configura√ß√µes de Seguran√ßa:

**Autentica√ß√£o Vercel**

* **M√° configura√ß√£o:** Desabilitar autentica√ß√£o ou n√£o impor verifica√ß√µes de membros da equipe.
* **Risco:** Usu√°rios n√£o autorizados podem acessar implanta√ß√µes, levando a vazamentos de dados ou uso indevido da aplica√ß√£o.

**Bypass de Prote√ß√£o para Automa√ß√£o**

* **M√° configura√ß√£o:** Expor o segredo de bypass publicamente ou usar segredos fracos.
* **Risco:** Atacantes podem contornar as prote√ß√µes de implanta√ß√£o, acessando e manipulando implanta√ß√µes protegidas.

**Links Compartilh√°veis**

* **M√° configura√ß√£o:** Compartilhar links indiscriminadamente ou falhar em revogar links desatualizados.
* **Risco:** Acesso n√£o autorizado a implanta√ß√µes protegidas, contornando autentica√ß√£o e restri√ß√µes de IP.

**Lista de Permiss√£o de OPTIONS**

* **M√° configura√ß√£o:** Permitir caminhos ou endpoints sens√≠veis excessivamente amplos.
* **Risco:** Atacantes podem explorar caminhos desprotegidos para realizar a√ß√µes n√£o autorizadas ou contornar verifica√ß√µes de seguran√ßa.

**Prote√ß√£o por Senha**

* **M√° configura√ß√£o:** Usar senhas fracas ou compartilh√°-las de forma insegura.
* **Risco:** Acesso n√£o autorizado a implanta√ß√µes se as senhas forem adivinhadas ou vazadas.
* **Nota:** Dispon√≠vel no plano **Pro** como parte da **Prote√ß√£o Avan√ßada de Implanta√ß√£o** por um adicional de $150/m√™s.

**Exce√ß√µes de Prote√ß√£o de Implanta√ß√£o**

* **M√° configura√ß√£o:** Adicionar dom√≠nios de produ√ß√£o ou sens√≠veis √† lista de exce√ß√µes inadvertidamente.
* **Risco:** Exposi√ß√£o de implanta√ß√µes cr√≠ticas ao p√∫blico, levando a vazamentos de dados ou acesso n√£o autorizado.
* **Nota:** Dispon√≠vel no plano **Pro** como parte da **Prote√ß√£o Avan√ßada de Implanta√ß√£o** por um adicional de $150/m√™s.

**IPs Confi√°veis**

* **M√° configura√ß√£o:** Especificar incorretamente endere√ßos IP ou intervalos CIDR.
* **Risco:** Usu√°rios leg√≠timos sendo bloqueados ou IPs n√£o autorizados ganhando acesso.
* **Nota:** Dispon√≠vel no plano **Enterprise**.

***

### Fun√ß√µes

**Prop√≥sito:** Configurar fun√ß√µes serverless, incluindo configura√ß√µes de runtime, aloca√ß√£o de mem√≥ria e pol√≠ticas de seguran√ßa.

#### Configura√ß√µes de Seguran√ßa:

* **Nada**

***

### Cache de Dados

**Prop√≥sito:** Gerenciar estrat√©gias e configura√ß√µes de cache para otimizar o desempenho e controlar o armazenamento de dados.

#### Configura√ß√µes de Seguran√ßa:

* **Limpar Cache**
* **M√° configura√ß√£o:** Permite excluir todo o cache.
* **Risco:** Usu√°rios n√£o autorizados excluindo o cache, levando a um potencial DoS.

***

### Cron Jobs

**Prop√≥sito:** Agendar tarefas e scripts automatizados para serem executados em intervalos especificados.

#### Configura√ß√µes de Seguran√ßa:

* **Desativar Cron Job**
* **M√° configura√ß√£o:** Permite desativar cron jobs declarados dentro do c√≥digo.
* **Risco:** Interrup√ß√£o potencial do servi√ßo (dependendo do que os cron jobs eram destinados).

***

### Log Drains

**Prop√≥sito:** Configurar servi√ßos de logging externos para capturar e armazenar logs da aplica√ß√£o para monitoramento e auditoria.

#### Configura√ß√µes de Seguran√ßa:

* Nada (gerenciado a partir das configura√ß√µes das equipes)

***

### Seguran√ßa

**Prop√≥sito:** Hub central para v√°rias configura√ß√µes relacionadas √† seguran√ßa que afetam o acesso ao projeto, prote√ß√£o de c√≥digo-fonte e mais.

#### Configura√ß√µes de Seguran√ßa:

**Logs de Build e Prote√ß√£o de C√≥digo-Fonte**

* **M√° configura√ß√£o:** Desabilitar prote√ß√£o ou expor caminhos `/logs` e `/src` publicamente.
* **Risco:** Acesso n√£o autorizado a logs de build e c√≥digo-fonte, levando a vazamentos de informa√ß√µes e potencial explora√ß√£o de vulnerabilidades.

**Prote√ß√£o de Fork do Git**

* **M√° configura√ß√£o:** Permitir pull requests n√£o autorizados sem revis√µes adequadas.
* **Risco:** C√≥digo malicioso pode ser mesclado ao c√≥digo-base, introduzindo vulnerabilidades ou backdoors.

**Acesso Seguro ao Backend com Federa√ß√£o OIDC**

* **M√° configura√ß√£o:** Configura√ß√£o incorreta dos par√¢metros OIDC ou uso de URLs de emissor inseguras.
* **Risco:** Acesso n√£o autorizado a servi√ßos de backend atrav√©s de fluxos de autentica√ß√£o falhos.

**Pol√≠tica de Reten√ß√£o de Implanta√ß√£o**

* **M√° configura√ß√£o:** Definir per√≠odos de reten√ß√£o muito curtos (perdendo o hist√≥rico de implanta√ß√µes) ou muito longos (reten√ß√£o desnecess√°ria de dados).
* **Risco:** Incapacidade de realizar rollbacks quando necess√°rio ou aumento do risco de exposi√ß√£o de dados de implanta√ß√µes antigas.

**Implanta√ß√µes Recentemente Exclu√≠das**

* **M√° configura√ß√£o:** N√£o monitorar implanta√ß√µes exclu√≠das ou confiar apenas em exclus√µes automatizadas.
* **Risco:** Perda de hist√≥rico cr√≠tico de implanta√ß√µes, dificultando auditorias e rollbacks.

***

### Avan√ßado

**Prop√≥sito:** Acesso a configura√ß√µes adicionais do projeto para ajuste fino de configura√ß√µes e aprimoramento da seguran√ßa.

#### Configura√ß√µes de Seguran√ßa:

**Listagem de Diret√≥rio**

* **M√° configura√ß√£o:** Habilitar a listagem de diret√≥rio permite que os usu√°rios vejam o conte√∫do do diret√≥rio sem um arquivo de √≠ndice.
* **Risco:** Exposi√ß√£o de arquivos sens√≠veis, estrutura da aplica√ß√£o e potenciais pontos de entrada para ataques.

***

## Firewall do Projeto

### Firewall

#### Configura√ß√µes de Seguran√ßa:

**Habilitar Modo de Desafio de Ataque**

* **M√° configura√ß√£o:** Habilitar isso melhora as defesas da aplica√ß√£o web contra DoS, mas √† custa da usabilidade.
* **Risco:** Potenciais problemas de experi√™ncia do usu√°rio.

### Regras Personalizadas e Bloqueio de IP

* **M√° configura√ß√£o:** Permite desbloquear/bloquear tr√°fego.
* **Risco:** Potencial DoS permitindo tr√°fego malicioso ou bloqueando tr√°fego benigno.

***

## Implanta√ß√£o do Projeto

### Fonte

* **M√° configura√ß√£o:** Permite acesso para ler o c√≥digo-fonte completo da aplica√ß√£o.
* **Risco:** Exposi√ß√£o potencial de informa√ß√µes sens√≠veis.

### Prote√ß√£o contra Desvio

* **M√° configura√ß√£o:** Esta prote√ß√£o garante que a aplica√ß√£o do cliente e do servidor estejam sempre usando a mesma vers√£o, para que n√£o haja desincroniza√ß√µes onde o cliente usa uma vers√£o diferente do servidor e, portanto, n√£o se entendem.
* **Risco:** Desabilitar isso (se habilitado) pode causar problemas de DoS em novas implanta√ß√µes no futuro.

***

## Configura√ß√µes da Equipe

### Geral

#### Configura√ß√µes de Seguran√ßa:

* **Transfer√™ncia**
* **M√° configura√ß√£o:** Permite transferir todos os projetos para outra equipe.
* **Risco:** Um atacante pode roubar os projetos.
* **Excluir Projeto**
* **M√° configura√ß√£o:** Permite excluir a equipe com todos os projetos.
* **Risco:** Excluir os projetos.

***

### Faturamento

#### Configura√ß√µes de Seguran√ßa:

* **Limite de Custo do Speed Insights**
* **M√° configura√ß√£o:** Um atacante pode aumentar esse n√∫mero.
* **Risco:** Aumento de custos.

***

### Membros

#### Configura√ß√µes de Seguran√ßa:

* **Adicionar membros**
* **M√° configura√ß√£o:** Um atacante pode manter persist√™ncia convidando uma conta que ele controla.
* **Risco:** Persist√™ncia do atacante.
* **Fun√ß√µes**
* **M√° configura√ß√£o:** Conceder muitas permiss√µes a pessoas que n√£o precisam aumenta o risco da configura√ß√£o do Vercel. Verifique todas as poss√≠veis fun√ß√µes em [https://vercel.com/docs/accounts/team-members-and-roles/access-roles](https://vercel.com/docs/accounts/team-members-and-roles/access-roles).
* **Risco**: Aumentar a exposi√ß√£o da Equipe Vercel.

***

### Grupos de Acesso

Um **Grupo de Acesso** no Vercel √© uma cole√ß√£o de projetos e membros da equipe com atribui√ß√µes de fun√ß√£o predefinidas, permitindo gerenciamento de acesso centralizado e simplificado em v√°rios projetos.

**Poss√≠veis M√° Configura√ß√µes:**

* **Permiss√µes Excessivas para Membros:** Atribuir fun√ß√µes com mais permiss√µes do que o necess√°rio, levando a acesso ou a√ß√µes n√£o autorizadas.
* **Atribui√ß√µes de Fun√ß√£o Improprias:** Atribuir incorretamente fun√ß√µes que n√£o se alinham com as responsabilidades dos membros da equipe, causando escalonamento de privil√©gios.
* **Falta de Segrega√ß√£o de Projetos:** Falha em separar projetos sens√≠veis, permitindo acesso mais amplo do que o pretendido.
* **Gerenciamento Insuficiente de Grupos:** N√£o revisar ou atualizar regularmente os Grupos de Acesso, resultando em permiss√µes de acesso desatualizadas ou inadequadas.
* **Defini√ß√µes de Fun√ß√£o Inconsistentes:** Usar defini√ß√µes de fun√ß√£o inconsistentes ou pouco claras em diferentes Grupos de Acesso, levando a confus√£o e lacunas de seguran√ßa.

***

### Log Drains

#### Configura√ß√µes de Seguran√ßa:

* **Log Drains para terceiros:**
* **M√° configura√ß√£o:** Um atacante pode configurar um Log Drain para roubar os logs.
* **Risco:** Persist√™ncia parcial.

***

### Seguran√ßa e Privacidade

#### Configura√ß√µes de Seguran√ßa:

* **Dom√≠nio de Email da Equipe:** Quando configurado, esta configura√ß√£o convida automaticamente Contas Pessoais do Vercel com endere√ßos de email terminando no dom√≠nio especificado (por exemplo, `mydomain.com`) a se juntarem √† sua equipe ao se inscreverem e no painel.
* **M√° configura√ß√£o:**\
* Especificar o dom√≠nio de email errado ou um dom√≠nio com erro de ortografia na configura√ß√£o do Dom√≠nio de Email da Equipe.
* Usar um dom√≠nio de email comum (por exemplo, `gmail.com`, `hotmail.com`) em vez de um dom√≠nio espec√≠fico da empresa.
* **Riscos:**
* **Acesso N√£o Autorizado:** Usu√°rios com endere√ßos de email de dom√≠nios n√£o pretendidos podem receber convites para se juntar √† sua equipe.
* **Exposi√ß√£o de Dados:** Exposi√ß√£o potencial de informa√ß√µes sens√≠veis do projeto a indiv√≠duos n√£o autorizados.
* **Escopos Git Protegidos:** Permite adicionar at√© 5 escopos Git √† sua equipe para impedir que outras equipes Vercel implantem reposit√≥rios do escopo protegido. V√°rias equipes podem especificar o mesmo escopo, permitindo acesso a ambas as equipes.
* **M√° configura√ß√£o:** N√£o adicionar escopos Git cr√≠ticos √† lista protegida.
* **Riscos:**
* **Implanta√ß√µes N√£o Autorizadas:** Outras equipes podem implantar reposit√≥rios dos escopos Git da sua organiza√ß√£o sem autoriza√ß√£o.
* **Exposi√ß√£o de Propriedade Intelectual:** C√≥digo propriet√°rio pode ser implantado e acessado fora da sua equipe.
* **Pol√≠ticas de Vari√°veis de Ambiente:** Imp√µe pol√≠ticas para a cria√ß√£o e edi√ß√£o das vari√°veis de ambiente da equipe. Especificamente, voc√™ pode impor que todas as vari√°veis de ambiente sejam criadas como **Vari√°veis de Ambiente Sens√≠veis**, que s√≥ podem ser descriptografadas pelo sistema de implanta√ß√£o do Vercel.
* **M√° configura√ß√£o:** Manter a imposi√ß√£o de vari√°veis de ambiente sens√≠veis desativada.
* **Riscos:**
* **Exposi√ß√£o de Segredos:** Vari√°veis de ambiente podem ser visualizadas ou editadas por membros n√£o autorizados da equipe.
* **Vazamento de Dados:** Informa√ß√µes sens√≠veis como chaves de API e credenciais podem ser vazadas.
* **Registro de Auditoria:** Fornece uma exporta√ß√£o da atividade da equipe por at√© os √∫ltimos 90 dias. Registros de auditoria ajudam a monitorar e rastrear a√ß√µes realizadas pelos membros da equipe.
* **M√° configura√ß√£o:**\
Conceder acesso aos registros de auditoria a membros n√£o autorizados da equipe.
* **Riscos:**
* **Viola√ß√£o de Privacidade:** Exposi√ß√£o de atividades e dados sens√≠veis dos usu√°rios.
* **Manipula√ß√£o de Registros:** Atores maliciosos podem alterar ou excluir registros para encobrir suas trilhas.
* **SAML Single Sign-On:** Permite personalizar a autentica√ß√£o SAML e a sincroniza√ß√£o de diret√≥rios para sua equipe, permitindo integra√ß√£o com um Provedor de Identidade (IdP) para autentica√ß√£o e gerenciamento de usu√°rios centralizados.
* **M√° configura√ß√£o:** Um atacante pode backdoor a configura√ß√£o da Equipe configurando par√¢metros SAML como Entity ID, SSO URL ou impress√µes digitais de certificado.
* **Risco:** Manter persist√™ncia.
* **Visibilidade do Endere√ßo IP:** Controla se os endere√ßos IP, que podem ser considerados informa√ß√µes pessoais sob certas leis de prote√ß√£o de dados, s√£o exibidos em consultas de Monitoramento e Log Drains.
* **M√° configura√ß√£o:** Deixar a visibilidade do endere√ßo IP habilitada sem necessidade.
* **Riscos:**
* **Viola√ß√£o de Privacidade:** N√£o conformidade com regulamentos de prote√ß√£o de dados como o GDPR.
* **Repercuss√µes Legais:** Multas e penalidades potenciais por manuseio inadequado de dados pessoais.
* **Bloqueio de IP:** Permite a configura√ß√£o de endere√ßos IP e intervalos CIDR que o Vercel deve bloquear solicita√ß√µes. Solicita√ß√µes bloqueadas n√£o contribuem para sua cobran√ßa.
* **M√° configura√ß√£o:** Poderia ser abusado por um atacante para permitir tr√°fego malicioso ou bloquear tr√°fego leg√≠timo.
* **Riscos:**
* **Nega√ß√£o de Servi√ßo a Usu√°rios Leg√≠timos:** Bloqueio de acesso para usu√°rios ou parceiros v√°lidos.
* **Interrup√ß√µes Operacionais:** Perda de disponibilidade de servi√ßo para certas regi√µes ou clientes.

***

### Computa√ß√£o Segura

**Vercel Secure Compute** permite conex√µes seguras e privadas entre Fun√ß√µes Vercel e ambientes de backend (por exemplo, bancos de dados) estabelecendo redes isoladas com endere√ßos IP dedicados. Isso elimina a necessidade de expor servi√ßos de backend publicamente, melhorando a seguran√ßa, conformidade e privacidade.

#### **Poss√≠veis M√° Configura√ß√µes e Riscos**

1. **Sele√ß√£o Incorreta da Regi√£o AWS**
* **M√° configura√ß√£o:** Escolher uma regi√£o AWS para a rede Secure Compute que n√£o corresponda √† regi√£o dos servi√ßos de backend.
* **Risco:** Aumento da lat√™ncia, potenciais problemas de conformidade de resid√™ncia de dados e desempenho degradado.
2. **Blocos CIDR Sobrepostos**
* **M√° configura√ß√£o:** Selecionar blocos CIDR que se sobrep√µem a VPCs existentes ou outras redes.
* **Risco:** Conflitos de rede levando a conex√µes falhadas, acesso n√£o autorizado ou vazamento de dados entre redes.
3. **Configura√ß√£o Impropria de Peering VPC**
* **M√° configura√ß√£o:** Configura√ß√£o incorreta do peering VPC (por exemplo, IDs de VPC errados, atualiza√ß√µes incompletas da tabela de rotas).
* **Risco:** Acesso n√£o autorizado √† infraestrutura de backend, conex√µes seguras falhadas e potenciais vazamentos de dados.
4. **Atribui√ß√µes Excessivas de Projetos**
* **M√° configura√ß√£o:** Atribuir v√°rios projetos a uma √∫nica rede Secure Compute sem o devido isolamento.
* **Risco:** Exposi√ß√£o de IP compartilhado aumenta a superf√≠cie de ataque, permitindo que projetos comprometidos afetem outros.
5. **Gerenciamento Inadequado de Endere√ßos IP**
* **M√° configura√ß√£o:** Falha em gerenciar ou rotacionar endere√ßos IP dedicados adequadamente.
* **Risco:** Spoofing de IP, vulnerabilidades de rastreamento e potencial blacklist se os IPs estiverem associados a atividades maliciosas.
6. **Inclus√£o Desnecess√°ria de Cont√™ineres de Build**
* **M√° configura√ß√£o:** Adicionar cont√™ineres de build √† rede Secure Compute quando o acesso ao backend n√£o for necess√°rio durante as builds.
* **Risco:** Superf√≠cie de ataque expandida, atrasos aumentados na provis√£o e consumo desnecess√°rio de recursos de rede.
7. **Falha em Lidar com Segredos de Bypass de Forma Segura**
* **M√° configura√ß√£o:** Expor ou manusear incorretamente segredos usados para contornar prote√ß√µes de implanta√ß√£o.
* **Risco:** Acesso n√£o autorizado a implanta√ß√µes protegidas, permitindo que atacantes manipulem ou implantem c√≥digo malicioso.
8. **Ignorando Configura√ß√µes de Failover de Regi√£o**
* **M√° configura√ß√£o:** N√£o configurar regi√µes de failover passivas ou configurar incorretamente as configura√ß√µes de failover.
* **Risco:** Tempo de inatividade do servi√ßo durante interrup√ß√µes na regi√£o prim√°ria, levando a disponibilidade reduzida e potencial inconsist√™ncia de dados.
9. **Excedendo Limites de Conex√£o de Peering VPC**
* **M√° configura√ß√£o:** Tentar estabelecer mais conex√µes de peering VPC do que o limite permitido (por exemplo, excedendo 50 conex√µes).
* **Risco:** Incapacidade de conectar servi√ßos de backend necess√°rios de forma segura, causando falhas de implanta√ß√£o e interrup√ß√µes operacionais.
10. **Configura√ß√µes de Rede Inseguras**
* **M√° configura√ß√£o:** Regras de firewall fracas, falta de criptografia ou segmenta√ß√£o inadequada da rede dentro da rede Secure Compute.
* **Risco:** Intercepta√ß√£o de dados, acesso n√£o autorizado a servi√ßos de backend e aumento da vulnerabilidade a ataques.

***

### Vari√°veis de Ambiente

**Prop√≥sito:** Gerenciar vari√°veis e segredos espec√≠ficos do ambiente usados por todos os projetos.

#### Configura√ß√µes de Seguran√ßa:

* **Expondo Vari√°veis Sens√≠veis**
* **M√° configura√ß√£o:** Prefixar vari√°veis sens√≠veis com `NEXT_PUBLIC_`, tornando-as acess√≠veis no lado do cliente.
* **Risco:** Exposi√ß√£o de chaves de API, credenciais de banco de dados ou outros dados sens√≠veis ao p√∫blico, levando a vazamentos de dados.
* **Sens√≠vel desativado**
* **M√° configura√ß√£o:** Se desativado (padr√£o), √© poss√≠vel ler os valores dos segredos gerados.
* **Risco:** Aumento da probabilidade de exposi√ß√£o acidental ou acesso n√£o autorizado a informa√ß√µes sens√≠veis.

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/image (2) (1).png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
