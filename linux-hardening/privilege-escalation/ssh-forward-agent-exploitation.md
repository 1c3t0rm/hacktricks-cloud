# SSH Forward Agent exploitation

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini podrške HackTricks-u:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Summary

Šta možete uraditi ako otkrijete unutar `/etc/ssh_config` ili unutar `$HOME/.ssh/config` konfiguracije ovo:

```
ForwardAgent yes
```

Ako ste root unutar mašine, verovatno možete **pristupiti bilo kojoj ssh vezi koju je napravio bilo koji agent** koji možete pronaći u direktorijumu _/tmp_

Imitirajte Boba koristeći jedan od Bobovih ssh-agenta:

```bash
SSH_AUTH_SOCK=/tmp/ssh-haqzR16816/agent.16816 ssh bob@boston
```

### Zašto ovo radi?

Kada postavite promenljivu `SSH_AUTH_SOCK`, pristupate ključevima Boba koji su korišćeni u Bobovoj SSH vezi. Zatim, ako je njegov privatni ključ još uvek tu (obično će biti), moći ćete pristupiti bilo kojem hostu koristeći ga.

Kako je privatni ključ sačuvan u memoriji agenta nešifrovan, pretpostavljam da ako ste Bob, ali ne znate lozinku privatnog ključa, i dalje možete pristupiti agentu i koristiti ga.

Druga opcija je da korisnik vlasnik agenta i root mogu pristupiti memoriji agenta i izvući privatni ključ.

## Dugačko objašnjenje i iskorišćavanje

**Proverite** [**originalno istraživanje ovde**](https://www.clockwork.com/insights/ssh-agent-hijacking/)

<details>

<summary><strong>Naučite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi načini da podržite HackTricks:

* Ako želite da vidite **vašu kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvanični PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), našu kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 🐦 [**@carlospolopm**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
